"use strict";(self.webpackChunknet6_markdown_web_engine=self.webpackChunknet6_markdown_web_engine||[]).push([[302],{9302:(xt,C,a)=>{a.r(C),a.d(C,{MarkdownDocumentSearchModule:()=>Tt});var h=a(8692),i=a(92),P=a(8941),I=a(1985),J=a(9895),y=a(5436),w=a(8023),b=a(1927),N=a(1528),d=a(3528),$=a(3151),k=a(2147),Q=a(5696),U=a(2085);const{isArray:D}=Array;function L(n){return 1===n.length&&D(n[0])?n[0]:n}var V=a(2692),G=a(7824),K=a(6651);function O(...n){const r=(0,K.jO)(n);return r?(0,G.z)(O(...n),(0,V.Z)(r)):(0,U.e)((e,o)=>{(0,Q.l)([e,...L(n)])(o)})}function B(...n){return O(...n)}var T=a(7969),l=a(470),H=a(74),u=a(3776),p=a(730),j=a(2056);function S(n){return(r,e)=>{const o=r.content.title.toLowerCase(),c=e.content.title.toLowerCase();let s=0;return o>c?s=1:o<c&&(s=-1),n?-1*s:s}}function x(n){return(r,e)=>{const o=r.content.date,c=e.content.date;let s=0;return o||c?o?c?c>o?s=-1:o>c&&(s=1):s=1:s=-1:s=0,n?-1*s:s}}var W=a(2340),f=a(5236);const m=(0,p.ZF)(j.U),Y=(0,p.P1)(m,f.aE,(n,r)=>{let e=r.filter(o=>!W.N.ignoreListForCategory.some(c=>c===o?.content?.category.toLowerCase()));return!n.documentSearch.searchWord&&!n.documentSearch.tags||(e=e.filter(o=>-1!==o.content?.title.indexOf(n.documentSearch.searchWord)||-1!==o.content?.category.indexOf(n.documentSearch.searchWord)||-1!==o.content?.body.indexOf(n.documentSearch.searchWord)),n.documentSearch.category&&(e=e.filter(o=>o.content?.category===n.documentSearch.category)),n.documentSearch.tags&&n.documentSearch.tags.length>0&&(e=e.filter(o=>!(!o.content.tag||0===o.content.tag?.length)&&n.documentSearch.tags.every(c=>-1!==o.content.tag.indexOf(c))))),function M(n,r){let e=[...r];switch(n.documentSearch.sortBy){case l.$.dateLatest:return e.sort(x(!0));case l.$.dateOldest:return e.sort(x(!1));case l.$.aToZ:return e.sort(S(!1));case l.$.zToA:return e.sort(S(!0));default:return r}}(n,e)}),z=(0,p.P1)(m,n=>!!n?.documentSearch?.category||n?.documentSearch?.tags?.length>0),E=(0,p.P1)(m,n=>n?.documentSearch?.category),R=(0,p.P1)(m,n=>n?.documentSearch?.tags),X=(0,p.P1)(m,n=>n?.documentSearch?.searchWord),q=(0,p.P1)(m,n=>n?.documentSearch.viewType);var tt=a(9166),t=a(4537),_=a(1637),et=a(1379),nt=a(9638),g=a(7084),v=a(4433),ot=a(3331),at=a(9665),ct=a(8033),A=a(9596),Z=a(6030),rt=a(6153),st=a(7290);const it=["tagInput"];function lt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.clearSearchInput())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function pt(n,r){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){const e=r.ngIf;t.xp6(1),t.hij(" ",null!=e&&e.length&&e.length>0?e.length:"No"," doc(s) found ")}}function mt(n,r){if(1&n&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij(" ",e.value," ")}}function ht(n,r){if(1&n&&(t.ynx(0),t._UZ(1,"app-document-list",21),t.ALo(2,"async"),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("documents",t.lcZ(2,1,e.documents$))}}function dt(n,r){if(1&n&&(t.ynx(0),t._UZ(1,"app-expansion-document-list",22),t.BQk()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("documents$",e.documents$)}}function ut(n,r){if(1&n&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function gt(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){t.CHM(e);const c=t.oxw(2);return t.KtG(c.clearSearchCategory())}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA()()}}function ft(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-chip",38),t.NdJ("removed",function(){const s=t.CHM(e).$implicit,St=t.oxw(2);return t.KtG(St.tagRemove(s))}),t._uU(1),t.TgZ(2,"button",39)(3,"mat-icon"),t._uU(4,"cancel"),t.qZA()()()}if(2&n){const e=r.$implicit;t.xp6(1),t.hij(" ",e," ")}}function vt(n,r){if(1&n&&(t.TgZ(0,"mat-option",20),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function Ct(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"div",23)(1,"div")(2,"mat-label"),t._uU(3,"Advances Search Options"),t.qZA()(),t.TgZ(4,"mat-form-field",24)(5,"mat-label",25),t._uU(6,"Categories"),t.qZA(),t._UZ(7,"input",26),t.TgZ(8,"mat-autocomplete",27,28),t.NdJ("optionSelected",function(c){t.CHM(e);const s=t.oxw();return t.KtG(s.categorySelected(c))}),t.YNc(10,ut,2,2,"mat-option",15),t.ALo(11,"async"),t.qZA(),t.YNc(12,gt,3,0,"button",4),t.qZA(),t.TgZ(13,"mat-form-field",24)(14,"mat-label",25),t._uU(15,"Tags"),t.qZA(),t.TgZ(16,"mat-chip-list",29,30),t.YNc(18,ft,5,1,"mat-chip",31),t.TgZ(19,"input",32,33),t.NdJ("matChipInputTokenEnd",function(c){t.CHM(e);const s=t.oxw();return t.KtG(s.add(c))}),t.qZA()(),t.TgZ(21,"mat-autocomplete",27,34),t.NdJ("optionSelected",function(c){t.CHM(e);const s=t.oxw();return t.KtG(s.tagSelected(c))}),t.YNc(23,vt,2,2,"mat-option",15),t.ALo(24,"async"),t.qZA()(),t.TgZ(25,"div",35)(26,"button",36),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.advancedSearch())}),t._uU(27,"Search"),t.qZA(),t.TgZ(28,"button",37),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.clearAdvancedSearchOptions())}),t._uU(29,"Clear"),t.qZA()()()}if(2&n){const e=t.MAs(9),o=t.MAs(17),c=t.MAs(22),s=t.oxw();t.xp6(4),t.Udp("font-size",12,"px"),t.Q6J("formGroup",s.searchForm),t.xp6(3),t.Q6J("matAutocomplete",e),t.xp6(3),t.Q6J("ngForOf",t.lcZ(11,15,s.allCategories$)),t.xp6(2),t.Q6J("ngIf",s.searchForm.controls.searchCategoryForm.value),t.xp6(1),t.Udp("font-size",12,"px"),t.Q6J("formGroup",s.searchForm),t.xp6(3),t.Q6J("multiple",!1),t.xp6(2),t.Q6J("ngForOf",s.tags),t.xp6(1),t.Q6J("matAutocomplete",c)("matChipInputFor",o)("matChipInputSeparatorKeyCodes",s.separatorKeysCodes),t.xp6(4),t.Q6J("ngForOf",t.lcZ(24,17,s.filteredTags$))}}const yt=function(n){return{"has-advanced-options":n}},F=function(n){return{"active-view-type":n}},Ot=[{path:"",component:(()=>{class n{constructor(e){this.store=e,this.searchForm=new i.cw({searchInputForm:new i.NI(""),searchOptionForm:new i.NI(l.$.dateLatest),searchCategoryForm:new i.NI(""),searchTagForm:new i.NI("")}),this.category="",this.isAdvancedSearchOpen=!1,this.separatorKeysCodes=[y.K5,y.OC],this.sortByOptions=[{key:l.$.dateLatest,value:"by date (latest)"},{key:l.$.dateOldest,value:"by date (oldest)"},{key:l.$.aToZ,value:"by A to Z"},{key:l.$.zToA,value:"by Z to A"}],this.tags=[],this.viewTypeModel=H.B,this.currentViewType=0,this.onDestroy=new w.x}ngOnInit(){this.documents$=this.store.select(Y),this.allCategories$=this.store.select(f.us),this.allTags$=this.store.select(f.a0),this.hasAdvancedOptions$=this.store.select(z),this.viewType$=this.store.select(q),this.filteredTags$=this.searchForm.controls.searchTagForm.valueChanges.pipe((0,b.O)(null),(0,N.w)(e=>e?this.getAutocompleteTags(e):this.getAvailableTags())),this.searchForm.controls.searchOptionForm.valueChanges.pipe((0,d.R)(this.onDestroy)).subscribe(e=>{this.searchDocumentInternal()}),this.searchForm?.controls?.searchInputForm.valueChanges.pipe((0,$.b)(1e3),(0,k.x)(),(0,d.R)(this.onDestroy)).subscribe(e=>{this.searchDocumentInternal()}),this.store.select(X).pipe(B(this.store.select(E)),(0,d.R)(this.onDestroy)).subscribe(([e,o])=>{this.searchForm.patchValue({searchInputForm:e,searchCategoryForm:o})}),this.store.select(R).pipe((0,d.R)(this.onDestroy)).subscribe(e=>{this.tags=[...e]}),this.viewType$.pipe((0,d.R)(this.onDestroy)).subscribe(e=>{this.currentViewType=e})}ngOnDestroy(){this.onDestroy.next(),this.onDestroy.complete()}add(e){const o=(e.value||"").trim();o&&this.tags.push(o),e.chipInput.clear(),this.searchForm.patchValue({searchTagForm:""})}advancedSearch(){this.store.dispatch((0,u.eN)({tags:[...this.tags],category:this.category})),this.searchDocumentInternal(),this.toggleAdvancedSearchOpen()}categorySelected(e){this.category=e.option.viewValue}clearAdvancedSearchOptions(){this.store.dispatch((0,u.eN)({tags:[],category:""})),this.category="",this.searchForm.patchValue({searchTagForm:""}),this.tags.splice(0),this.searchDocumentInternal(),this.toggleAdvancedSearchOpen()}clearSearchCategory(){this.category="",this.searchForm.patchValue({searchCategoryForm:""})}clearSearchInput(){this.searchForm.patchValue({searchInputForm:"",searchOptionForm:l.$.dateLatest})}tagRemove(e){const o=this.tags.indexOf(e);o>=0&&this.tags.splice(o,1)}tagSelected(e){this.tags.push(e.option.viewValue),this.tagInput.nativeElement.value="",this.searchForm.patchValue({searchTagForm:""})}toggleAdvancedSearchOpen(){this.isAdvancedSearchOpen=!this.isAdvancedSearchOpen}updateViewType(e){this.currentViewType!==e&&this.store.dispatch((0,u.cM)({viewType:e}))}getAutocompleteTags(e){const o=e.toLowerCase();return this.allTags$.pipe((0,T.U)(c=>c.filter(s=>-1!==s.toLowerCase().indexOf(o))))}getAvailableTags(){return this.allTags$.pipe((0,T.U)(e=>e.filter(o=>-1===this.tags.indexOf(o.toLowerCase()))))}searchDocumentInternal(){const e=this.searchForm.controls.searchInputForm.value??"",o=this.searchForm.controls.searchOptionForm.value??0;this.store.dispatch((0,tt.QP)()),this.store.dispatch((0,u.W7)({search:e,sortBy:o}))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.yh))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-search"]],viewQuery:function(e,o){if(1&e&&t.Gf(it,5),2&e){let c;t.iGM(c=t.CRH())&&(o.tagInput=c.first)}},decls:31,vars:36,consts:[[1,"search-grid"],[1,"search-form-container"],["appearance","outline",1,"search-input-form",3,"formGroup"],["matInput","","type","text","placeholder","please input search keyword...","formControlName","searchInputForm"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["mat-button","","matSuffix","","mat-icon-button","","cdkOverlayOrigin","",3,"click"],["trigger","cdkOverlayOrigin"],["svgIcon","tune",3,"ngClass"],[1,"search-options-container"],[1,"search-options-list-container"],["svgIcon","format-list-bulleted-type",3,"ngClass","click"],["svgIcon","format-list-group",3,"ngClass","click"],[4,"ngIf"],["appearance","fill",1,"search-options-sort-form",3,"formGroup"],["formControlName","searchOptionForm"],[3,"value",4,"ngFor","ngForOf"],[1,"search-result-container"],["itemSize","10",1,"search-result-vscroll"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayBackdropClass","backdropClick"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],[3,"documents"],[3,"documents$"],[1,"search-advanced-overlay"],["appearance","outline",1,"autocomplete-input",3,"formGroup"],[1,"autocomplete"],["matInput","","type","text","placeholder","Select categories...","formControlName","searchCategoryForm",3,"matAutocomplete"],[3,"optionSelected"],["autoCategories","matAutocomplete"],[3,"multiple"],["chipList",""],[3,"removed",4,"ngFor","ngForOf"],["placeholder","New tag...","formControlName","searchTagForm",3,"matAutocomplete","matChipInputFor","matChipInputSeparatorKeyCodes","matChipInputTokenEnd"],["tagInput",""],["autoTag","matAutocomplete"],[1,"search-advanced-overlay-actions"],["mat-raised-button","","color","primary",3,"click"],["mat-stroked-button","",3,"click"],[3,"removed"],["matChipRemove",""]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),t._uU(4,"Search"),t.qZA(),t._UZ(5,"input",3),t.YNc(6,lt,3,0,"button",4),t.TgZ(7,"button",5,6),t.NdJ("click",function(){return o.toggleAdvancedSearchOpen()}),t._UZ(9,"mat-icon",7),t.ALo(10,"async"),t.qZA()()(),t.TgZ(11,"div",8)(12,"div",9)(13,"mat-icon",10),t.NdJ("click",function(){return o.updateViewType(o.viewTypeModel.standard)}),t.ALo(14,"async"),t.qZA(),t.TgZ(15,"mat-icon",11),t.NdJ("click",function(){return o.updateViewType(o.viewTypeModel.expansion)}),t.ALo(16,"async"),t.qZA()(),t.YNc(17,pt,2,1,"div",12),t.ALo(18,"async"),t.TgZ(19,"mat-form-field",13)(20,"mat-label"),t._uU(21,"Sort"),t.qZA(),t.TgZ(22,"mat-select",14),t.YNc(23,mt,2,2,"mat-option",15),t.qZA()()(),t.TgZ(24,"div",16)(25,"cdk-virtual-scroll-viewport",17),t.YNc(26,ht,3,3,"ng-container",12),t.ALo(27,"async"),t.YNc(28,dt,2,1,"ng-container",12),t.ALo(29,"async"),t.qZA()()(),t.YNc(30,Ct,30,19,"ng-template",18),t.NdJ("backdropClick",function(){return o.toggleAdvancedSearchOpen()})),2&e){const c=t.MAs(8);t.xp6(2),t.Udp("font-size",14,"px"),t.Q6J("formGroup",o.searchForm),t.xp6(4),t.Q6J("ngIf",o.searchForm.controls.searchInputForm.value),t.xp6(3),t.Q6J("ngClass",t.VKq(30,yt,t.lcZ(10,18,o.hasAdvancedOptions$))),t.xp6(4),t.Q6J("ngClass",t.VKq(32,F,t.lcZ(14,20,o.viewType$)===o.viewTypeModel.standard)),t.xp6(2),t.Q6J("ngClass",t.VKq(34,F,t.lcZ(16,22,o.viewType$)===o.viewTypeModel.expansion)),t.xp6(2),t.Q6J("ngIf",t.lcZ(18,24,o.documents$)),t.xp6(2),t.Udp("font-size",14,"px"),t.Q6J("formGroup",o.searchForm),t.xp6(4),t.Q6J("ngForOf",o.sortByOptions),t.xp6(3),t.Q6J("ngIf",t.lcZ(27,26,o.viewType$)===o.viewTypeModel.standard),t.xp6(2),t.Q6J("ngIf",t.lcZ(29,28,o.viewType$)===o.viewTypeModel.expansion),t.xp6(2),t.Q6J("cdkConnectedOverlayOrigin",c)("cdkConnectedOverlayOpen",o.isAdvancedSearchOpen)("cdkConnectedOverlayHasBackdrop",!0)("cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop")}},dependencies:[h.mk,h.sg,h.O5,i.Fj,i.JJ,i.JL,i.sg,i.u,_.XC,_.ZL,et.ey,nt.lW,g.qn,g.HS,g.oH,g.qH,v.KE,v.hX,v.R9,ot.Hw,at.Nt,ct.gD,A.pI,A.xu,Z.xd,Z.N7,rt.d,st.r,h.Ov],styles:[".mat-form-field-suffix{top:0px!important}.search-advanced-overlay[_ngcontent-%COMP%]{width:80vw;height:30vh;border:solid 1px #ccc;border-radius:5px;background:#fff;text-align:center;padding:10px;margin:0;overflow:auto;display:grid;grid-template-columns:100%;grid-template-rows:1fr 1fr 1fr 1fr;justify-items:center;align-items:center}.search-advanced-overlay[_ngcontent-%COMP%]   .autocomplete-input[_ngcontent-%COMP%]{width:80%;line-height:1.4em}.search-advanced-overlay[_ngcontent-%COMP%]   .autocomplete-label[_ngcontent-%COMP%]{vertical-align:text-top}.search-advanced-overlay[_ngcontent-%COMP%]   .search-advanced-overlay-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:120px 120px;column-gap:10px;justify-content:center}.search-grid[_ngcontent-%COMP%]{display:grid;height:calc(100vh - 105px);grid-template-columns:100%;grid-template-rows:minmax(50px,auto) minmax(50px,auto) calc(100vh - 280px);align-content:start}.search-grid[_ngcontent-%COMP%]   .search-form-container[_ngcontent-%COMP%]{display:grid;place-items:center;grid-template-columns:100%}.search-grid[_ngcontent-%COMP%]   .search-form-container[_ngcontent-%COMP%]   .search-input-form[_ngcontent-%COMP%]{width:80%;line-height:1em}.search-grid[_ngcontent-%COMP%]   .search-form-container[_ngcontent-%COMP%]   .search-input-form[_ngcontent-%COMP%]   .has-advanced-options[_ngcontent-%COMP%]{color:#f50057}.search-grid[_ngcontent-%COMP%]   .search-options-container[_ngcontent-%COMP%]{display:grid;border-top:2px ridge whitesmoke;padding:8px 2px 0;grid-template-columns:1fr 1fr 1fr;align-items:baseline;justify-content:space-around}.search-grid[_ngcontent-%COMP%]   .search-options-container[_ngcontent-%COMP%]   .search-options-list-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:30px 30px;column-gap:10px;justify-content:start;color:#616161}.search-grid[_ngcontent-%COMP%]   .search-options-container[_ngcontent-%COMP%]   .search-options-list-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{padding:4px}.search-grid[_ngcontent-%COMP%]   .search-options-container[_ngcontent-%COMP%]   .search-options-list-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]:hover{cursor:pointer;background:rgba(0,0,0,.04)}.search-grid[_ngcontent-%COMP%]   .search-options-container[_ngcontent-%COMP%]   .search-options-list-container[_ngcontent-%COMP%]   .active-view-type[_ngcontent-%COMP%]{border:1px solid #9e9e9e}.search-grid[_ngcontent-%COMP%]   .search-options-container[_ngcontent-%COMP%]   .search-options-sort-form[_ngcontent-%COMP%]{width:250px;justify-self:end}.search-grid[_ngcontent-%COMP%]   .search-result-container[_ngcontent-%COMP%]{display:grid;height:100%;padding:8px 2px;align-self:center}.search-grid[_ngcontent-%COMP%]   .search-result-vscroll[_ngcontent-%COMP%]{height:100%}"],changeDetection:0}),n})(),title:"Search"}];let Tt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[h.ez,i.UX,I.q,J.m,P.Bz.forChild(Ot)]}),n})()}}]);