["{\"docRef\":\"angular\\\/angular_create_v17_project\",\"content\":\"{\\\"title\\\":\\\"Angular v17のapplicationを開発する(準備作業)\\\",\\\"date\\\":\\\"2023-11-11\\\",\\\"category\\\":\\\"Angular\\\",\\\"tag\\\":[\\\"angular\\\",\\\"version up\\\"],\\\"body\\\":\\\"2023\\\\\\\/11\\\\\\\/8に[angular v17のリリース](https:\\\\\\\/\\\\\\\/blog.angular.io\\\\\\\/introducing-angular-v17-4d7033312e4b)がアナウンスされました。v15以降にどんどん導入されている新機能を一つひとつ試していきたいので、v17でブログappをイチから作成してみようと思います。\\\\n\\\\n以下の順番で確認していく予定です。\\\\n\\\\n- angular v17のapp作成と動作確認 **<- 今回はココ**\\\\n- angular v17のlibraryを作成し、ブログページ用のcomponentをappから利用できるようにする\\\\n- 状態管理をngrxからsignalに変更する\\\\n- .NET 8の新しいSPAテンプレートでangular v17を利用する\\\\n- angularのprerenderingを試す\\\\n\\\\n## 環境準備\\\\n\\\\nまず初めに、angular cliをv17に更新します。\\\\n\\\\n``` powershell\\\\n> npm update @angular\\\\\\\/cli -g\\\\nadded 19 packages, removed 35 packages, changed 209 packages, and audited 230 packages in 23s\\\\n\\\\nfound 0 vulnerabilities\\\\nnpm notice\\\\nnpm notice New major version of npm available! 8.5.5 -> 10.2.3\\\\nnpm notice Changelog: https:\\\\\\\/\\\\\\\/github.com\\\\\\\/npm\\\\\\\/cli\\\\\\\/releases\\\\\\\/tag\\\\\\\/v10.2.3\\\\nnpm notice Run npm install -g npm@10.2.3 to update!\\\\nnpm notice\\\\n\\\\n> ng version\\\\nNode.js version v16.15.0 detected.\\\\nThe Angular CLI requires a minimum Node.js version of v18.13.\\\\n\\\\nPlease update your Node.js version or visit https:\\\\\\\/\\\\\\\/nodejs.org\\\\\\\/ for additional instructions.\\\\n```\\\\n\\\\nアップデート自体は正常に完了したようですが、バージョン確認をしようとしたら、Nodejsのバージョンが古いと言われてしまいました。\\\\n\\\\n``` powershell\\\\n> nvm list\\\\n\\\\n    18.12.1\\\\n  * 16.15.0 (Currently using 64-bit executable)\\\\n    12.22.12\\\\n```\\\\n\\\\n以前[Angular v14からv15へのアップデート](doc\\\\\\\/angular\\\\\\\/angular-update-from-14-to-15#node-version)<!--rehype:class=internal-link-->を実行した際に、VisualStudio 2022(esproj?)の謎のissueに引っかかりNodejsをv18に上げられない問題がありました。本件に関する[stack overflow投稿](https:\\\\\\\/\\\\\\\/stackoverflow.com\\\\\\\/questions\\\\\\\/73005681\\\\\\\/visual-studio-blocks-on-deploying-a-standalone-angular-project)によるとVS2022 version 17.6で問題解決していたようです。\\\\n\\\\nなのでNodejsも今日時点のLTS(20.9.0)に更新して作業を進めます。\\\\n\\\\n``` powershell\\\\n> nvm install lts\\\\nDownloading node.js version 20.9.0 (64-bit)...\\\\nExtracting node and npm...\\\\nComplete\\\\nnpm v10.1.0 installed successfully.\\\\n\\\\n\\\\nInstallation complete. If you want to use this version, type\\\\n\\\\n> nvm use 20.9.0\\\\nNow using node v20.9.0 (64-bit)\\\\n\\\\n> nvm list\\\\n\\\\n  * 20.9.0 (Currently using 64-bit executable)\\\\n    18.12.1\\\\n    16.15.0\\\\n    12.22.12\\\\n```\\\\n\\\\nNodejsおよびnpmが切り替わったので、angular cliも入れ直しです。cacheフォルダーの開発ドライブへの変更も、[前回の記事](doc\\\\\\\/env\\\\\\\/win11_dev_drive)<!--rehype:class=internal-link-->を参考にして設定し直す必要がありました。\\\\n\\\\n``` powershell\\\\n> npm install -g yarn\\\\n\\\\nadded 1 package in 1s\\\\n\\\\n> npm install @angular\\\\\\\/cli -g\\\\n\\\\nadded 228 packages in 38s\\\\nnpm notice\\\\nnpm notice New minor version of npm available! 10.1.0 -> 10.2.3\\\\nnpm notice Changelog: https:\\\\\\\/\\\\\\\/github.com\\\\\\\/npm\\\\\\\/cli\\\\\\\/releases\\\\\\\/tag\\\\\\\/v10.2.3\\\\nnpm notice Run npm install -g npm@10.2.3 to update!\\\\nnpm notice\\\\n\\\\n> ng version\\\\n\\\\n     _                      _                 ____ _     ___\\\\n    \\\\\\\/ \\\\\\\\   _ __   __ _ _   _| | __ _ _ __     \\\\\\\/ ___| |   |_ _|\\\\n   \\\\\\\/ △ \\\\\\\\ | '_ \\\\\\\\ \\\\\\\/ _` | | | | |\\\\\\\/ _` | '__|   | |   | |    | |\\\\n  \\\\\\\/ ___ \\\\\\\\| | | | (_| | |_| | | (_| | |      | |___| |___ | |\\\\n \\\\\\\/_\\\\\\\/   \\\\\\\\_\\\\\\\\_| |_|\\\\\\\\__, |\\\\\\\\__,_|_|\\\\\\\\__,_|_|       \\\\\\\\____|_____|___|\\\\n                |___\\\\\\\/\\\\n\\\\n\\\\nAngular CLI: 17.0.0\\\\nNode: 20.9.0\\\\nPackage Manager: yarn 1.22.19\\\\nOS: win32 x64\\\\n\\\\nAngular:\\\\n...\\\\n\\\\nPackage                      Version\\\\n------------------------------------------------------\\\\n@angular-devkit\\\\\\\/architect    0.1700.0 (cli-only)\\\\n@angular-devkit\\\\\\\/core         17.0.0 (cli-only)\\\\n@angular-devkit\\\\\\\/schematics   17.0.0 (cli-only)\\\\n@schematics\\\\\\\/angular          17.0.0 (cli-only)\\\\n```\\\\n\\\\n## angular appの作成\\\\n\\\\nappの新規作成では、cssスタイルとSSR\\\\\\\/SSGの利用について確認がありました。SSGの動作確認は今回はNoを選択し、また後で確認することにします。\\\\n\\\\n``` powershell\\\\n> ng new angularv17-test-client\\\\n? Which stylesheet format would you like to use? SCSS   [ https:\\\\\\\/\\\\\\\/sass-lang.com\\\\\\\/documentation\\\\\\\/syntax#scss ]\\\\n? Do you want to enable Server-Side Rendering (SSR) and Static Site Generation (SSG\\\\\\\/Prerendering)? No\\\\nCREATE angularv17-test-client\\\\\\\/angular.json (2846 bytes)\\\\nCREATE angularv17-test-client\\\\\\\/package.json (1053 bytes)\\\\nCREATE angularv17-test-client\\\\\\\/README.md (1074 bytes)\\\\nCREATE angularv17-test-client\\\\\\\/tsconfig.json (909 bytes)\\\\nCREATE angularv17-test-client\\\\\\\/.editorconfig (274 bytes)\\\\nCREATE angularv17-test-client\\\\\\\/.gitignore (548 bytes)\\\\nCREATE angularv17-test-client\\\\\\\/tsconfig.app.json (263 bytes)\\\\nCREATE angularv17-test-client\\\\\\\/tsconfig.spec.json (273 bytes)\\\\nCREATE angularv17-test-client\\\\\\\/.vscode\\\\\\\/extensions.json (130 bytes)\\\\nCREATE angularv17-test-client\\\\\\\/.vscode\\\\\\\/launch.json (470 bytes)\\\\nCREATE angularv17-test-client\\\\\\\/.vscode\\\\\\\/tasks.json (938 bytes)\\\\nCREATE angularv17-test-client\\\\\\\/src\\\\\\\/main.ts (250 bytes)\\\\nCREATE angularv17-test-client\\\\\\\/src\\\\\\\/favicon.ico (15086 bytes)\\\\nCREATE angularv17-test-client\\\\\\\/src\\\\\\\/index.html (306 bytes)\\\\nCREATE angularv17-test-client\\\\\\\/src\\\\\\\/styles.scss (80 bytes)\\\\nCREATE angularv17-test-client\\\\\\\/src\\\\\\\/app\\\\\\\/app.component.html (20887 bytes)\\\\nCREATE angularv17-test-client\\\\\\\/src\\\\\\\/app\\\\\\\/app.component.spec.ts (964 bytes)\\\\nCREATE angularv17-test-client\\\\\\\/src\\\\\\\/app\\\\\\\/app.component.ts (384 bytes)\\\\nCREATE angularv17-test-client\\\\\\\/src\\\\\\\/app\\\\\\\/app.component.scss (0 bytes)\\\\nCREATE angularv17-test-client\\\\\\\/src\\\\\\\/app\\\\\\\/app.config.ts (227 bytes)\\\\nCREATE angularv17-test-client\\\\\\\/src\\\\\\\/app\\\\\\\/app.routes.ts (77 bytes)\\\\nCREATE angularv17-test-client\\\\\\\/src\\\\\\\/assets\\\\\\\/.gitkeep (0 bytes)\\\\n✔ Packages installed successfully.\\\\nhint: Using 'master' as the name for the initial branch. This default branch name\\\\nhint: is subject to change. To configure the initial branch name to use in all\\\\nhint: of your new repositories, which will suppress this warning, call:\\\\nhint:\\\\nhint:   git config --global init.defaultBranch <name>\\\\nhint:\\\\nhint: Names commonly chosen instead of 'master' are 'main', 'trunk' and\\\\nhint: 'development'. The just-created branch can be renamed via this command:\\\\nhint:\\\\nhint:   git branch -m <name>\\\\nwarning: in the working copy of '.editorconfig', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of '.gitignore', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of '.vscode\\\\\\\/extensions.json', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of '.vscode\\\\\\\/launch.json', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of '.vscode\\\\\\\/tasks.json', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'README.md', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'angular.json', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'package.json', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'src\\\\\\\/app\\\\\\\/app.component.html', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'src\\\\\\\/app\\\\\\\/app.component.spec.ts', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'src\\\\\\\/app\\\\\\\/app.component.ts', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'src\\\\\\\/app\\\\\\\/app.config.ts', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'src\\\\\\\/app\\\\\\\/app.routes.ts', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'src\\\\\\\/index.html', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'src\\\\\\\/main.ts', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'src\\\\\\\/styles.scss', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'tsconfig.app.json', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'tsconfig.json', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'tsconfig.spec.json', LF will be replaced by CRLF the next time Git touches it\\\\n    Successfully initialized git.\\\\n```\\\\n\\\\nパッと気が付いたところで、公式アナウンスの通りangularのfaviconが新しくなっていました。またangular.jsonのbuilderに`@angular-devkit\\\\\\\/build-angular:application`が設定されるようになっていました。\\\\n\\\\nデフォルトのbuild systemがviteになっているためか、実行は爆速です。\\\\n\\\\n``` powershell\\\\n> yarn\\\\nyarn install v1.22.19\\\\n[1\\\\\\\/4] Resolving packages...\\\\nsuccess Already up-to-date.\\\\nDone in 0.18s.\\\\n\\\\n> yarn start\\\\nyarn run v1.22.19\\\\n$ ng serve\\\\n\\\\nInitial Chunk Files | Names         |  Raw Size\\\\npolyfills.js        | polyfills     |  82.71 kB |\\\\nmain.js             | main          |  23.39 kB |\\\\nstyles.css          | styles        |  96 bytes |\\\\n\\\\n                    | Initial Total | 106.19 kB\\\\n\\\\nApplication bundle generation complete. [2.359 seconds]\\\\nWatch mode enabled. Watching for file changes...\\\\n  ➜  Local:   http:\\\\\\\/\\\\\\\/localhost:4200\\\\\\\/\\\\n```\\\\n\\\\nアプリケーションのhomeもシンプルに一新されていました。\\\\n<img src=\\\\\\\"assets\\\\\\\/images\\\\\\\/angular_create_v17_project\\\\\\\/angular_create_v17_project_1.png\\\\\\\" alt=\\\\\\\"new home\\\\\\\" title=\\\\\\\"new home\\\\\\\">\\\"}\"}","{\"docRef\":\"angular\\\/angular-blog-engine-frontend-reduce-bundle-size\",\"content\":\"{\\\"title\\\":\\\"Angularで作成したmarkdownブログサイトのbundleサイズを削減する\\\",\\\"date\\\":\\\"2022-10-02\\\",\\\"category\\\":\\\"Angular\\\",\\\"tag\\\":[\\\"angular\\\",\\\"javascript\\\",\\\"source-map-explorer\\\"],\\\"body\\\":\\\"\\\\n\\\\nAngularでmarkdownデータを表示するブログサイトのようなものを作成しました。ドラフト版が完成しリリースビルドを生成したところ約2MBのサイズになり、生成処理中にサイズが大きいと怒られてしまいます。\\\\n\\\\nリリースモジュールのbundle内訳を確認し、削減する方法を考えます。\\\\n\\\\n## リリースbundleを分析する\\\\n\\\\n生成したリリースbundleを分析するツールとしては`webpack-bundle-analyzer`が有名で、以前作成した旧バージョンのmarkdownブログサイトもこのツールで分析しました。ですが、Angularのbuildプロセスでは独自の最適化が施されており、`webpack-bundle-analyzer`では正しい分析ができなくなっているとのこと。\\\\n\\\\nAngularチームではbundleの分析に[source-map-explorer](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/danvk\\\\\\\/source-map-explorer)の使用を推奨しているようなので、今回はこの`source-map-explorer`ツールを使って分析してみます。\\\\n\\\\n### 分析手順\\\\n\\\\nsource-map-explorerをdev dependencyに追加します。\\\\n\\\\n``` powershell\\\\n> yarn add --dev source-map-explorer\\\\n```\\\\n\\\\n次に`ng build`コマンドでリリースビルドを作成します。Angular 14では`prod`オプションはデフォルトでtrueのため指定は不要です。ですがsource mapの生成が必要だったため、`--source-map`オプションを指定しています。\\\\n\\\\n``` powershell\\\\n>　yarn ng build --source-map\\\\n```\\\\n\\\\n最後にpackage.jsonにsource-map-explorerコマンドを追加し、実行します。注意点として`dist\\\\\\\/{project name}\\\\\\\/main.*.js`のアスタリスクの部分はbuild毎に異なるので、実行する都度書き換えないといけません。\\\\n\\\\n``` json\\\\n\\\\\\\"scripts\\\\\\\": {\\\\n    \\\\\\\"ng\\\\\\\": \\\\\\\"ng\\\\\\\",\\\\n    \\\\\\\"start\\\\\\\": \\\\\\\"ng serve --ssl --ssl-cert %APPDATA%\\\\\\\\\\\\\\\\ASP.NET\\\\\\\\\\\\\\\\https\\\\\\\\\\\\\\\\%npm_package_name%.pem --ssl-key %APPDATA%\\\\\\\\\\\\\\\\ASP.NET\\\\\\\\\\\\\\\\https\\\\\\\\\\\\\\\\%npm_package_name%.key\\\\\\\",\\\\n    \\\\\\\"build\\\\\\\": \\\\\\\"ng build\\\\\\\",\\\\n    \\\\\\\"watch\\\\\\\": \\\\\\\"ng build --watch --configuration development\\\\\\\",\\\\n    \\\\\\\"test\\\\\\\": \\\\\\\"ng test\\\\\\\",\\\\n    \\\\\\\"prestart\\\\\\\": \\\\\\\"node aspnetcore-https\\\\\\\",\\\\n    \\\\\\\"lint\\\\\\\": \\\\\\\"ng lint\\\\\\\",\\\\n    \\\\\\\"deploy\\\\\\\": \\\\\\\"ng deploy\\\\\\\",\\\\n    \\\\\\\"source-map-explorer\\\\\\\": \\\\\\\"source-map-explorer .\\\\\\\/dist\\\\\\\/net6-markdown-web-engine\\\\\\\/main.e156c1b9a1485b3e.js\\\\\\\"\\\\n  },\\\\n```\\\\n\\\\n``` powershell\\\\n> yarn run source-map-explorer\\\\n```\\\\n\\\\n処理が正常に進むとブラウザが起動し、バンドル内で各モジュールが占める内訳の詳細が表示されました。\\\\n\\\\n<img src=\\\\\\\"assets\\\\\\\/images\\\\\\\/angular-blog-engine-frontend-reduce-bundle-size\\\\\\\/angular-blog-engine-frontend-reduce-bundle-size_1.png\\\\\\\" alt=\\\\\\\"bundle analysis\\\\\\\" title=\\\\\\\"bundle analysis\\\\\\\">\\\\n\\\\nこの中で気になったのは33.8%(576.31KB)を占めるrefactorと1.7%(28.52KB)を占めるlunr\\\\\\\/lunr.jsでした。\\\\n\\\\n## rehype-prism-plusで利用するファイルフォーマットを限定する\\\\n\\\\n[refactor](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/wooorm\\\\\\\/refractor)モジュールは[rehype-prism-plus](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/timlrx\\\\\\\/rehype-prism-plus)で利用されているcode highlightingのコアモジュールです。\\\\n\\\\nangular側で`import rehypePrismPlus from 'rehype-prism-plus';`のように`rehype-prism-plus`を参照するとrefactorが参照するすべての言語定義が読み込まれます。そのため非常に巨大なbundleになっていました。当然すべての言語定義は必要ないので、利用している分だけを登録するように変更します。\\\\n\\\\n[公式readme](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/timlrx\\\\\\\/rehype-prism-plus#generating)を参考に、既存の記事で使用した9言語のみを読み込むように書き換えました。\\\\n\\\\n``` ts\\\\nrefractor.register(csharp);\\\\nrefractor.register(css);\\\\nrefractor.register(diff);\\\\nrefractor.register(markup);\\\\nrefractor.register(javascript);\\\\nrefractor.register(json);\\\\nrefractor.register(powershell);\\\\nrefractor.register(typescript);\\\\nrefractor.register(yaml);\\\\nconst myPrismPlugin = rehypePrismGenerator(refractor);\\\\n\\\\nconst processor = unified()\\\\n  .use(remarkParse)\\\\n  .use(remarkRehype, { allowDangerousHtml: true })\\\\n  .use(rehypeRaw)\\\\n  .use(rehypeSlug)\\\\n  .use(rehypeAutolinkHeadings)\\\\n  .use(rehypeExternalLinks, { target: '_blank', rel: ['noopener'] })\\\\n  .use(rehypeAttrs, { properties: 'attr' })\\\\n  .use(myPrismPlugin, { showLineNumbers: true })\\\\n  .use(rehypeStringify);\\\\nconst html = String(processor.processSync(document.content.body));\\\\n```\\\\n\\\\n結果は576.31KB -> 27.68KBの大幅削減になりました。\\\\n\\\\n<img src=\\\\\\\"assets\\\\\\\/images\\\\\\\/angular-blog-engine-frontend-reduce-bundle-size\\\\\\\/angular-blog-engine-frontend-reduce-bundle-size_2.png\\\\\\\" alt=\\\\\\\"bundle analysis\\\\\\\" title=\\\\\\\"bundle analysis\\\\\\\">\\\\n\\\\n## 検索機能を簡易にする\\\\n\\\\n登録している記事の検索については、今回の実装時にclient側での全文検索に取り組みました。日本語にも対応した全文検索のライブラリ [Lunr.js](https:\\\\\\\/\\\\\\\/lunrjs.com\\\\\\\/)をangularで利用する方法について試行錯誤しながら実装を行いました。\\\\n\\\\nLunr.jsのtypescript対応が不十分なため、Angularコードから利用するのは単純ではありませんでした。\\\\n\\\\n公式のLunr languageライブラリにある[Lunr.ja.js](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/MihaiValentin\\\\\\\/lunr-languages\\\\\\\/blob\\\\\\\/master\\\\\\\/lunr.ja.js)は、内部で使用している[tinysegmenter](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/SamuraiT\\\\\\\/tinysegmenter)の依存がtypescriptのimport構文では解決できませんでした。\\\\n\\\\nなので、tinysegmenterの実装を直接埋め込んだカスタムのLunr.ja.jsを作成して、それをimportすることで無理やり利用させていました。\\\\n\\\\n``` ts\\\\n\\\\\\\/\\\\\\\/ markdown-document.reducer.ts\\\\n\\\\n\\\\\\\/\\\\\\\/ create type JPlunr to use \\\\\\\"ja\\\\\\\" language feature\\\\ntype Ilunr = (config: lunr.ConfigFunction) => lunr.Index;\\\\ntype JPlunr = Ilunr & {\\\\n  ja: any;\\\\n};\\\\n\\\\n\\\\\\\/\\\\\\\/ Setup Japanese support for lunr\\\\nja(lunr);\\\\n\\\\nexport const lunrIndex = lunr((builder) => {\\\\n  builder.use((lunr as unknown as JPlunr).ja);\\\\n  builder.field('title', { extractor: (doc: {}) => (doc as DocumentRef).content.title });\\\\n  builder.field('category', { extractor: (doc: {}) => (doc as DocumentRef).content.category });\\\\n  builder.field('body', { extractor: (doc: {}) => (doc as DocumentRef).content.body });\\\\n  builder.ref('docRef');\\\\n\\\\n  documents.forEach((doc) => {\\\\n    builder.add(doc);\\\\n  });\\\\n});\\\\n```\\\\n\\\\n色々頑張って実装した割には、日本語と英語が混ざった検索などは思ったような結果が返ってきませんでした。。。ちょっとした文章管理で使う分には全文検索にこだわらず、`includes`や`indexOf`による検索でも十分なのかもしれません。\\\\n\\\\nということで、色々頑張ってみましたがLunr.jsの実装は全部削除して、javascriptの単純な文字列検索に切り替えます。googleでの検索では、結局`indexOf`が一番有名でパフォーマンスも安定しているようなので、これを採用することにしました。\\\\n\\\\nLunrを削除した結果はTotal1.13MB -> 1.07MBで、ほんの少しですが削減できました。\\\\n\\\\n<img src=\\\\\\\"assets\\\\\\\/images\\\\\\\/angular-blog-engine-frontend-reduce-bundle-size\\\\\\\/angular-blog-engine-frontend-reduce-bundle-size_3.png\\\\\\\" alt=\\\\\\\"bundle analysis\\\\\\\" title=\\\\\\\"bundle analysis\\\\\\\">\\\\n\\\\n## 関連項目\\\\n\\\\n- [Angular CLI output - how to analyze bundle files | stack overflow](https:\\\\\\\/\\\\\\\/stackoverflow.com\\\\\\\/questions\\\\\\\/46567781\\\\\\\/angular-cli-output-how-to-analyze-bundle-files)\\\\n- [Analyzing Angular bundle with Source Map Explorer](https:\\\\\\\/\\\\\\\/dev.to\\\\\\\/salimchemes\\\\\\\/analyzing-angular-bundle-with-source-map-explorer-341)\\\\n- [Supported languages - Prism](https:\\\\\\\/\\\\\\\/prismjs.com\\\\\\\/#languages-list)\\\\n- [TypeScriptで全文検索を実行する – lunr編](https:\\\\\\\/\\\\\\\/wp-kyoto.net\\\\\\\/lunr-search-by-typescript\\\\\\\/#lunr-launguages%E3%81%8CTypeScript%E9%9D%9E%E5%AF%BE%E5%BF%9C%E3%81%AA%E3%81%AE%E3%81%A7%E5%8A%9B%E6%8A%80%E3%82%92%E4%BD%BF%E3%81%86)\\\\n- [Top 6 ways to search for a string in JavaScript — And performance benchmarks](https:\\\\\\\/\\\\\\\/koukia.ca\\\\\\\/top-6-ways-to-search-for-a-string-in-javascript-and-performance-benchmarks-ce3e9b81ad31)\\\\n\\\"}\"}","{\"docRef\":\"angular\\\/angular-embed-html-tag\",\"content\":\"{\\\"title\\\":\\\"Angularで動的にHTMLタグをコンポーネントに埋め込む\\\",\\\"date\\\":\\\"2019-11-14\\\",\\\"category\\\":\\\"Angular\\\",\\\"tag\\\":[\\\"angular\\\",\\\"html\\\",\\\"embed\\\"],\\\"body\\\":\\\"\\\\n\\\\nAngularでは、データバインドを利用したテキストの埋め込み時にセキュリティ上の考慮がなされています。具体的には、scriptやhtmlは自動的にエスケープ処理され、原則的にはhtmlタグを埋め込めないようになっています。\\\\n\\\\nAngularで、markdownから生成したhtmlをタグとして画面に挿入する方法を調査しました。\\\\n\\\\n## 注意点\\\\n\\\\n開発者は、**有害なhtmlデータ**がこれらの処理を通してユーザに送信されないよう、十分に考慮する必要があります。\\\\n\\\\n## SafeHtml型のhtmlデータを[innerHTML]にバインドする\\\\n\\\\n実装例を以下に示します。\\\\n\\\\n**MarkdownService**\\\\n\\\\n```ts\\\\nexport class MarkdownService {\\\\n  constructor(\\\\n    private http: HttpClient,\\\\n    private sanitizer: DomSanitizer,\\\\n    @Inject(\\\\\\\"BASE_URL\\\\\\\") private baseUrl: string,\\\\n  ) {}\\\\n\\\\n  getDocument(path: string): Observable<DocumentInfo> {\\\\n    let docInfo: DocumentInfo;\\\\n    const processor = unified()\\\\n      .use(markdown, { commonmark: true })\\\\n      .use(remarkAttr)\\\\n      .use(remarkRehype, { allowDangerousHTML: true })\\\\n      .use(raw)\\\\n      .use(slug)\\\\n      .use(autoLinkHeadings)\\\\n      .use(highlight)\\\\n      .use(html);\\\\n\\\\n    return this.http.get<DocumentInfo>(this.baseUrl + path).pipe(\\\\n      map(result => {\\\\n        \\\\\\\/\\\\\\\/ this.baseUrl + pathにアクセスすると、docInfo型のデータがjsonで取得できる。それをそのまま代入。\\\\n        docInfo = result;\\\\n\\\\n        \\\\\\\/\\\\\\\/ set default toc\\\\n        if (!docInfo.toc) {\\\\n          docInfo.toc = \\\\\\\"h2,h3\\\\\\\";\\\\n        }\\\\n\\\\n        \\\\\\\/\\\\\\\/ docInfo.bodyはmarkdown形式のデータ。processor.processSync処理でhtmlに変換される\\\\n        docInfo.bodyHtml = processor.processSync(docInfo.body).contents;\\\\n\\\\n        \\\\\\\/\\\\\\\/ bypassSecurityTrustHtmlはhtmlデータをSafeHTMLという特別な型に変換する\\\\n        docInfo.safeBody = this.sanitizer.bypassSecurityTrustHtml(docInfo.bodyHtml);\\\\n        return docInfo;\\\\n      }),\\\\n    );\\\\n  }\\\\n  ...\\\\n}\\\\n```\\\\n\\\\n**document.component.html(抜粋)**\\\\n\\\\n```html\\\\n<div fxFlex class=\\\\\\\"doc-body\\\\\\\" [innerHTML]=\\\\\\\"docInfo?.bodyHtml\\\\\\\" appRouteTransformer>\\\\n```\\\\n\\\\nまたは\\\\n\\\\n```html\\\\n<div fxFlex class=\\\\\\\"doc-body\\\\\\\" [innerHTML]=\\\\\\\"docInfo?.safeBody\\\\\\\" appRouteTransformer>\\\\n```\\\\n\\\\n通常のhtmlデータ(docInfo.bodyHtml)をinnerHTMLにバインドした場合、idやスタイルなどの属性は自動的に取り除かれてしまいます。またブラウザのコンソール上に**安全でないhtmlデータがバインドされた**という警告が表示されます。\\\\n\\\\nDomSanitizer.bypassSecurityTrustHtmlを利用すると、htmlデータはSafeHTML型に変換され、Angularはこのデータを無害なhtmlデータとして取り扱います。つまりすべてそのままの状態でバインドされます。\\\\n\\\\n## ElementRef.nativeElementにバインドする\\\\n\\\\n実装例を以下に示します。\\\\n\\\\n**document.component.html(抜粋)**\\\\n\\\\n```html\\\\n<div fxLayout=\\\\\\\"column\\\\\\\" class=\\\\\\\"doc-container\\\\\\\" [@openClose]=\\\\\\\"isOpen ? 'open' : 'closed'\\\\\\\">\\\\n  <!-- <p *ngIf=\\\\\\\"!docInfo\\\\\\\">loading...<\\\\\\\/p> -->\\\\n  <ng-container *ngIf=\\\\\\\"docInfo && docInfo?.toc === 'none'\\\\\\\">\\\\n    ...\\\\n  <\\\\\\\/ng-container>\\\\n  <ng-container *ngIf=\\\\\\\"docInfo && docInfo?.toc !== 'none'\\\\\\\">\\\\n    <div fxLayout=\\\\\\\"row\\\\\\\">\\\\n      <div fxFlex=\\\\\\\"1 1 85%\\\\\\\" fxFlex.lt-md=\\\\\\\"1 1 100%\\\\\\\">\\\\n        <div fxLayout=\\\\\\\"column\\\\\\\">\\\\n          ...\\\\n          <!-- <div fxFlex class=\\\\\\\"doc-body\\\\\\\" [innerHTML]=\\\\\\\"docInfo?.safeBody\\\\\\\" appRouteTransformer><\\\\\\\/div> -->\\\\n          <div #mdContent fxFlex class=\\\\\\\"doc-body\\\\\\\" appRouteTransformer><\\\\\\\/div>\\\\n        <\\\\\\\/div>\\\\n      <\\\\\\\/div>\\\\n      <div fxFlex=\\\\\\\"1 1 15%\\\\\\\" fxHide.lt-md>\\\\n        <app-document-toc [tocList]=\\\\\\\"tocList\\\\\\\" appRouteTransformer><\\\\\\\/app-document-toc>\\\\n      <\\\\\\\/div>\\\\n    <\\\\\\\/div>\\\\n  <\\\\\\\/ng-container>\\\\n<\\\\\\\/div>\\\\n```\\\\n\\\\n**document.component.ts**\\\\n\\\\n```ts\\\\nimport {\\\\n  AfterViewInit,\\\\n  ChangeDetectorRef,\\\\n  Component,\\\\n  ElementRef,\\\\n  OnDestroy,\\\\n  OnInit,\\\\n  ViewChild,\\\\n} from '@angular\\\\\\\/core';\\\\n\\\\n@Component({\\\\n  selector: \\\\\\\"app-document\\\\\\\",\\\\n  templateUrl: \\\\\\\".\\\\\\\/document.component.html\\\\\\\",\\\\n  styleUrls: [\\\\\\\".\\\\\\\/document.component.scss\\\\\\\", \\\\\\\".\\\\\\\/vs2015.css\\\\\\\"],\\\\n  animations: [defaultRouteAnimation],\\\\n})\\\\nexport class DocumentComponent implements OnInit, OnDestroy, AfterViewInit {\\\\n  docInfo: DocumentInfo | null;\\\\n  isOpen: boolean = true;\\\\n  tocList: TocItem[] | null;\\\\n\\\\n  \\\\\\\/\\\\\\\/ template html中の<div #mdContent>を参照するオブジェクトを定義\\\\n  @ViewChild(\\\\\\\"mdContent\\\\\\\")\\\\n  mdRef: ElementRef<HTMLElement>;\\\\n\\\\n  private fragment: string;\\\\n  private previousPath: string;\\\\n  private onDestroy = new Subject();\\\\n  private routeChangeSubject = new Subject();\\\\n\\\\n  constructor(\\\\n    private markdownService: MarkdownService,\\\\n    private location: Location,\\\\n    private route: ActivatedRoute,\\\\n    private loadingBarService: LoadingBarService,\\\\n    private changeDetector: ChangeDetectorRef,\\\\n  ) {}\\\\n\\\\n  ngOnInit() {\\\\n    ...\\\\n    this.route.url.pipe(takeUntil(this.onDestroy)).subscribe(params => {\\\\n      const docRef = params.map(x => x.path).join(\\\\\\\"\\\\\\\/\\\\\\\");\\\\n      if (docRef !== this.previousPath) {\\\\n        this.docInfo = null;\\\\n        this.isOpen = false;\\\\n        this.getMarkdownDocInfo(docRef);\\\\n      } else {\\\\n        this.loadingBarService.hide();\\\\n      }\\\\n      this.previousPath = docRef;\\\\n    });\\\\n  }\\\\n  ...\\\\n  private getMarkdownDocInfo(docRef: string) {\\\\n    const path = this.location.normalize(\\\\\\\"assets\\\\\\\/json\\\\\\\/\\\\\\\" + docRef + \\\\\\\".json\\\\\\\");\\\\n\\\\n    this.markdownService\\\\n      .getDocument(path)\\\\n      .pipe(takeUntil(this.onDestroy))\\\\n      .subscribe(\\\\n        doc => {\\\\n          this.docInfo = doc;\\\\n\\\\n          \\\\\\\/\\\\\\\/ 初期画面は<ng-container *ngIf=\\\\\\\"docInfo>の条件設定により\\\\n          \\\\\\\/\\\\\\\/ #mdContentを持つelementがまだ画面にない。\\\\n          \\\\\\\/\\\\\\\/\\\\n          \\\\\\\/\\\\\\\/ this.docInfoをセットした後に、ChangeDetectorRef.detectChanges()することで\\\\n          \\\\\\\/\\\\\\\/ 仮想DOMの内容が更新され、<ng-container *ngIf=\\\\\\\"docInfo>内のelementに\\\\n          \\\\\\\/\\\\\\\/ アクセスすることができるようになる。\\\\n          this.changeDetector.detectChanges();\\\\n\\\\n          \\\\\\\/\\\\\\\/ mdRef(#mdContentを持つdiv)のnativeElementにアクセスすることで\\\\n          \\\\\\\/\\\\\\\/ JQueryやjavascriptで過去に行っていたような、htmlタグの操作が可能になる。\\\\n          this.mdRef.nativeElement.innerHTML = doc.bodyHtml;\\\\n        },\\\\n        err => console.error(\\\\\\\"MarkdownService\\\\\\\", err),\\\\n      );\\\\n  }\\\\n  ...\\\\n}\\\\n```\\\\n\\\\n`nativeElement`に対する処理はjavascriptで直接実施されるので、safeHTML型にする必要はなく、サニタイズを考慮せずにhtmlをそのままバインドできます（出来てしまいます）。\\\\n\\\\n## 関連項目\\\\n\\\\n- [セキュリティ - angular.jp](https:\\\\\\\/\\\\\\\/angular.jp\\\\\\\/guide\\\\\\\/security#bypass-security-apis)\\\\n- [ElementRef - angular.jp](https:\\\\\\\/\\\\\\\/angular.jp\\\\\\\/api\\\\\\\/core\\\\\\\/ElementRef)\\\\n- [\\\\\\\\[Angular\\\\\\\\]変数のバインドで、htmlタグを埋め込む](https:\\\\\\\/\\\\\\\/akamist.com\\\\\\\/blog\\\\\\\/archives\\\\\\\/2223)\\\\n- [AngularでビューにHTML文書を「バインド」するには？（Property Binding）](https:\\\\\\\/\\\\\\\/www.atmarkit.co.jp\\\\\\\/ait\\\\\\\/articles\\\\\\\/1702\\\\\\\/13\\\\\\\/news127.html)\\\\n\\\"}\"}","{\"docRef\":\"angular\\\/angular-esbuild-based-build-system\",\"content\":\"{\\\"title\\\":\\\"Angularでesbuild-based build systemを試す\\\",\\\"date\\\":\\\"2023-10-08\\\",\\\"category\\\":\\\"Angular\\\",\\\"tag\\\":[\\\"angular\\\",\\\"vite\\\"],\\\"body\\\":\\\"Angular v16からesbuild-based build systemがDeveloper previewになったので、our of Heroesをイチから作って試してみます。\\\\n\\\\n## 情報収集\\\\n\\\\nDeveloper previewに関する公式のアナウンスメントは[Angular v16 is here! | Angular Blog](https:\\\\\\\/\\\\\\\/blog.angular.io\\\\\\\/angular-v16-is-here-4d7a28ec680d)です。詳細なガイド:[Developer guides - esbuild-based Builds](https:\\\\\\\/\\\\\\\/angular.io\\\\\\\/guide\\\\\\\/esbuild)も作成されていました。\\\\n\\\\n以前見た記事ではstandalone component化が必須となっていたのですが、必要な設定は`angular.json`への変更だけということでした。\\\\n\\\\n``` json\\\\n...\\\\n\\\\\\\"architect\\\\\\\": {\\\\n  \\\\\\\"build\\\\\\\": {                     \\\\\\\/* Add the esbuild suffix  *\\\\\\\/\\\\n    \\\\\\\"builder\\\\\\\": \\\\\\\"@angular-devkit\\\\\\\/build-angular:browser-esbuild\\\\\\\",\\\\n...\\\\n```\\\\n\\\\n## Project作成\\\\n\\\\nまず初めにangular-cliのupdateを行って、Angular v16のprojectを作成できるようにします。この作業を忘れてAngular v15のprojectを作って確認してしまい、無駄な時間を使ってしまいました。。。v15では実行時警告が\\\\\\\"experimental\\\\\\\"だったのが、v16では\\\\\\\"developer preview\\\\\\\"に進化していました。\\\\n\\\\n``` powershell\\\\n> npm update @angular\\\\\\\/cli -g\\\\n\\\\n> npm list -g\\\\nC:\\\\\\\\Apps\\\\\\\\scoop\\\\\\\\apps\\\\\\\\nvm\\\\\\\\current\\\\\\\\nodejs\\\\\\\\nodejs -> .\\\\\\\\\\\\n+-- @angular\\\\\\\/cli@16.2.5\\\\n+-- corepack@0.10.0\\\\n+-- npm@8.5.5\\\\n`-- yarn@1.22.18\\\\n\\\\n> ng version\\\\n\\\\n     _                      _                 ____ _     ___\\\\n    \\\\\\\/ \\\\\\\\   _ __   __ _ _   _| | __ _ _ __     \\\\\\\/ ___| |   |_ _|\\\\n   \\\\\\\/ △ \\\\\\\\ | '_ \\\\\\\\ \\\\\\\/ _` | | | | |\\\\\\\/ _` | '__|   | |   | |    | |\\\\n  \\\\\\\/ ___ \\\\\\\\| | | | (_| | |_| | | (_| | |      | |___| |___ | |\\\\n \\\\\\\/_\\\\\\\/   \\\\\\\\_\\\\\\\\_| |_|\\\\\\\\__, |\\\\\\\\__,_|_|\\\\\\\\__,_|_|       \\\\\\\\____|_____|___|\\\\n                |___\\\\\\\/\\\\n\\\\n\\\\nAngular CLI: 16.2.5\\\\nNode: 16.15.0\\\\nPackage Manager: yarn 1.22.18\\\\nOS: win32 x64\\\\n\\\\nAngular:\\\\n...\\\\n\\\\nPackage                      Version\\\\n------------------------------------------------------\\\\n@angular-devkit\\\\\\\/architect    0.1602.5 (cli-only)\\\\n@angular-devkit\\\\\\\/core         16.2.5 (cli-only)\\\\n@angular-devkit\\\\\\\/schematics   16.2.5 (cli-only)\\\\n@schematics\\\\\\\/angular          16.2.5 (cli-only)\\\\n```\\\\n\\\\n[チュートリアル](https:\\\\\\\/\\\\\\\/angular.io\\\\\\\/tutorial\\\\\\\/tour-of-heroes\\\\\\\/toh-pt0)に従ってプロジェクトを作成。\\\\n\\\\n``` powershell\\\\n> ng new angular-tour-of-heroes-esbuild\\\\n? Would you like to add Angular routing? Yes\\\\n? Which stylesheet format would you like to use?\\\\n  CSS\\\\n> SCSS   [ https:\\\\\\\/\\\\\\\/sass-lang.com\\\\\\\/documentation\\\\\\\/syntax#scss                ]\\\\n  Sass   [ https:\\\\\\\/\\\\\\\/sass-lang.com\\\\\\\/documentation\\\\\\\/syntax#the-indented-syntax ]\\\\n  Less   [ http:\\\\\\\/\\\\\\\/lesscss.org                                             ]\\\\nPS C:\\\\\\\\Repos\\\\\\\\temp\\\\\\\\angular-vite> ng new angular-tour-of-heroes-esbuild\\\\n? Would you like to add Angular routing? No\\\\n? Which stylesheet format would you like to use? SCSS   [ https:\\\\\\\/\\\\\\\/sass-lang.com\\\\\\\/documentation\\\\\\\/syntax#scss                ]\\\\nCREATE angular-tour-of-heroes-esbuild\\\\\\\/angular.json (2994 bytes)\\\\nCREATE angular-tour-of-heroes-esbuild\\\\\\\/package.json (1061 bytes)\\\\nCREATE angular-tour-of-heroes-esbuild\\\\\\\/README.md (1080 bytes)\\\\nCREATE angular-tour-of-heroes-esbuild\\\\\\\/tsconfig.json (901 bytes)\\\\nCREATE angular-tour-of-heroes-esbuild\\\\\\\/.editorconfig (274 bytes)\\\\nCREATE angular-tour-of-heroes-esbuild\\\\\\\/.gitignore (548 bytes)\\\\nCREATE angular-tour-of-heroes-esbuild\\\\\\\/tsconfig.app.json (263 bytes)\\\\nCREATE angular-tour-of-heroes-esbuild\\\\\\\/tsconfig.spec.json (273 bytes)\\\\nCREATE angular-tour-of-heroes-esbuild\\\\\\\/.vscode\\\\\\\/extensions.json (130 bytes)\\\\nCREATE angular-tour-of-heroes-esbuild\\\\\\\/.vscode\\\\\\\/launch.json (470 bytes)\\\\nCREATE angular-tour-of-heroes-esbuild\\\\\\\/.vscode\\\\\\\/tasks.json (938 bytes)\\\\nCREATE angular-tour-of-heroes-esbuild\\\\\\\/src\\\\\\\/main.ts (214 bytes)\\\\nCREATE angular-tour-of-heroes-esbuild\\\\\\\/src\\\\\\\/favicon.ico (948 bytes)\\\\nCREATE angular-tour-of-heroes-esbuild\\\\\\\/src\\\\\\\/index.html (312 bytes)\\\\nCREATE angular-tour-of-heroes-esbuild\\\\\\\/src\\\\\\\/styles.scss (80 bytes)\\\\nCREATE angular-tour-of-heroes-esbuild\\\\\\\/src\\\\\\\/app\\\\\\\/app.module.ts (314 bytes)\\\\nCREATE angular-tour-of-heroes-esbuild\\\\\\\/src\\\\\\\/app\\\\\\\/app.component.html (23083 bytes)\\\\nCREATE angular-tour-of-heroes-esbuild\\\\\\\/src\\\\\\\/app\\\\\\\/app.component.spec.ts (964 bytes)\\\\nCREATE angular-tour-of-heroes-esbuild\\\\\\\/src\\\\\\\/app\\\\\\\/app.component.ts (235 bytes)\\\\nCREATE angular-tour-of-heroes-esbuild\\\\\\\/src\\\\\\\/app\\\\\\\/app.component.scss (0 bytes)\\\\nCREATE angular-tour-of-heroes-esbuild\\\\\\\/src\\\\\\\/assets\\\\\\\/.gitkeep (0 bytes)\\\\n✔ Packages installed successfully.\\\\nhint: Using 'master' as the name for the initial branch. This default branch name\\\\nhint: is subject to change. To configure the initial branch name to use in all\\\\nhint: of your new repositories, which will suppress this warning, call:\\\\nhint:\\\\nhint:   git config --global init.defaultBranch <name>\\\\nhint:\\\\nhint: Names commonly chosen instead of 'master' are 'main', 'trunk' and\\\\nhint: 'development'. The just-created branch can be renamed via this command:\\\\nhint:\\\\nhint:   git branch -m <name>\\\\nwarning: in the working copy of '.editorconfig', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of '.gitignore', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of '.vscode\\\\\\\/extensions.json', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of '.vscode\\\\\\\/launch.json', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of '.vscode\\\\\\\/tasks.json', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'README.md', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'angular.json', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'package.json', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'src\\\\\\\/app\\\\\\\/app.component.html', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'src\\\\\\\/app\\\\\\\/app.component.spec.ts', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'src\\\\\\\/app\\\\\\\/app.component.ts', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'src\\\\\\\/app\\\\\\\/app.module.ts', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'src\\\\\\\/index.html', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'src\\\\\\\/main.ts', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'src\\\\\\\/styles.scss', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'tsconfig.app.json', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'tsconfig.json', LF will be replaced by CRLF the next time Git touches it\\\\nwarning: in the working copy of 'tsconfig.spec.json', LF will be replaced by CRLF the next time Git touches it\\\\n    Successfully initialized git.\\\\n```\\\\n\\\\nbuilderを`@angular-devkit\\\\\\\/build-angular:browser-esbuild`に変更後、初回ビルドの実行時間は11sでした(元々の設定では26s)。\\\\n\\\\n``` powershell\\\\n> yarn build\\\\nyarn run v1.22.18\\\\n$ ng build\\\\nThe esbuild-based browser application builder ('browser-esbuild') is currently in developer preview and is not yet recommended for production use. For additional information, please see https:\\\\\\\/\\\\\\\/angular.io\\\\\\\/guide\\\\\\\/esbuild\\\\nThe 'budgets' option is not yet supported by this builder.\\\\n\\\\nInitial Chunk Files   | Names         |  Raw Size | Estimated Transfer Size\\\\nmain.P3DX73J7.js      | main          | 127.60 kB |                38.23 kB\\\\npolyfills.T6ZPM373.js | polyfills     |  32.85 kB |                10.68 kB\\\\nchunk-2XJVAMHT.js     | -             | 449 bytes |               449 bytes\\\\nstyles.7FSFZJA3.css   | styles        |   0 bytes |                 0 bytes\\\\n\\\\n                      | Initial Total | 160.88 kB |                49.34 kB\\\\n\\\\nApplication bundle generation complete. [5.992 seconds]\\\\nDone in 11.59s.\\\\n```\\\\n\\\\n二回目のビルドはtotalで3sでした(元々の設定では4s)。\\\\n\\\\n``` powershell\\\\n> yarn build\\\\n> yarn build\\\\nyarn run v1.22.18\\\\n$ ng build\\\\nThe esbuild-based browser application builder ('browser-esbuild') is currently in developer preview and is not yet recommended for production use. For additional information, please see https:\\\\\\\/\\\\\\\/angular.io\\\\\\\/guide\\\\\\\/esbuild\\\\nThe 'budgets' option is not yet supported by this builder.\\\\n\\\\nInitial Chunk Files   | Names         |  Raw Size | Estimated Transfer Size\\\\nmain.P3DX73J7.js      | main          | 127.60 kB |                38.23 kB\\\\npolyfills.T6ZPM373.js | polyfills     |  32.85 kB |                10.68 kB\\\\nchunk-2XJVAMHT.js     | -             | 449 bytes |               449 bytes\\\\nstyles.7FSFZJA3.css   | styles        |   0 bytes |                 0 bytes\\\\n\\\\n                      | Initial Total | 160.88 kB |                49.34 kB\\\\n\\\\nApplication bundle generation complete. [2.325 seconds]\\\\nDone in 3.19s.\\\\n```\\\\n\\\\n次にyarn startでappを実行してみます。初回app実行は約1sでした(元々の設定では6s)。\\\\n\\\\n``` powershell\\\\n> yarn start\\\\nyarn run v1.22.18\\\\n$ ng serve\\\\nThe esbuild-based browser application builder ('browser-esbuild') is currently in developer preview and is not yet recommended for production use. For additional information, please see https:\\\\\\\/\\\\\\\/angular.io\\\\\\\/guide\\\\\\\/esbuild\\\\nThe 'namedChunks' option is not used by this builder and will be ignored.\\\\nThe 'vendorChunk' option is not used by this builder and will be ignored.\\\\n\\\\nInitial Chunk Files | Names         | Raw Size\\\\nmain.js             | main          | 34.59 kB |\\\\nstyles.css          | styles        | 96 bytes |\\\\npolyfills.js        | polyfills     | 95 bytes |\\\\n\\\\n                    | Initial Total | 34.77 kB\\\\n\\\\nApplication bundle generation complete. [1.257 seconds]\\\\n  ➜  Local:   http:\\\\\\\/\\\\\\\/127.0.0.1:4200\\\\\\\/\\\\nWatch mode enabled. Watching for file changes...\\\\n```\\\\n\\\\n二回目以降のapp実行も同様に約1sでした(元々の設定では2s)。常に2倍以上高速です。\\\\n\\\\n``` powershell\\\\n> yarn start\\\\nyarn run v1.22.18\\\\n$ ng serve\\\\nThe esbuild-based browser application builder ('browser-esbuild') is currently in developer preview and is not yet recommended for production use. For additional information, please see https:\\\\\\\/\\\\\\\/angular.io\\\\\\\/guide\\\\\\\/esbuild\\\\nThe 'namedChunks' option is not used by this builder and will be ignored.\\\\nThe 'vendorChunk' option is not used by this builder and will be ignored.\\\\n\\\\nInitial Chunk Files | Names         | Raw Size\\\\nmain.js             | main          | 34.59 kB |\\\\nstyles.css          | styles        | 96 bytes |\\\\npolyfills.js        | polyfills     | 95 bytes |\\\\n\\\\n                    | Initial Total | 34.77 kB\\\\n\\\\nApplication bundle generation complete. [1.282 seconds]\\\\n  ➜  Local:   http:\\\\\\\/\\\\\\\/127.0.0.1:4200\\\\\\\/\\\\nWatch mode enabled. Watching for file changes...\\\\n```\\\\n\\\\nTutorialを進めながら気が付いた点として、\\\\n\\\\n- VSCodeのバージョンが古いとAngular Language Service Extensionの最新版がダウンロードできない\\\\n  - 実行しているAngular(v16)とExtensionのAngular(v15)でバージョンが合わない\\\\n  - `[(ngModel)]`を利用しようとすると、Angular Language Serviceが`Can’t bind to ‘ngModel’ since it isn’t a known property of ‘input’.`エラーを表示する\\\\n\\\\nよくある`FormsModule`のimport忘れのエラーかと思ったのですが、この対応では解決せずしばらく悩みました。VS Codeの更新->Angular Language Serviceの更新(v16版)でエラーが表示されないようになりました。\\\\n\\\\n## その他の学び\\\\n\\\\n- 非nullアサーション(non-null assertion)\\\\n  - [5. add navigation - Add HeroService.getHero()](https:\\\\\\\/\\\\\\\/angular.io\\\\\\\/tutorial\\\\\\\/tour-of-heroes\\\\\\\/toh-pt5#add-heroservicegethero)にて`const hero = HEROES.find(h => h.id === id)!;`という風に最後に`!`することで、heroの型を`Hero | undefined`から`Hero`に強制できる。型問題の解決案として覚えておくと便利そう。\\\\n- [angular-in-memory-web-api](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/angular\\\\\\\/in-memory-web-api#angular-in-memory-web-api)\\\\n  - web apiのモックを簡単に作れて便利\\\"}\"}","{\"docRef\":\"angular\\\/angular-fix-error-start-debugging-visualstudio\",\"content\":\"{\\\"title\\\":\\\"新しいAngularテンプレートのVisualStudioデバッグエラー: デバッグアダプターを起動できませんでした\\\",\\\"date\\\":\\\"2022-09-23\\\",\\\"category\\\":\\\"Angular\\\",\\\"tag\\\":[\\\"Visual Studio\\\",\\\"angular\\\",\\\"esproj\\\"],\\\"body\\\":\\\"\\\\n\\\\n[ASP.NET Coreの新しいAngular template](https:\\\\\\\/\\\\\\\/learn.microsoft.com\\\\\\\/ja-jp\\\\\\\/visualstudio\\\\\\\/javascript\\\\\\\/tutorial-asp-net-core-with-angular?view=vs-2022)を使って作成したプロジェクトを試しています。\\\\n\\\\n今回、Visual Studio 2022で新規にプロジェクトを作成後に、Angularのフロントエンドプロジェクト名を変更したところ、デバッグ実行時に「デバッグアダプターを起動できませんでした」というエラーが発生するようになってしまいました。原因と解消法について調査します。\\\\n\\\\n<img src=\\\\\\\"assets\\\\\\\/images\\\\\\\/angular-fix-error-start-debugging-visualstudio\\\\\\\/angular-fix-error-start-debugging-visualstudio-1.png\\\\\\\" alt=\\\\\\\"debug error\\\\\\\" title=\\\\\\\"debug error\\\\\\\">\\\\n\\\\n## 原因\\\\n\\\\n「デバッグアダプターを起動できませんでした」は、デバッグ開始時にアタッチするブラウザを見つけられない場合に発生するエラーのようです。\\\\n\\\\n新テンプレートでは、デバッグ開始時にMultiple Startupプロジェクトという形で、ASP.NET CoreのバックエンドプロジェクトとAngularのフロントエンドプロジェクトを同時に指定します。ASP.NET Coreのプロジェクト単体では、デバッグ実行が正常に動作するので、Angularのプロジェクト(esproj形式)の方に問題がありそうです。\\\\n\\\\nプロジェクト名を変えたことがきっかけでエラーが始まったので、何か古いキャッシュが影響しているのかと再起動やtempデータ削除、プロジェクトの完全rebuildなどを試してみましたが効果がありません。\\\\n\\\\nほぼ変更前と同じ別プロジェクトが残っており、そちらではデバッグ実行が正常に行えたので比較を行い、プロジェクトのパーソナル設定ファイル`*.esproj.user`に差異を見つけました。\\\\n\\\\n``` diff\\\\n<?xml version=\\\\\\\"1.0\\\\\\\" encoding=\\\\\\\"utf-8\\\\\\\"?>\\\\n<Project ToolsVersion=\\\\\\\"Current\\\\\\\" xmlns=\\\\\\\"http:\\\\\\\/\\\\\\\/schemas.microsoft.com\\\\\\\/developer\\\\\\\/msbuild\\\\\\\/2003\\\\\\\">\\\\n  <PropertyGroup Condition=\\\\\\\"'$(Configuration)|$(Platform)'=='Debug|AnyCPU'\\\\\\\">\\\\n+    <DebuggerFlavor>LaunchJsonDebugger<\\\\\\\/DebuggerFlavor>\\\\n+    <LaunchJsonTarget>\\\\n+      {\\\\n+      \\\\\\\"type\\\\\\\": \\\\\\\"pwa-msedge\\\\\\\",\\\\n+      \\\\\\\"request\\\\\\\": \\\\\\\"launch\\\\\\\",\\\\n+      \\\\\\\"name\\\\\\\": \\\\\\\"localhost (Edge)\\\\\\\",\\\\n+      \\\\\\\"url\\\\\\\": \\\\\\\"https:\\\\\\\/\\\\\\\/localhost:4200\\\\\\\",\\\\n+      \\\\\\\"webRoot\\\\\\\": \\\\\\\"C:\\\\\\\\\\\\\\\\Repos\\\\\\\\\\\\\\\\tech-log\\\\\\\\\\\\\\\\AngularStandalone\\\\\\\"\\\\n+      }\\\\n+    <\\\\\\\/LaunchJsonTarget>\\\\n  <\\\\\\\/PropertyGroup>\\\\n<\\\\\\\/Project>\\\\n```\\\\n\\\\nパーソナル設定ファイルの中に`<DebugFlavor>`と`launch.json`に出てくるようなブラウザ接続の設定が記載されていました。これらの設定を追加したところデバッグのエラーも解消しました。\\\\n\\\\n`webRoot`の値が、各開発者のローカルパスになるため`.user`ファイルでの記述になるのはわかるのですが、`.gitignore`では`.user`ファイルは除外指定にしているので、repositoryからクローンした開発者環境ではVisual Studioのデバッグに問題がありそうです。\\\\n\\\\n## 暫定対応\\\\n\\\\n試行錯誤してみたところ、`webRoot`の指定がなくても`LaunchJsonTarget`の指定があればdebugエラーが解消するので、ローカルパスを抜いた記述を`esproj`のほうにおまじない的に書いておいて様子を見ようと思います。\\\\n\\\"}\"}","{\"docRef\":\"angular\\\/angular-prerender\",\"content\":\"{\\\"title\\\":\\\"Angularのプリレンダリングについて\\\",\\\"date\\\":\\\"2020-02-15\\\",\\\"category\\\":\\\"Angular\\\",\\\"tag\\\":[\\\"angular\\\",\\\"prerender\\\"],\\\"body\\\":\\\"[angular-prerender](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/chrisguttandin\\\\\\\/angular-prerender)という気になるツールを見かけたので、使ったらどうなるのか試してみます。\\\\n\\\\n## 環境の準備\\\\n\\\\n### nodejs\\\\n\\\\nLTS版のnodeを利用します。これまではWindows installerでインストールしていましたが、今回kらscoopを使うようにしました。\\\\n\\\\n``` powershell\\\\n> scoop install nodejs-lts\\\\nInstalling 'nodejs-lts' (12.16.0) [64bit]\\\\nnode-v12.16.0-win-x64.7z (10.2 MB) [=============================] 100%\\\\nChecking hash of node-v12.16.0-win-x64.7z ... ok.\\\\nExtracting node-v12.16.0-win-x64.7z ... done.\\\\nLinking C:\\\\\\\\Apps\\\\\\\\scoop\\\\\\\\apps\\\\\\\\nodejs-lts\\\\\\\\current => C:\\\\\\\\Apps\\\\\\\\scoop\\\\\\\\apps\\\\\\\\nodejs-lts\\\\\\\\12.16.0\\\\nPersisting bin\\\\nPersisting cache\\\\nRunning post-install script...\\\\n'nodejs-lts' (12.16.0) was installed successfully!\\\\n\\\\n> node -v\\\\nv12.16.0\\\\n```\\\\n\\\\nwindowsのアンインストールでは`%AppData%\\\\\\\/npm`と`%AppData%\\\\\\\/npm-cache`が削除されず残ってしまうことがありました。見つけたら手動で削除します。\\\\n\\\\n### package manager\\\\n\\\\n2020年2月の調査でもnpmよりyarnの方がパフォーマンスが良いという記事が多いので、package managerにはnpmではなくyarnを使用します。scoopを使ってインストールします。\\\\n\\\\n``` powershell\\\\n> scoop install yarn\\\\n```\\\\n\\\\n### Angular CLI\\\\n\\\\nAngularのバージョンは9を利用することにします。これまではAngular7を使っていて、今回初めて9のプロジェクトを作るので、Angular CLIの更新から始めます。\\\\n\\\\nyarn globalインストールでは、versionがうまく表示されないエラーがあるようなので、npmでグローバルインストールします。\\\\n\\\\n``` powershell\\\\n> npm uninstall -g angular-cli\\\\n> npm cache verify\\\\n> npm install -g @angular\\\\\\\/cli@latest\\\\n> ng version\\\\n\\\\n     _                      _                 ____ _     ___\\\\n    \\\\\\\/ \\\\\\\\   _ __   __ _ _   _| | __ _ _ __     \\\\\\\/ ___| |   |_ _|\\\\n   \\\\\\\/ △ \\\\\\\\ | '_ \\\\\\\\ \\\\\\\/ _` | | | | |\\\\\\\/ _` | '__|   | |   | |    | |\\\\n  \\\\\\\/ ___ \\\\\\\\| | | | (_| | |_| | | (_| | |      | |___| |___ | |\\\\n \\\\\\\/_\\\\\\\/   \\\\\\\\_\\\\\\\\_| |_|\\\\\\\\__, |\\\\\\\\__,_|_|\\\\\\\\__,_|_|       \\\\\\\\____|_____|___|\\\\n                |___\\\\\\\/\\\\n\\\\nAngular CLI: 9.0.2\\\\nNode: 12.16.0\\\\nOS: win32 x64\\\\n\\\\nAngular:\\\\n...\\\\nIvy Workspace:\\\\n\\\\nPackage                      Version\\\\n------------------------------------------------------\\\\n@angular-devkit\\\\\\\/architect    0.900.2\\\\n@angular-devkit\\\\\\\/core         9.0.2\\\\n@angular-devkit\\\\\\\/schematics   9.0.2\\\\n@schematics\\\\\\\/angular          9.0.2\\\\n@schematics\\\\\\\/update           0.900.2\\\\nrxjs                         6.5.3\\\\n```\\\\n\\\\n## プロジェクトの作成\\\\n\\\\nangular prerender公式サイトの手順通りに進めます。\\\\n\\\\n``` powershell\\\\n> ng config -g cli.packageManager yarn\\\\n> ng new universe --routing\\\\n```\\\\n\\\\n初回実行時にpackageの解決まで行われるので、事前にAngular CLIが利用するpackage managerをyarnに変更してから、新規にAngular9 appを作成しました。\\\\n\\\\n## universal(server) moduleの作成\\\\n\\\\n``` powershell\\\\n> cd universe\\\\n> ng generate universal --client-project universe\\\\nCREATE src\\\\\\\/main.server.ts (298 bytes)\\\\nCREATE src\\\\\\\/app\\\\\\\/app.server.module.ts (318 bytes)\\\\nCREATE tsconfig.server.json (308 bytes)\\\\nUPDATE package.json (1327 bytes)\\\\nUPDATE angular.json (4357 bytes)\\\\nUPDATE src\\\\\\\/main.ts (432 bytes)\\\\nUPDATE src\\\\\\\/app\\\\\\\/app.module.ts (438 bytes)\\\\n√ Packages installed successfully.\\\\n```\\\\n\\\\n## angular-prerenderの導入とprerender処理\\\\n\\\\n``` powershell\\\\n> yarn add angular-prerender --dev\\\\n> ng build\\\\n> ng run universe:server\\\\n> npx angular-prerender\\\\n```\\\\n\\\\n処理が正常に終了し、`dist\\\\\\\\universe\\\\\\\\browser\\\\\\\\index.html`にapp.component.htmlの内容が追記されていることを確認しました。\\\\n\\\\n## 次にやること\\\\n\\\\nrouteを増やして、どのようにhtmlが追記されるのかを確認します。\\\\n\\\\n## 作業録\\\\n\\\\nステップ毎の変更点を<https:\\\\\\\/\\\\\\\/github.com\\\\\\\/takumura\\\\\\\/angular-express-prerender\\\\\\\/commits\\\\\\\/master>から確認できます。\\\\n\\\\n## 関連項目\\\\n\\\\n- [Angular Update Guide](https:\\\\\\\/\\\\\\\/update.angular.io\\\\\\\/)\\\\n- [Updating to Angular version 9](https:\\\\\\\/\\\\\\\/angular.io\\\\\\\/guide\\\\\\\/updating-to-version-9)\\\\n- [Angularの環境構築（Angular CLIで構築）](https:\\\\\\\/\\\\\\\/qiita.com\\\\\\\/Yamamoto0525\\\\\\\/items\\\\\\\/65d5a0b36eb4dbd8079b)\\\"}\"}","{\"docRef\":\"angular\\\/angular-renew-ssl-cert\",\"content\":\"{\\\"title\\\":\\\"Angularでng servのssl certを更新する\\\",\\\"date\\\":\\\"2023-10-09\\\",\\\"category\\\":\\\"Angular\\\",\\\"tag\\\":[\\\"angular\\\",\\\"certification\\\",\\\"ssl\\\"],\\\"body\\\":\\\"\\\\n\\\\n一年以上前にASP.NET coreのAngular templateを利用したプロジェクトで開発をしていました。久しぶりにそのプロジェクトの動作確認をしていて、デバッグ実行時に`ng serve`をsslオプションで実行しているのに`SSL証明書が安全でない`と表示されることに気が付きました。証明書を確認すると有効期限が切れていました。証明書の更新方法を調べます。\\\\n\\\\n## 対応方法\\\\n\\\\npackage.jsonからsslオプションの記述を確認。ASP.NET CoreのAngular templateを利用して作成しており、ssl証明書のpathは`%APPDATA%\\\\\\\\\\\\\\\\ASP.NET\\\\\\\\\\\\\\\\https\\\\\\\\\\\\\\\\`となっていました。\\\\n\\\\n``` json\\\\n\\\\\\\"scripts\\\\\\\": {\\\\n  ...\\\\n  \\\\\\\"start\\\\\\\": \\\\\\\"ng serve --ssl --ssl-cert %APPDATA%\\\\\\\\\\\\\\\\ASP.NET\\\\\\\\\\\\\\\\https\\\\\\\\\\\\\\\\%npm_package_name%.pem --ssl-key %APPDATA%\\\\\\\\\\\\\\\\ASP.NET\\\\\\\\\\\\\\\\https\\\\\\\\\\\\\\\\%npm_package_name%.key\\\\\\\",\\\\n  ...\\\\n}\\\\n```\\\\n\\\\n該当pathには`%npm_package_name%`、すなわちpackage.jsonに記載した`name`fieldを利用して、`{name}.pem`と`{name}.key`とのファイルが二つ作成されていました。これらを削除して、`yarn start`を実行すると、ssl証明書が再作成されました。\\\\n\\\\n有効期限は1年に設定されているので、来年になったらまた同じ手順でssl証明書の再作成が必要です。\\\\n\\\\n## ssl証明書の再作成処理について\\\\n\\\\nASP.NET CoreのAngular templateの中に`aspnetcore-https.js`が含まれており、この中で`dotnet`コマンドを使ったssl自己証明書の作成を行っていました。\\\\n\\\\n``` typescript\\\\n\\\\\\\/\\\\\\\/ This script sets up HTTPS for the application using the ASP.NET Core HTTPS certificate\\\\nconst fs = require('fs');\\\\nconst spawn = require('child_process').spawn;\\\\nconst path = require('path');\\\\n\\\\nconst baseFolder =\\\\n  process.env.APPDATA !== undefined && process.env.APPDATA !== ''\\\\n    ? `${process.env.APPDATA}\\\\\\\/ASP.NET\\\\\\\/https`\\\\n    : `${process.env.HOME}\\\\\\\/.aspnet\\\\\\\/https`;\\\\n\\\\nconst certificateArg = process.argv.map(arg => arg.match(\\\\\\\/--name=(?<value>.+)\\\\\\\/i)).filter(Boolean)[0];\\\\nconst certificateName = certificateArg ? certificateArg.groups.value : process.env.npm_package_name;\\\\n\\\\nif (!certificateName) {\\\\n  console.error('Invalid certificate name. Run this script in the context of an npm\\\\\\\/yarn script or pass --name=<<app>> explicitly.')\\\\n  process.exit(-1);\\\\n}\\\\n\\\\nconst certFilePath = path.join(baseFolder, `${certificateName}.pem`);\\\\nconst keyFilePath = path.join(baseFolder, `${certificateName}.key`);\\\\n\\\\nif (!fs.existsSync(certFilePath) || !fs.existsSync(keyFilePath)) {\\\\n  spawn('dotnet', [\\\\n    'dev-certs',\\\\n    'https',\\\\n    '--export-path',\\\\n    certFilePath,\\\\n    '--format',\\\\n    'Pem',\\\\n    '--no-password',\\\\n  ], { stdio: 'inherit', })\\\\n  .on('exit', (code) => process.exit(code));\\\\n}\\\\n```\\\\n\\\\npacakge.jsonのscriptの中で`prestart`を定義することで、`yarn start`実行時にhookして`aspnetcore-https.js`をcallするという処理の流れになっていることを確認しました。\\\\n\\\\n``` json\\\\n\\\\\\\"scripts\\\\\\\": {\\\\n  ...\\\\n  \\\\\\\"prestart\\\\\\\": \\\\\\\"node aspnetcore-https\\\\\\\",\\\\n  ...\\\\n},\\\\n```\\\\n\\\"}\"}","{\"docRef\":\"angular\\\/angular-setup-ghpages\",\"content\":\"{\\\"title\\\":\\\"angularプロジェクトをgithub pagesにdeployする\\\",\\\"date\\\":\\\"2022-09-24\\\",\\\"category\\\":\\\"Angular\\\",\\\"tag\\\":[\\\"angular\\\",\\\"deploy\\\",\\\"github pages\\\",\\\"angular-cli-ghpages\\\"],\\\"body\\\":\\\"\\\\n\\\\n\\\\nAngular CLIの[deployコマンド](https:\\\\\\\/\\\\\\\/angular.io\\\\\\\/guide\\\\\\\/deployment)を使用すると、Angularアプリケーションをワンコマンドで様々なプラットフォームに配信できます。\\\\n\\\\nGithub pages用のmodule: [angular-cli-ghpages](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/angular-schule\\\\\\\/angular-cli-ghpages)を利用してdeployする設定についてまとめます。\\\\n\\\\nangular v8以降は`ng deploy`コマンドの統一化により、設定が簡単になっています。それ以前の設定方法については[angular v7以前の設定方法について](doc\\\\\\\/angular\\\\\\\/angular-setup-ghpages#angular-v7以前の設定方法について)<!--rehype:class=internal-link-->を参照してください。\\\\n\\\\n## angular v8以降の設定方法について\\\\n\\\\n[公式readme](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/angular-schule\\\\\\\/angular-cli-ghpages#-quick-start-local-development-)に記載の手順で基本的にはうまくいきます。\\\\n\\\\nまずは`angular-cli-ghpages`をdependencyに追加します。\\\\n\\\\n``` powershell\\\\n> yarn add angular-cli-ghpages\\\\n```\\\\n\\\\n次に`package.json`にdeployコマンドを登録します。\\\\n\\\\n``` diff\\\\n{\\\\n  \\\\\\\"name\\\\\\\": \\\\\\\"net6-markdown-web-engine\\\\\\\",\\\\n  \\\\\\\"version\\\\\\\": \\\\\\\"0.0.0\\\\\\\",\\\\n  \\\\\\\"scripts\\\\\\\": {\\\\n    \\\\\\\"ng\\\\\\\": \\\\\\\"ng\\\\\\\",\\\\n    \\\\\\\"start\\\\\\\": \\\\\\\"ng serve --ssl --ssl-cert %APPDATA%\\\\\\\\\\\\\\\\ASP.NET\\\\\\\\\\\\\\\\https\\\\\\\\\\\\\\\\%npm_package_name%.pem --ssl-key %APPDATA%\\\\\\\\\\\\\\\\ASP.NET\\\\\\\\\\\\\\\\https\\\\\\\\\\\\\\\\%npm_package_name%.key\\\\\\\",\\\\n    \\\\\\\"build\\\\\\\": \\\\\\\"ng build\\\\\\\",\\\\n    \\\\\\\"watch\\\\\\\": \\\\\\\"ng build --watch --configuration development\\\\\\\",\\\\n    \\\\\\\"test\\\\\\\": \\\\\\\"ng test\\\\\\\",\\\\n    \\\\\\\"prestart\\\\\\\": \\\\\\\"node aspnetcore-https\\\\\\\",\\\\n    \\\\\\\"lint\\\\\\\": \\\\\\\"ng lint\\\\\\\",\\\\n+    \\\\\\\"deploy\\\\\\\": \\\\\\\"ng deploy\\\\\\\"\\\\n  },\\\\n  ...\\\\n}\\\\n```\\\\n\\\\n2022-09-24時点の説明では、以下のように`--base-href`オプションでbaseHrefを指定するように記載されていました。\\\\n\\\\n``` powershell\\\\n> ng deploy --base-href=\\\\\\\/<repositoryname>\\\\\\\/\\\\n```\\\\n\\\\nですが、Angular v13で`ng serve`の`--base-href`がdeprecatedされた影響で`Unknown option: '--base-href'`エラーが発生するようになってしまいました。\\\\n\\\\n改めて[公式readmeのConfiguration File](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/angular-schule\\\\\\\/angular-cli-ghpages#-configuration-file-)の項を読むと、angular.jsonでoptionはすべて指定できることがわかります。\\\\n\\\\nこれを参考に、angular.jsonの`projects` > `architect` > `deploy`にbuilderとoptionの指定を追加します。\\\\n\\\\n``` json\\\\n{\\\\n  \\\\\\\"$schema\\\\\\\": \\\\\\\".\\\\\\\/node_modules\\\\\\\/@angular\\\\\\\/cli\\\\\\\/lib\\\\\\\/config\\\\\\\/schema.json\\\\\\\",\\\\n  \\\\\\\"version\\\\\\\": 1,\\\\n  \\\\\\\"newProjectRoot\\\\\\\": \\\\\\\"projects\\\\\\\",\\\\n  \\\\\\\"projects\\\\\\\": {\\\\n      \\\\\\\"architect\\\\\\\": {\\\\n        \\\\\\\"build\\\\\\\": {\\\\n          ...\\\\n        },\\\\n        \\\\\\\"deploy\\\\\\\": {\\\\n          \\\\\\\"builder\\\\\\\": \\\\\\\"angular-cli-ghpages:deploy\\\\\\\",\\\\n          \\\\\\\"options\\\\\\\": {\\\\n            \\\\\\\"baseHref\\\\\\\": \\\\\\\"https:\\\\\\\/\\\\\\\/takumura.github.io\\\\\\\/tech-log\\\\\\\/\\\\\\\"\\\\n          }\\\\n        }\\\\n      }\\\\n    }\\\\n  },\\\\n```\\\\n\\\\nこれで準備は完了です。あとは`deploy`コマンドを実行するだけです。\\\\n\\\\n``` powershell\\\\n> yarn run deploy\\\\nyarn run v1.22.18\\\\n$ ng deploy\\\\n📦 Building \\\\\\\"net6-markdown-web-engine\\\\\\\"\\\\n📦 Build target \\\\\\\"net6-markdown-web-engine:build:production\\\\\\\"\\\\n✔ Browser application bundle generation complete.\\\\n✔ Copying assets complete.\\\\n✔ Index html generation complete.\\\\n\\\\nInitial Chunk Files           | Names         | Raw Size | Estimated Transfer Size\\\\nmain.916c949610f5da02.js      | main          |  1.95 MB |               466.40 kB\\\\nstyles.115de464a61128e0.css   | styles        | 86.36 kB |                 8.86 kB\\\\npolyfills.3b0926dacd75e569.js | polyfills     | 36.19 kB |                11.51 kB\\\\nruntime.969567bc7b9abfdf.js   | runtime       |  1.24 kB |               662 bytes\\\\n\\\\n                              | Initial Total |  2.07 MB |               487.41 kB\\\\n\\\\nBuild at: 2022-09-23T15:20:55.591Z - Hash: e6426ae3739f9185 - Time: 26054ms\\\\n\\\\nWarning: bundle initial exceeded maximum budget. Budget 500.00 kB was not met by 1.58 MB with a total of 2.07 MB.\\\\n\\\\n\\\\n🚀 Uploading via git, please wait...\\\\n🌟 Successfully published via angular-cli-ghpages! Have a nice day!\\\\nDone in 38.89s.\\\\n```\\\\n\\\\nPCを新調したので、以前は3分ほど掛かっていた処理が40秒で終わるようになりました。素晴らしい！\\\\n\\\\n<details open>\\\\n  <summary>Angular v7以前（2019-11-14 作成）<\\\\\\\/summary>\\\\n\\\\n## Angular v7以前の設定方法について\\\\n\\\\nAngular 7でangular-cli-ghpagesライブラリを利用して、github pagesを簡単に更新できるようなので、その設定方法などを調べました。\\\\n\\\\n### 実施した手順\\\\n\\\\nまず初めに[angular-cli-ghpagesのgithubリポジトリ](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/angular-schule\\\\\\\/angular-cli-ghpages)を確認しました。\\\\n\\\\nPrerequisitesに`Angular project created via Angular CLI v8.3.0-next.0 or greate`と書かれているのを発見。うまくいかないかもしれないが、とりあえずAngular CLI v7系のまま設定を実施しました。\\\\n\\\\n``` powershell\\\\nPS C:\\\\\\\\Repos\\\\\\\\github\\\\\\\\tech-log\\\\\\\\Website\\\\\\\\ClientApp> ng add angular-cli-ghpages\\\\nInstalling packages for tooling via npm.\\\\nnpm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.7 (node_modules\\\\\\\\fsevents):\\\\nnpm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.7: wanted {\\\\\\\"os\\\\\\\":\\\\\\\"darwin\\\\\\\",\\\\\\\"arch\\\\\\\":\\\\\\\"any\\\\\\\"} (current: {\\\\\\\"os\\\\\\\":\\\\\\\"win32\\\\\\\",\\\\\\\"arch\\\\\\\":\\\\\\\"x64\\\\\\\"})\\\\n+ angular-cli-ghpages@0.5.3\\\\nadded 18 packages from 17 contributors and audited 42977 packages in 21.148s\\\\nfound 607 vulnerabilities (3 moderate, 604 high)\\\\n  run `npm audit fix` to fix them, or `npm audit` for details\\\\nInstalled packages for tooling via npm.\\\\nThe package that you are trying to add does not support schematics. You can try using a different version of the package or contact the package author to add ng-add support.\\\\n```\\\\n\\\\n警告などが出ている（auditは今後の課題）が、今回は無視して進めます。\\\\n\\\\n``` powershell\\\\nPS C:\\\\\\\\Repos\\\\\\\\github\\\\\\\\tech-log\\\\\\\\Website\\\\\\\\ClientApp> ng build --prod --base-href \\\\\\\"https:\\\\\\\/\\\\\\\/takumura.github.io\\\\\\\/tech-log\\\\\\\/\\\\\\\"\\\\n```\\\\n\\\\ndry-runによる予行でどのように動くか実験。\\\\n\\\\n``` powershell\\\\nPS C:\\\\\\\\Repos\\\\\\\\github\\\\\\\\tech-log\\\\\\\\Website\\\\\\\\ClientApp> npx angular-cli-ghpages --dry-run\\\\n*** Dry-run: No changes are applied at all.\\\\n*** Dry-run \\\\\\\/ SKIPPED: cleaning of the cache directory\\\\n*** Dry-run \\\\\\\/ SKIPPED: copying of index.html to 404.html\\\\n*** Dry-run \\\\\\\/ SKIPPED: publishing to \\\\\\\"C:\\\\\\\\Repos\\\\\\\\github\\\\\\\\tech-log\\\\\\\\Website\\\\\\\\ClientApp\\\\\\\\dist\\\\\\\" with the following options: { dir: 'C:\\\\\\\\\\\\\\\\Repos\\\\\\\\\\\\\\\\github\\\\\\\\\\\\\\\\tech-log\\\\\\\\\\\\\\\\Website\\\\\\\\\\\\\\\\ClientApp\\\\\\\\\\\\\\\\dist',\\\\n  repo:\\\\n   'undefined: current working directory (which must be a git repo in this case) will be used to commit & push',\\\\n  message: 'Auto-generated commit',\\\\n  branch: 'gh-pages',\\\\n  user:\\\\n   'undefined: local or gloabl git username & email properties will be taken',\\\\n  noSilent: 'undefined: logging is in silent mode by default',\\\\n  noDotfiles: 'undefined: dotfiles are included by default',\\\\n  dryRun: true,\\\\n  cname: 'undefined: no CNAME file will be created' }\\\\n*** Successfully published!\\\\n```\\\\n\\\\n問題なさそうなので本実行。\\\\n\\\\n``` powershell\\\\nPS C:\\\\\\\\Repos\\\\\\\\github\\\\\\\\tech-log\\\\\\\\Website\\\\\\\\ClientApp> npx angular-cli-ghpages\\\\n```\\\\n\\\\n初回は`Permission denied (publickey)`エラーが発生してpushに失敗。[Git: githubへのssh接続をSourceTreeからwindows 10標準のssh clientに切り替える](doc\\\\\\\/env\\\\\\\/git-ssh-configuration)<!--rehype:class=internal-link-->の対応を実施してから再チャレンジ。\\\\n\\\\n``` powershell\\\\nPS C:\\\\\\\\Repos\\\\\\\\github\\\\\\\\tech-log\\\\\\\\Website\\\\\\\\ClientApp> npx angular-cli-ghpages\\\\n*** Successfully published!\\\\n```\\\\n\\\\n無事成功。<https:\\\\\\\/\\\\\\\/takumura.github.io\\\\\\\/tech-log\\\\\\\/> にアクセスすると、見事にサイトが表示されていました。fetchでのjsonデータ取得や、ページ遷移なども問題なく動作しています。素晴らしい！\\\\n\\\\n### publish scriptの作成\\\\n\\\\nprodオプション付きのビルドを実行し、生成されたdistフォルダ以下をorigin\\\\\\\/gh-pagesにpushするスクリプトを作成しました。\\\\n\\\\n**publish-to-ghpages.ps1**\\\\n\\\\n``` powershell\\\\nng build --prod --base-href \\\\\\\"https:\\\\\\\/\\\\\\\/takumura.github.io\\\\\\\/tech-log\\\\\\\/\\\\\\\"\\\\nnpx angular-cli-ghpages\\\\n```\\\\n\\\\n<\\\\\\\/details>\\\\n\\\\n## 作業時に参照した情報\\\\n\\\\n- [Deploying an Angular App to Github Pages](https:\\\\\\\/\\\\\\\/alligator.io\\\\\\\/angular\\\\\\\/deploying-angular-app-github-pages\\\\\\\/)\\\\n- [Angular-CLIで作成したアプリをGithub Pagesにデプロイする](https:\\\\\\\/\\\\\\\/prokatsu.com\\\\\\\/angular-cli_github-pages_deploy\\\\\\\/)\\\\n- [AngularのプロジェクトをGithub Pagesに公開する](https:\\\\\\\/\\\\\\\/choco14t.hatenablog.com\\\\\\\/entry\\\\\\\/2018\\\\\\\/07\\\\\\\/07\\\\\\\/144504)\\\\n- [Unknown option: '--base-href' Angular 13 ng serve | stackoverflow](https:\\\\\\\/\\\\\\\/stackoverflow.com\\\\\\\/questions\\\\\\\/71604562\\\\\\\/unknown-option-base-href-angular-13-ng-serve)\\\\n\\\"}\"}","{\"docRef\":\"angular\\\/angular-show-gist\",\"content\":\"{\\\"title\\\":\\\"Angularでgistを表示する\\\",\\\"date\\\":\\\"2019-11-14\\\",\\\"category\\\":\\\"Angular\\\",\\\"tag\\\":[\\\"angular\\\",\\\"gist\\\",\\\"embed\\\",\\\"postscribe\\\"],\\\"body\\\":\\\"\\\\n\\\\n[Angularで動的にHTMLタグをコンポーネントに埋め込む](doc\\\\\\\/angular\\\\\\\/angular-embed-html-tag)<!--rehype:class=internal-link-->により、htmlを埋め込むことができたが、その中にscriptタグが含まれていた場合、表示させただけではscriptが実行されません。JQueryでいうところの`$()`に相当する、画面描画後にscriptを実行する処理が必要になります。\\\\n\\\\n本tech-log内で、gistのembedを表示するのに本課題を対応する必要があり、解決方法を調査しました。\\\\n\\\\n## PostScribeを利用する\\\\n\\\\n非同期にscriptを実行し、結果をDOMに書き込む[PostScribe](https:\\\\\\\/\\\\\\\/krux.github.io\\\\\\\/postscribe\\\\\\\/)というライブラリを利用することで、gistのembedを実現しました。\\\\n\\\\n**Markdownファイル(抜粋)**\\\\n\\\\n```html\\\\ngistの表示デモ。class=\\\\\\\"gist\\\\\\\"のdivでgistのembedスクリプトを囲います\\\\n<div class=\\\\\\\"gist\\\\\\\">\\\\n  <script src=\\\\\\\"https:\\\\\\\/\\\\\\\/gist.github.com\\\\\\\/takumura\\\\\\\/bbff68078afb2d0846773965d1678c7c.js\\\\\\\"><\\\\\\\/script>\\\\n<\\\\\\\/div>\\\\n```\\\\n\\\\n**document.component.ts（抜粋）**\\\\n\\\\n```ts\\\\nimport {\\\\n  AfterViewInit,\\\\n  ChangeDetectorRef,\\\\n  Component,\\\\n  ElementRef,\\\\n  OnDestroy,\\\\n  OnInit,\\\\n  ViewChild,\\\\n} from '@angular\\\\\\\/core';\\\\nimport postscribe from 'postscribe';\\\\n\\\\n@Component({\\\\n  selector: \\\\\\\"app-document\\\\\\\",\\\\n  templateUrl: \\\\\\\".\\\\\\\/document.component.html\\\\\\\",\\\\n  styleUrls: [\\\\\\\".\\\\\\\/document.component.scss\\\\\\\", \\\\\\\".\\\\\\\/vs2015.css\\\\\\\"],\\\\n  animations: [defaultRouteAnimation],\\\\n})\\\\nexport class DocumentComponent implements OnInit, OnDestroy, AfterViewInit {\\\\n  docInfo: DocumentInfo | null;\\\\n  isOpen: boolean = true;\\\\n  tocList: TocItem[] | null;\\\\n\\\\n  \\\\\\\/\\\\\\\/ template html中の<div #mdContent>を参照するオブジェクトを定義\\\\n  @ViewChild(\\\\\\\"mdContent\\\\\\\")\\\\n  mdRef: ElementRef<HTMLElement>;\\\\n\\\\n  private fragment: string;\\\\n  private previousPath: string;\\\\n  private onDestroy = new Subject();\\\\n  private routeChangeSubject = new Subject();\\\\n\\\\n  constructor(\\\\n    private markdownService: MarkdownService,\\\\n    private location: Location,\\\\n    private route: ActivatedRoute,\\\\n    private loadingBarService: LoadingBarService,\\\\n    private changeDetector: ChangeDetectorRef,\\\\n  ) {}\\\\n\\\\n  ngOnInit() {\\\\n    ...\\\\n    this.route.url.pipe(takeUntil(this.onDestroy)).subscribe(params => {\\\\n      const docRef = params.map(x => x.path).join(\\\\\\\"\\\\\\\/\\\\\\\");\\\\n      if (docRef !== this.previousPath) {\\\\n        this.docInfo = null;\\\\n        this.isOpen = false;\\\\n        this.getMarkdownDocInfo(docRef);\\\\n      } else {\\\\n        this.loadingBarService.hide();\\\\n      }\\\\n      this.previousPath = docRef;\\\\n    });\\\\n  }\\\\n  ...\\\\n  private getMarkdownDocInfo(docRef: string) {\\\\n    const path = this.location.normalize('assets\\\\\\\/json\\\\\\\/' + docRef + '.json');\\\\n\\\\n    this.markdownService\\\\n      .getDocument(path)\\\\n      .pipe(takeUntil(this.onDestroy))\\\\n      .subscribe(\\\\n        doc => {\\\\n          this.docInfo = doc;\\\\n\\\\n          \\\\\\\/\\\\\\\/ detect change to update virtual DOM\\\\n          \\\\\\\/\\\\\\\/ and allow to access mdContentRef\\\\n          this.cdRef.detectChanges();\\\\n          this.mdContentRef.nativeElement.innerHTML = this.docInfo.bodyHtml;\\\\n\\\\n          this.showGist();\\\\n          this.generateToc();\\\\n          this.routeChangeSubject.next();\\\\n        },\\\\n        err => console.error('MarkdownService', err),\\\\n      );\\\\n  }\\\\n\\\\n  private showGist() {\\\\n    const gists = this.mdContentRef.nativeElement.querySelectorAll('div.gist');\\\\n    gists.forEach(gist => {\\\\n      postscribe(gist, gist.innerHTML);\\\\n    });\\\\n  }\\\\n  ...\\\\n}\\\\n```\\\\n\\\\n`this.mdContentRef.nativeElement.innerHTML = this.docInfo.bodyHtml;`でhtmlをDOMに反映させた後で、`showGist()`関数を呼んでいます。\\\\n\\\\n`showGist`関数では、`this.mdContentRef.nativeElement.querySelectorAll('div.gist')`で`gist`クラスを持つ`div`タグをリストアップし、発見したすべての`div`に対して`div.innerHTML`、すなわちembedのscriptを実行しています。\\\\n\\\\n```ts\\\\npostscribe(\\\\n  gist,           \\\\\\\/\\\\\\\/ div.gistのtag。このdivの中にscript実行結果が書き込まれる。\\\\n  gist.innerHTML  \\\\\\\/\\\\\\\/ div.innerHTML = gistのembed script\\\\n);\\\\n```\\\\n\\\\n## 関連項目\\\\n\\\\n- [postscribe - Github](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/krux\\\\\\\/postscribe)\\\\n- [VSCode: Settings Syncで環境設定を共有する](doc\\\\\\\/env\\\\\\\/vscode-settings-sync)<!--rehype:class=internal-link-->\\\\n\\\"}\"}","{\"docRef\":\"angular\\\/angular-update-from-13-to-14\",\"content\":\"{\\\"title\\\":\\\"Angular v13からv14へのアップデート\\\",\\\"date\\\":\\\"2022-08-11\\\",\\\"category\\\":\\\"Angular\\\",\\\"tag\\\":[\\\"angular\\\",\\\"angular material\\\",\\\"ngrx\\\",\\\"version up\\\"],\\\"body\\\":\\\"\\\\n\\\\nAngular routerがv14からtitle propertyを持つようになり、NGRXでもgetTitle selectorで簡単にタイトルをゲットできるようになるようです。これをモチベーションにangular 13から14へのアップグレードを実施しました。\\\\n\\\\n## v13 to v14のアップデート手順\\\\n\\\\n[Angular Update Guide](https:\\\\\\\/\\\\\\\/update.angular.io\\\\\\\/?l=3&v=13.0-14.0)を参考に作業を実施。\\\\n\\\\n### Angular関連ライブラリのアップデート\\\\n\\\\n``` powershell\\\\n> yarn run ng update @angular\\\\\\\/core@14 @angular\\\\\\\/cli@14\\\\n\\\\nyarn run v1.22.18\\\\n$ ng update @angular\\\\\\\/core@14 @angular\\\\\\\/cli@14\\\\nThe installed Angular CLI version is outdated.\\\\nInstalling a temporary Angular CLI versioned 14.1.2 to perform the update.\\\\n✔ Package successfully installed.\\\\nUsing package manager: yarn\\\\nCollecting installed dependencies...\\\\nFound 51 dependencies.\\\\nFetching dependency metadata from registry...\\\\n                  Package \\\\\\\"@angular-eslint\\\\\\\/schematics\\\\\\\" has an incompatible peer dependency to \\\\\\\"@angular\\\\\\\/cli\\\\\\\" (requires \\\\\\\">= 13.0.0 < 14.0.0\\\\\\\", would install \\\\\\\"14.1.2\\\\\\\").\\\\n× Migration failed: Incompatible peer dependencies found.\\\\nPeer dependency warnings when installing dependencies means that those dependencies might not work correctly together.\\\\nYou can use the '--force' option to ignore incompatible peer dependencies and instead address these warnings later.\\\\n  See \\\\\\\"C:\\\\\\\\Users\\\\\\\\METALA~1\\\\\\\\AppData\\\\\\\\Local\\\\\\\\Temp\\\\\\\\ng-WtdDcB\\\\\\\\angular-errors.log\\\\\\\" for further details.\\\\n\\\\nerror Command failed with exit code 1.\\\\n```\\\\n\\\\nエラーメッセージを見る感じ`@angular-eslint\\\\\\\/schematics`も一緒にupdateしたほうが良さそうです。\\\\n\\\\n``` powershell\\\\n>  yarn run ng update @angular\\\\\\\/core@14 @angular\\\\\\\/cli@14 @angular-eslint\\\\\\\/schematics@14\\\\n\\\\nyarn run v1.22.18\\\\n$ ng update @angular\\\\\\\/core@14 @angular\\\\\\\/cli@14 @angular-eslint\\\\\\\/schematics@14\\\\nThe installed Angular CLI version is outdated.\\\\nInstalling a temporary Angular CLI versioned 14.1.2 to perform the update.\\\\n✔ Package successfully installed.\\\\nUsing package manager: yarn\\\\nCollecting installed dependencies...\\\\nFound 51 dependencies.\\\\nFetching dependency metadata from registry...\\\\n    Updating package.json with dependency @angular-devkit\\\\\\\/build-angular @ \\\\\\\"14.1.2\\\\\\\" (was \\\\\\\"13.1.2\\\\\\\")...\\\\n    Updating package.json with dependency @angular-eslint\\\\\\\/builder @ \\\\\\\"14.0.2\\\\\\\" (was \\\\\\\"13.0.1\\\\\\\")...\\\\n    Updating package.json with dependency @angular-eslint\\\\\\\/eslint-plugin @ \\\\\\\"14.0.2\\\\\\\" (was \\\\\\\"13.0.1\\\\\\\")...\\\\n    Updating package.json with dependency @angular-eslint\\\\\\\/eslint-plugin-template @ \\\\\\\"14.0.2\\\\\\\" (was \\\\\\\"13.0.1\\\\\\\")...\\\\n    Updating package.json with dependency @angular-eslint\\\\\\\/schematics @ \\\\\\\"14.0.2\\\\\\\" (was \\\\\\\"13.0.1\\\\\\\")...\\\\n    Updating package.json with dependency @angular-eslint\\\\\\\/template-parser @ \\\\\\\"14.0.2\\\\\\\" (was \\\\\\\"13.0.1\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/cli @ \\\\\\\"14.1.2\\\\\\\" (was \\\\\\\"13.1.2\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/compiler-cli @ \\\\\\\"14.1.2\\\\\\\" (was \\\\\\\"13.1.1\\\\\\\")...\\\\n    Updating package.json with dependency typescript @ \\\\\\\"4.7.4\\\\\\\" (was \\\\\\\"4.5.4\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/animations @ \\\\\\\"14.1.2\\\\\\\" (was \\\\\\\"13.1.1\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/common @ \\\\\\\"14.1.2\\\\\\\" (was \\\\\\\"13.1.1\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/compiler @ \\\\\\\"14.1.2\\\\\\\" (was \\\\\\\"13.1.1\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/core @ \\\\\\\"14.1.2\\\\\\\" (was \\\\\\\"13.1.1\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/forms @ \\\\\\\"14.1.2\\\\\\\" (was \\\\\\\"13.1.1\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/platform-browser @ \\\\\\\"14.1.2\\\\\\\" (was \\\\\\\"13.1.1\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/platform-browser-dynamic @ \\\\\\\"14.1.2\\\\\\\" (was \\\\\\\"13.1.1\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/router @ \\\\\\\"14.1.2\\\\\\\" (was \\\\\\\"13.1.1\\\\\\\")...\\\\nUPDATE package.json (2301 bytes)\\\\n✔ Packages successfully installed.\\\\n** Executing migrations of package '@angular-eslint\\\\\\\/schematics' **\\\\n\\\\n> Updates @angular-eslint to v14.\\\\nUPDATE package.json (2307 bytes)\\\\nUPDATE angular.json (4143 bytes)\\\\n✔ Packages installed successfully.\\\\n  Migration completed.\\\\n\\\\n** Executing migrations of package '@angular\\\\\\\/cli' **\\\\n\\\\n> Remove 'defaultProject' option from workspace configuration.\\\\n  The project to use will be determined from the current working directory.\\\\nUPDATE angular.json (4095 bytes)\\\\n  Migration completed.\\\\n\\\\n> Remove 'showCircularDependencies' option from browser and server builders.\\\\n  Migration completed.\\\\n\\\\n> Replace 'defaultCollection' option in workspace configuration with 'schematicCollections'.\\\\nUPDATE angular.json (4112 bytes)\\\\n  Migration completed.\\\\n\\\\nUPDATE tsconfig.json (936 bytes)  Migration completed.\\\\n\\\\n** Executing migrations of package '@angular\\\\\\\/core' **\\\\n\\\\n> As of Angular version 13, `entryComponents` are no longer necessary.\\\\n  Migration completed.\\\\n\\\\n> In Angular version 14, the `pathMatch` property of `Routes` was updated to be a strict union of the two valid options: `'full'|'prefix'`.\\\\n  `Routes` and `Route` variables need an explicit type so TypeScript does not infer the property as the looser `string`.\\\\n  Migration completed.\\\\n\\\\n> As of Angular version 14, Forms model classes accept a type parameter, and existing usages must be opted out to preserve backwards-compatibility.\\\\n  Migration completed.\\\\n\\\\nDone in 156.21s.\\\\n```\\\\n\\\\n正常終了しました。\\\\n\\\\n### Angular Material関連ライブラリのアップデート\\\\n\\\\n続けてangular materialのアップグレードを行おうとしたところ、先の変更をcommitしてからじゃないとダメ！と怒られてしまいました。\\\\n\\\\n``` powershell\\\\n> yarn run ng update @angular\\\\\\\/material@14\\\\n\\\\nyarn run v1.22.18\\\\n$ ng update @angular\\\\\\\/material@14\\\\nError: Repository is not clean. Please commit or stash any changes before updating.\\\\nerror Command failed with exit code 1.\\\\n```\\\\n\\\\nコミット後に再実施します。\\\\n\\\\n``` powershell\\\\n> yarn run ng update @angular\\\\\\\/material@14\\\\n\\\\nyarn run v1.22.18\\\\n$ ng update @angular\\\\\\\/material@14\\\\nUsing package manager: yarn\\\\nCollecting installed dependencies...\\\\nFound 51 dependencies.\\\\nFetching dependency metadata from registry...\\\\n    Updating package.json with dependency @angular\\\\\\\/cdk @ \\\\\\\"14.1.1\\\\\\\" (was \\\\\\\"13.1.3\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/material @ \\\\\\\"14.1.1\\\\\\\" (was \\\\\\\"13.1.3\\\\\\\")...\\\\nUPDATE package.json (2306 bytes)\\\\n✔ Packages successfully installed.\\\\n** Executing migrations of package '@angular\\\\\\\/cdk' **\\\\n\\\\n> Updates the Angular CDK to v14.\\\\n\\\\n      ✓  Updated Angular CDK to version 14\\\\n\\\\n  Migration completed.\\\\n\\\\n** Executing migrations of package '@angular\\\\\\\/material' **\\\\n\\\\n> Updates the Angular Material to v14.\\\\n\\\\n      ✓  Updated Angular Material to version 14\\\\n\\\\n  Migration completed.\\\\n\\\\nDone in 38.79s.\\\\n```\\\\n\\\\nBasicの手順は以上で終了です。この時点でのpackage.jsonをチェックします。\\\\n\\\\n``` json\\\\n{\\\\n  \\\\\\\"name\\\\\\\": \\\\\\\"net6-markdown-web-engine\\\\\\\",\\\\n  \\\\\\\"version\\\\\\\": \\\\\\\"0.0.0\\\\\\\",\\\\n  \\\\\\\"scripts\\\\\\\": {\\\\n    \\\\\\\"ng\\\\\\\": \\\\\\\"ng\\\\\\\",\\\\n    \\\\\\\"start\\\\\\\": \\\\\\\"ng serve --ssl --ssl-cert %APPDATA%\\\\\\\\\\\\\\\\ASP.NET\\\\\\\\\\\\\\\\https\\\\\\\\\\\\\\\\%npm_package_name%.pem --ssl-key %APPDATA%\\\\\\\\\\\\\\\\ASP.NET\\\\\\\\\\\\\\\\https\\\\\\\\\\\\\\\\%npm_package_name%.key\\\\\\\",\\\\n    \\\\\\\"build\\\\\\\": \\\\\\\"ng build\\\\\\\",\\\\n    \\\\\\\"watch\\\\\\\": \\\\\\\"ng build --watch --configuration development\\\\\\\",\\\\n    \\\\\\\"test\\\\\\\": \\\\\\\"ng test\\\\\\\",\\\\n    \\\\\\\"prestart\\\\\\\": \\\\\\\"node aspnetcore-https\\\\\\\",\\\\n    \\\\\\\"lint\\\\\\\": \\\\\\\"ng lint\\\\\\\"\\\\n  },\\\\n  \\\\\\\"private\\\\\\\": true,\\\\n  \\\\\\\"dependencies\\\\\\\": {\\\\n    \\\\\\\"@angular\\\\\\\/animations\\\\\\\": \\\\\\\"^14.1.2\\\\\\\",\\\\n    \\\\\\\"@angular\\\\\\\/cdk\\\\\\\": \\\\\\\"14.1.1\\\\\\\",\\\\n    \\\\\\\"@angular\\\\\\\/common\\\\\\\": \\\\\\\"^14.1.2\\\\\\\",\\\\n    \\\\\\\"@angular\\\\\\\/compiler\\\\\\\": \\\\\\\"^14.1.2\\\\\\\",\\\\n    \\\\\\\"@angular\\\\\\\/core\\\\\\\": \\\\\\\"^14.1.2\\\\\\\",\\\\n    \\\\\\\"@angular\\\\\\\/forms\\\\\\\": \\\\\\\"^14.1.2\\\\\\\",\\\\n    \\\\\\\"@angular\\\\\\\/material\\\\\\\": \\\\\\\"14.1.1\\\\\\\",\\\\n    \\\\\\\"@angular\\\\\\\/platform-browser\\\\\\\": \\\\\\\"^14.1.2\\\\\\\",\\\\n    \\\\\\\"@angular\\\\\\\/platform-browser-dynamic\\\\\\\": \\\\\\\"^14.1.2\\\\\\\",\\\\n    \\\\\\\"@angular\\\\\\\/router\\\\\\\": \\\\\\\"^14.1.2\\\\\\\",\\\\n    \\\\\\\"@mdi\\\\\\\/angular-material\\\\\\\": \\\\\\\"^7.0.96\\\\\\\",\\\\n    \\\\\\\"@ngrx\\\\\\\/effects\\\\\\\": \\\\\\\"^13.2.0\\\\\\\",\\\\n    \\\\\\\"@ngrx\\\\\\\/router-store\\\\\\\": \\\\\\\"^13.2.0\\\\\\\",\\\\n    \\\\\\\"@ngrx\\\\\\\/store\\\\\\\": \\\\\\\"^13.0.2\\\\\\\",\\\\n    \\\\\\\"@ngrx\\\\\\\/store-devtools\\\\\\\": \\\\\\\"^13.2.0\\\\\\\",\\\\n    \\\\\\\"jest-editor-support\\\\\\\": \\\\\\\"*\\\\\\\",\\\\n    \\\\\\\"rehype-attr\\\\\\\": \\\\\\\"^2.0.8\\\\\\\",\\\\n    \\\\\\\"rehype-autolink-headings\\\\\\\": \\\\\\\"^6.1.1\\\\\\\",\\\\n    \\\\\\\"rehype-external-links\\\\\\\": \\\\\\\"^1.0.1\\\\\\\",\\\\n    \\\\\\\"rehype-prism-plus\\\\\\\": \\\\\\\"^1.4.2\\\\\\\",\\\\n    \\\\\\\"rehype-raw\\\\\\\": \\\\\\\"^6.1.1\\\\\\\",\\\\n    \\\\\\\"rehype-slug\\\\\\\": \\\\\\\"^5.0.1\\\\\\\",\\\\n    \\\\\\\"rehype-stringify\\\\\\\": \\\\\\\"^9.0.3\\\\\\\",\\\\n    \\\\\\\"remark-parse\\\\\\\": \\\\\\\"^10.0.1\\\\\\\",\\\\n    \\\\\\\"remark-rehype\\\\\\\": \\\\\\\"^10.1.0\\\\\\\",\\\\n    \\\\\\\"rxjs\\\\\\\": \\\\\\\"~7.4.0\\\\\\\",\\\\n    \\\\\\\"tslib\\\\\\\": \\\\\\\"^2.3.0\\\\\\\",\\\\n    \\\\\\\"unified\\\\\\\": \\\\\\\"^10.1.2\\\\\\\",\\\\n    \\\\\\\"zone.js\\\\\\\": \\\\\\\"~0.11.4\\\\\\\"\\\\n  },\\\\n  \\\\\\\"devDependencies\\\\\\\": {\\\\n    \\\\\\\"@angular-devkit\\\\\\\/build-angular\\\\\\\": \\\\\\\"^14.1.2\\\\\\\",\\\\n    \\\\\\\"@angular-eslint\\\\\\\/builder\\\\\\\": \\\\\\\"14.0.2\\\\\\\",\\\\n    \\\\\\\"@angular-eslint\\\\\\\/eslint-plugin\\\\\\\": \\\\\\\"14.0.2\\\\\\\",\\\\n    \\\\\\\"@angular-eslint\\\\\\\/eslint-plugin-template\\\\\\\": \\\\\\\"14.0.2\\\\\\\",\\\\n    \\\\\\\"@angular-eslint\\\\\\\/schematics\\\\\\\": \\\\\\\"14.0.2\\\\\\\",\\\\n    \\\\\\\"@angular-eslint\\\\\\\/template-parser\\\\\\\": \\\\\\\"14.0.2\\\\\\\",\\\\n    \\\\\\\"@angular\\\\\\\/cli\\\\\\\": \\\\\\\"^14.1.2\\\\\\\",\\\\n    \\\\\\\"@angular\\\\\\\/compiler-cli\\\\\\\": \\\\\\\"^14.1.2\\\\\\\",\\\\n    \\\\\\\"@ngrx\\\\\\\/schematics\\\\\\\": \\\\\\\"^14.0.2\\\\\\\",\\\\n    \\\\\\\"@types\\\\\\\/jasmine\\\\\\\": \\\\\\\"~3.10.0\\\\\\\",\\\\n    \\\\\\\"@types\\\\\\\/node\\\\\\\": \\\\\\\"^12.11.1\\\\\\\",\\\\n    \\\\\\\"@typescript-eslint\\\\\\\/eslint-plugin\\\\\\\": \\\\\\\"^5.29.0\\\\\\\",\\\\n    \\\\\\\"@typescript-eslint\\\\\\\/parser\\\\\\\": \\\\\\\"^5.29.0\\\\\\\",\\\\n    \\\\\\\"eslint\\\\\\\": \\\\\\\"^8.18.0\\\\\\\",\\\\n    \\\\\\\"eslint-plugin-ngrx\\\\\\\": \\\\\\\"^2.0.0\\\\\\\",\\\\n    \\\\\\\"jasmine-core\\\\\\\": \\\\\\\"~3.10.0\\\\\\\",\\\\n    \\\\\\\"karma\\\\\\\": \\\\\\\"~6.3.0\\\\\\\",\\\\n    \\\\\\\"karma-chrome-launcher\\\\\\\": \\\\\\\"~3.1.0\\\\\\\",\\\\n    \\\\\\\"karma-coverage\\\\\\\": \\\\\\\"~2.1.0\\\\\\\",\\\\n    \\\\\\\"karma-jasmine\\\\\\\": \\\\\\\"~4.0.0\\\\\\\",\\\\n    \\\\\\\"karma-jasmine-html-reporter\\\\\\\": \\\\\\\"~1.7.0\\\\\\\",\\\\n    \\\\\\\"typescript\\\\\\\": \\\\\\\"~4.7.4\\\\\\\"\\\\n  }\\\\n}\\\\n```\\\\n\\\\n### NGRX関連ライブラリのアップデート\\\\n\\\\nNGRX系がv13なので、これもupdateします。\\\\n\\\\n``` powershell\\\\n> yarn run ng update @ngrx\\\\\\\/store@14\\\\n\\\\nyarn run v1.22.18\\\\n$ ng update @ngrx\\\\\\\/store@14\\\\nUsing package manager: yarn\\\\nCollecting installed dependencies...\\\\nFound 51 dependencies.\\\\nFetching dependency metadata from registry...\\\\n    Updating package.json with dependency @ngrx\\\\\\\/schematics @ \\\\\\\"14.1.0\\\\\\\" (was \\\\\\\"14.0.2\\\\\\\")...\\\\n    Updating package.json with dependency @ngrx\\\\\\\/effects @ \\\\\\\"14.1.0\\\\\\\" (was \\\\\\\"13.2.0\\\\\\\")...\\\\n    Updating package.json with dependency @ngrx\\\\\\\/router-store @ \\\\\\\"14.1.0\\\\\\\" (was \\\\\\\"13.2.0\\\\\\\")...\\\\n    Updating package.json with dependency @ngrx\\\\\\\/store @ \\\\\\\"14.1.0\\\\\\\" (was \\\\\\\"13.0.2\\\\\\\")...\\\\n    Updating package.json with dependency @ngrx\\\\\\\/store-devtools @ \\\\\\\"14.1.0\\\\\\\" (was \\\\\\\"13.2.0\\\\\\\")...\\\\n    Updating package.json with dependency rxjs @ \\\\\\\"7.5.6\\\\\\\" (was \\\\\\\"7.4.0\\\\\\\")...\\\\nUPDATE package.json (2306 bytes)\\\\n✔ Packages successfully installed.\\\\n** Executing migrations of package '@ngrx\\\\\\\/router-store' **\\\\n\\\\n> The road to v14.\\\\n  Migration completed.\\\\n\\\\nDone in 35.67s.\\\\n```\\\\n\\\\n## 関連項目\\\\n\\\\n- [Angular v14 is now available!](https:\\\\\\\/\\\\\\\/blog.angular.io\\\\\\\/angular-v14-is-now-available-391a6db736af)\\\\n- [router.selectors.ts - NGRX](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/santoshyadavdev\\\\\\\/platform\\\\\\\/blob\\\\\\\/master\\\\\\\/projects\\\\\\\/ngrx.io\\\\\\\/content\\\\\\\/examples\\\\\\\/router-store-selectors\\\\\\\/src\\\\\\\/app\\\\\\\/router.selectors.ts)\\\\n\\\"}\"}","{\"docRef\":\"angular\\\/angular-update-from-14-to-15\",\"content\":\"{\\\"title\\\":\\\"Angular v14からv15へのアップデート\\\",\\\"date\\\":\\\"2023-01-08\\\",\\\"category\\\":\\\"Angular\\\",\\\"tag\\\":[\\\"angular\\\",\\\"angular material\\\",\\\"ngrx\\\",\\\"version up\\\"],\\\"body\\\":\\\"\\\\n\\\\nAngular v15ではstandalone componentがstableになったり、Angular MaterialがMDC([Material Design Component for Web](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/material-components\\\\\\\/material-components-web))ベースに変更になったりと、色々な変更点が入っているようです。\\\\n\\\\n冬休みにまとまった時間が取れたので、v15へのアップデートとfull standalone component化にチャレンジしてみました。\\\\n\\\\nやってみた感想としては\\\\n\\\\n- Standalone componentは、新規appの作成でイチから作成するなら使って損はなさそう。既存のappをfull standalone component化するのは小規模でもかなり大変だったので大規模appではやりきれなそう\\\\n- MDC-based Angular Materialへの移行も、なかなかに手間がかかる。スタイルの見直しも必要になるのでレビューの良い機会になる\\\\n- esprojが謎すぎる。どこかで動作原理をしっかり把握しないといけない\\\\n\\\\nという感じでした。\\\\n\\\\n変更内容の詳細は[コチラのPR](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/takumura\\\\\\\/tech-log\\\\\\\/pull\\\\\\\/42\\\\\\\/files)から確認できます。\\\\n\\\\n## v14 to v15のアップデート手順\\\\n\\\\n[Angular Update Guide](https:\\\\\\\/\\\\\\\/update.angular.io\\\\\\\/?l=3&v=14.0-15.0)を参考に作業を実施。\\\\n\\\\n### node version\\\\n\\\\n`16.15.0`をinstallしていたので、2023-01-01時点のlts(`18.12.1`)に更新。。。したのですが大間違いでした。\\\\n\\\\n後になってVisual Studio2022のデバッグが出来なくなっていることに気が付きました。かなりハマって、最終的にはStackOverflowの記事:[Visual Studio blocks on deploying a Standalone Angular project](https:\\\\\\\/\\\\\\\/stackoverflow.com\\\\\\\/questions\\\\\\\/73005681\\\\\\\/visual-studio-blocks-on-deploying-a-standalone-angular-project)に救われました。\\\\n\\\\n結論としては、今のesprojはnode v18で動かないようです。何故動かないのかわからないので、今度調査したいと思いました。\\\\n\\\\n### angularのバージョンアップ\\\\n\\\\n`@angular\\\\\\\/core`、`@angular\\\\\\\/cli`、`@angular-eslint\\\\\\\/schematics`の3ライブラリを@15にバージョンアップ。\\\\n\\\\n``` powershell\\\\n> ng update @angular\\\\\\\/core@15 @angular\\\\\\\/cli@15 @angular-eslint\\\\\\\/schematics@15\\\\nUsing package manager: yarn\\\\nCollecting installed dependencies...\\\\nFound 55 dependencies.\\\\nFetching dependency metadata from registry...\\\\n    Updating package.json with dependency @angular-devkit\\\\\\\/build-angular @ \\\\\\\"15.0.4\\\\\\\" (was \\\\\\\"14.1.2\\\\\\\")...\\\\n    Updating package.json with dependency @angular-eslint\\\\\\\/builder @ \\\\\\\"15.1.0\\\\\\\" (was \\\\\\\"14.0.2\\\\\\\")...\\\\n    Updating package.json with dependency @angular-eslint\\\\\\\/eslint-plugin @ \\\\\\\"15.1.0\\\\\\\" (was \\\\\\\"14.0.2\\\\\\\")...\\\\n    Updating package.json with dependency @angular-eslint\\\\\\\/eslint-plugin-template @ \\\\\\\"15.1.0\\\\\\\" (was \\\\\\\"14.0.2\\\\\\\")...\\\\n    Updating package.json with dependency @angular-eslint\\\\\\\/schematics @ \\\\\\\"15.1.0\\\\\\\" (was \\\\\\\"14.0.2\\\\\\\")...\\\\n    Updating package.json with dependency @angular-eslint\\\\\\\/template-parser @ \\\\\\\"15.1.0\\\\\\\" (was \\\\\\\"14.0.2\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/cli @ \\\\\\\"15.0.4\\\\\\\" (was \\\\\\\"14.1.2\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/compiler-cli @ \\\\\\\"15.0.4\\\\\\\" (was \\\\\\\"14.1.2\\\\\\\")...\\\\n    Updating package.json with dependency typescript @ \\\\\\\"4.8.4\\\\\\\" (was \\\\\\\"4.7.4\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/animations @ \\\\\\\"15.0.4\\\\\\\" (was \\\\\\\"14.1.2\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/common @ \\\\\\\"15.0.4\\\\\\\" (was \\\\\\\"14.1.2\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/compiler @ \\\\\\\"15.0.4\\\\\\\" (was \\\\\\\"14.1.2\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/core @ \\\\\\\"15.0.4\\\\\\\" (was \\\\\\\"14.1.2\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/forms @ \\\\\\\"15.0.4\\\\\\\" (was \\\\\\\"14.1.2\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/platform-browser @ \\\\\\\"15.0.4\\\\\\\" (was \\\\\\\"14.1.2\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/platform-browser-dynamic @ \\\\\\\"15.0.4\\\\\\\" (was \\\\\\\"14.1.2\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/router @ \\\\\\\"15.0.4\\\\\\\" (was \\\\\\\"14.1.2\\\\\\\")...\\\\nUPDATE package.json (2463 bytes)\\\\n✔ Packages successfully installed.\\\\n** Executing migrations of package '@angular-eslint\\\\\\\/schematics' **\\\\n\\\\n> Updates @angular-eslint to v15.\\\\nUPDATE package.json (2464 bytes)\\\\nUPDATE angular.json (4504 bytes)\\\\n✔ Packages installed successfully.\\\\n  Migration completed.\\\\n\\\\n** Executing migrations of package '@angular\\\\\\\/cli' **\\\\n\\\\n> Remove Browserslist configuration files that matches the Angular CLI default configuration.\\\\nDELETE .browserslistrc\\\\n  Migration completed.\\\\n\\\\n> Remove exported `@angular\\\\\\\/platform-server` `renderModule` method.\\\\n  The `renderModule` method is now exported by the Angular CLI.\\\\n  Migration completed.\\\\n\\\\n> Remove no longer needed require calls in Karma builder main file.\\\\nUPDATE src\\\\\\\/test.ts (520 bytes)\\\\n  Migration completed.\\\\n\\\\n> Update TypeScript compiler `target` and set `useDefineForClassFields`.\\\\n  These changes are for IDE purposes as TypeScript compiler options `target` and `useDefineForClassFields` are set to `ES2022` and `false` respectively by the Angular CLI.\\\\n  To control ECMA version and features use the Browerslist configuration.\\\\nUPDATE tsconfig.json (1018 bytes)\\\\n  Migration completed.\\\\n\\\\n> Remove options from 'angular.json' that are no longer supported by the official builders.\\\\n  Migration completed.\\\\n\\\\n** Executing migrations of package '@angular\\\\\\\/core' **\\\\n\\\\n> In Angular version 15, the deprecated `relativeLinkResolution` config parameter of the Router is removed.\\\\n  This migration removes all `relativeLinkResolution` fields from the Router config objects.\\\\n  Migration completed.\\\\n\\\\n> Since Angular v15, the `RouterLink` contains the logic of the `RouterLinkWithHref` directive.\\\\n  This migration replaces all `RouterLinkWithHref` references with `RouterLink`.\\\\n  Migration completed.\\\\n```\\\\n\\\\n### angular materialのバージョンアップ\\\\n\\\\n`@angular\\\\\\\/material`のライブラリを@15にバージョンアップ。\\\\n\\\\n``` powershell\\\\n> ng update @angular\\\\\\\/material@15\\\\nUsing package manager: yarn\\\\nCollecting installed dependencies...\\\\nFound 55 dependencies.\\\\nFetching dependency metadata from registry...\\\\n    Updating package.json with dependency @angular\\\\\\\/cdk @ \\\\\\\"15.0.3\\\\\\\" (was \\\\\\\"14.1.1\\\\\\\")...\\\\n    Updating package.json with dependency @angular\\\\\\\/material @ \\\\\\\"15.0.3\\\\\\\" (was \\\\\\\"14.1.1\\\\\\\")...\\\\nUPDATE package.json (2463 bytes)\\\\n✔ Packages successfully installed.\\\\n** Executing migrations of package '@angular\\\\\\\/cdk' **\\\\n\\\\n> Updates the Angular CDK to v15.\\\\n\\\\n      ✓  Updated Angular CDK to version 15\\\\n\\\\n  Migration completed.\\\\n\\\\n** Executing migrations of package '@angular\\\\\\\/material' **\\\\n\\\\n> Updates the Angular Material to v15.\\\\n\\\\n      ✓  Updated Angular Material to version 15\\\\n\\\\nUPDATE src\\\\\\\/app\\\\\\\/shared\\\\\\\/material.module.ts (1971 bytes)\\\\nUPDATE src\\\\\\\/app\\\\\\\/markdown-document\\\\\\\/search\\\\\\\/search.component.ts (7215 bytes)\\\\nUPDATE src\\\\\\\/styles.scss (2523 bytes)\\\\nUPDATE src\\\\\\\/_variables.scss (2424 bytes)\\\\n  Migration completed.\\\\n```\\\\n\\\\nMDCベースのcomponentに移行したため、多くのmaterial componentが`Legacy`付きの旧componentに置き換わっていました。またTypographyの指定方法にも変更がある模様。後で[Migrating to MDC-based Angular Material Components](https:\\\\\\\/\\\\\\\/material.angular.io\\\\\\\/guide\\\\\\\/mdc-migration)を読みながらrefineしました。\\\\n\\\\n## ngrxのバージョンアップ\\\\n\\\\n[V15 Update Guide](https:\\\\\\\/\\\\\\\/ngrx.io\\\\\\\/guide\\\\\\\/migration\\\\\\\/v15)を参考にngrxを@15にバージョンアップ\\\\n\\\\n``` powershell\\\\n> ng update @ngrx\\\\\\\/store@15\\\\nUsing package manager: yarn\\\\nCollecting installed dependencies...\\\\nFound 55 dependencies.\\\\nFetching dependency metadata from registry...\\\\n    Updating package.json with dependency @ngrx\\\\\\\/schematics @ \\\\\\\"15.1.0\\\\\\\" (was \\\\\\\"14.1.0\\\\\\\")...\\\\n    Updating package.json with dependency @ngrx\\\\\\\/effects @ \\\\\\\"15.1.0\\\\\\\" (was \\\\\\\"14.1.0\\\\\\\")...\\\\n    Updating package.json with dependency @ngrx\\\\\\\/router-store @ \\\\\\\"15.1.0\\\\\\\" (was \\\\\\\"14.1.0\\\\\\\")...\\\\n    Updating package.json with dependency @ngrx\\\\\\\/store @ \\\\\\\"15.1.0\\\\\\\" (was \\\\\\\"14.1.0\\\\\\\")...\\\\n    Updating package.json with dependency @ngrx\\\\\\\/store-devtools @ \\\\\\\"15.1.0\\\\\\\" (was \\\\\\\"14.1.0\\\\\\\")...\\\\nUPDATE package.json (2463 bytes)\\\\n✔ Packages successfully installed.\\\\n** Executing migrations of package '@ngrx\\\\\\\/effects' **\\\\n\\\\n> The road to v15 beta.\\\\n  Migration completed.\\\\n```\\\\n\\\\n### ng build error\\\\n\\\\nng buildを実行したところ`ERROR: Unterminated string token`が発生するようになっていました。\\\\n\\\\n``` powershell\\\\n> yarn build\\\\nyarn run v1.22.19\\\\n$ ng build\\\\n✔ Browser application bundle generation complete.\\\\n\\\\nWarning: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/environments\\\\\\\/environment.prod.ts is part of the TypeScript compilation but it's unused.\\\\nAdd only entry points to the 'files' or 'include' properties in your tsconfig.\\\\n\\\\n\\\\n\\\\n.\\\\\\\/src\\\\\\\/main.ts - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@ngtools\\\\\\\/webpack\\\\\\\/src\\\\\\\/ivy\\\\\\\/index.js):\\\\nError: Transform failed with 1 error:\\\\nC:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/app.component.scss:64:84: ERROR: Unterminated string token\\\\n\\\\n.\\\\\\\/src\\\\\\\/polyfills.ts - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@ngtools\\\\\\\/webpack\\\\\\\/src\\\\\\\/ivy\\\\\\\/index.js):\\\\nError: Transform failed with 1 error:\\\\nC:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/app.component.scss:64:84: ERROR: Unterminated string token\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/api.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\api.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/noSourceMaps.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/src\\\\\\\/prism-vsc-dark-plus.css?ngGlobalStyle - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/mini-css-extract-plugin\\\\\\\/dist\\\\\\\/loader.js):\\\\nHookWebpackError: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/src\\\\\\\/_variables.scss?ngGlobalStyle - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/mini-css-extract-plugin\\\\\\\/dist\\\\\\\/loader.js):\\\\nHookWebpackError: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/src\\\\\\\/styles.scss?ngGlobalStyle - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/mini-css-extract-plugin\\\\\\\/dist\\\\\\\/loader.js):\\\\nHookWebpackError: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n\\\\nerror Command failed with exit code 1.\\\\ninfo Visit https:\\\\\\\/\\\\\\\/yarnpkg.com\\\\\\\/en\\\\\\\/docs\\\\\\\/cli\\\\\\\/run for documentation about this command.\\\\n```\\\\n\\\\n[editor.component.scss:17:100: ERROR: Unterminated string token - Angular + Scss](https:\\\\\\\/\\\\\\\/stackoverflow.com\\\\\\\/a\\\\\\\/74427603)によると、Angular v15からbuildのdefaultがprodutionになり、`\\\\\\\"optimization\\\\\\\": true`の状態でbuildされるため正しいエラーメッセージになっていない模様。\\\\n\\\\n一時的にproduction buildのoptimizationをfalseに変更。\\\\n\\\\n``` diff\\\\n{\\\\n  \\\\\\\"$schema\\\\\\\": \\\\\\\".\\\\\\\/node_modules\\\\\\\/@angular\\\\\\\/cli\\\\\\\/lib\\\\\\\/config\\\\\\\/schema.json\\\\\\\",\\\\n  \\\\\\\"version\\\\\\\": 1,\\\\n  \\\\\\\"newProjectRoot\\\\\\\": \\\\\\\"projects\\\\\\\",\\\\n  \\\\\\\"projects\\\\\\\": {\\\\n    \\\\\\\"net6-markdown-web-engine\\\\\\\": {\\\\n      \\\\\\\"projectType\\\\\\\": \\\\\\\"application\\\\\\\",\\\\n      \\\\\\\"schematics\\\\\\\": {\\\\n        \\\\\\\"@schematics\\\\\\\/angular:component\\\\\\\": {\\\\n          \\\\\\\"style\\\\\\\": \\\\\\\"scss\\\\\\\"\\\\n        },\\\\n        \\\\\\\"@schematics\\\\\\\/angular:application\\\\\\\": {\\\\n          \\\\\\\"strict\\\\\\\": true\\\\n        }\\\\n      },\\\\n      \\\\\\\"root\\\\\\\": \\\\\\\"\\\\\\\",\\\\n      \\\\\\\"sourceRoot\\\\\\\": \\\\\\\"src\\\\\\\",\\\\n      \\\\\\\"prefix\\\\\\\": \\\\\\\"app\\\\\\\",\\\\n      \\\\\\\"architect\\\\\\\": {\\\\n        \\\\\\\"build\\\\\\\": {\\\\n          \\\\\\\"builder\\\\\\\": \\\\\\\"@angular-devkit\\\\\\\/build-angular:browser\\\\\\\",\\\\n          \\\\\\\"options\\\\\\\": {\\\\n            \\\\\\\"outputPath\\\\\\\": \\\\\\\"dist\\\\\\\/tech-log\\\\\\\",\\\\n            \\\\\\\"index\\\\\\\": \\\\\\\"src\\\\\\\/index.html\\\\\\\",\\\\n            \\\\\\\"main\\\\\\\": \\\\\\\"src\\\\\\\/main.ts\\\\\\\",\\\\n            \\\\\\\"polyfills\\\\\\\": \\\\\\\"src\\\\\\\/polyfills.ts\\\\\\\",\\\\n            \\\\\\\"tsConfig\\\\\\\": \\\\\\\"tsconfig.app.json\\\\\\\",\\\\n            \\\\\\\"inlineStyleLanguage\\\\\\\": \\\\\\\"scss\\\\\\\",\\\\n            \\\\\\\"assets\\\\\\\": [\\\\n              \\\\\\\"src\\\\\\\/favicon.ico\\\\\\\",\\\\n              \\\\\\\"src\\\\\\\/assets\\\\\\\",\\\\n              {\\\\n                \\\\\\\"glob\\\\\\\": \\\\\\\"mdi.svg\\\\\\\",\\\\n                \\\\\\\"input\\\\\\\": \\\\\\\".\\\\\\\/node_modules\\\\\\\/@mdi\\\\\\\/angular-material\\\\\\\",\\\\n                \\\\\\\"output\\\\\\\": \\\\\\\".\\\\\\\/assets\\\\\\\"\\\\n              }\\\\n            ],\\\\n            \\\\\\\"styles\\\\\\\": [\\\\\\\"src\\\\\\\/_variables.scss\\\\\\\", \\\\\\\"src\\\\\\\/styles.scss\\\\\\\", \\\\\\\"src\\\\\\\/prism-vsc-dark-plus.css\\\\\\\"],\\\\n            \\\\\\\"stylePreprocessorOptions\\\\\\\": {\\\\n              \\\\\\\"includePaths\\\\\\\": [\\\\\\\"src\\\\\\\"]\\\\n            },\\\\n            \\\\\\\"scripts\\\\\\\": []\\\\n          },\\\\n          \\\\\\\"configurations\\\\\\\": {\\\\n            \\\\\\\"production\\\\\\\": {\\\\n              \\\\\\\"budgets\\\\\\\": [\\\\n                {\\\\n                  \\\\\\\"type\\\\\\\": \\\\\\\"initial\\\\\\\",\\\\n                  \\\\\\\"maximumWarning\\\\\\\": \\\\\\\"500kb\\\\\\\",\\\\n                  \\\\\\\"maximumError\\\\\\\": \\\\\\\"3mb\\\\\\\"\\\\n                },\\\\n                {\\\\n                  \\\\\\\"type\\\\\\\": \\\\\\\"anyComponentStyle\\\\\\\",\\\\n                  \\\\\\\"maximumWarning\\\\\\\": \\\\\\\"2kb\\\\\\\",\\\\n                  \\\\\\\"maximumError\\\\\\\": \\\\\\\"4kb\\\\\\\"\\\\n                }\\\\n              ],\\\\n              \\\\\\\"fileReplacements\\\\\\\": [\\\\n                {\\\\n                  \\\\\\\"replace\\\\\\\": \\\\\\\"src\\\\\\\/environments\\\\\\\/environment.ts\\\\\\\",\\\\n                  \\\\\\\"with\\\\\\\": \\\\\\\"src\\\\\\\/environments\\\\\\\/environment.prod.ts\\\\\\\"\\\\n                }\\\\n              ],\\\\n              \\\\\\\"outputHashing\\\\\\\": \\\\\\\"all\\\\\\\",\\\\n+             \\\\\\\"optimization\\\\\\\": false,\\\\n            },\\\\n            \\\\\\\"development\\\\\\\": {\\\\n              \\\\\\\"buildOptimizer\\\\\\\": false,\\\\n              \\\\\\\"optimization\\\\\\\": false,\\\\n              \\\\\\\"vendorChunk\\\\\\\": true,\\\\n              \\\\\\\"extractLicenses\\\\\\\": false,\\\\n              \\\\\\\"sourceMap\\\\\\\": true,\\\\n              \\\\\\\"namedChunks\\\\\\\": true\\\\n            }\\\\n          },\\\\n          \\\\\\\"defaultConfiguration\\\\\\\": \\\\\\\"production\\\\\\\"\\\\n        },\\\\n```\\\\n\\\\n``` powershell\\\\n> yarn build\\\\nyarn run v1.22.19\\\\n$ ng build\\\\n✔ Browser application bundle generation complete.\\\\n\\\\nWarning: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/app.component.scss exceeded maximum budget. Budget 2.00 kB was not met by 10.97 kB with a total of 12.97 kB.\\\\n\\\\nWarning: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/color-check\\\\\\\/color-check.component.scss exceeded maximum budget. Budget 2.00 kB was not met by 11.62 kB with a total of 13.62 kB.\\\\n\\\\nWarning: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/home\\\\\\\/home.component.scss exceeded maximum budget. Budget 2.00 kB was not met by 12.37 kB with a total of 14.37 kB.\\\\n\\\\nWarning: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/markdown-document\\\\\\\/display\\\\\\\/display.component.scss exceeded maximum budget. Budget 2.00 kB was not met by 11.59 kB with a total of 13.59 kB.\\\\n\\\\nWarning: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/markdown-document\\\\\\\/search\\\\\\\/search.component.scss exceeded maximum budget. Budget 2.00 kB was not met by 13.38 kB with a total of 15.38 kB.\\\\n\\\\nWarning: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/nav\\\\\\\/nav.component.scss exceeded maximum budget. Budget 2.00 kB was not met by 11.84 kB with a total of 13.84 kB.\\\\n\\\\nWarning: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/net-core-api\\\\\\\/net-core-api.component.scss exceeded maximum budget. Budget 2.00 kB was not met by 11.04 kB with a total of 13.04 kB.\\\\n\\\\nWarning: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/shared\\\\\\\/components\\\\\\\/lists\\\\\\\/document-list-item\\\\\\\/document-list-item.component.scss exceeded maximum budget. Budget 2.00 kB was not met by 11.57 kB with a total of 13.57 kB.\\\\n\\\\nWarning: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/shared\\\\\\\/components\\\\\\\/lists\\\\\\\/document-list\\\\\\\/document-list.component.scss exceeded maximum budget. Budget 2.00 kB was not met by 11.14 kB with a total of 13.14 kB.\\\\n\\\\nWarning: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/shared\\\\\\\/components\\\\\\\/lists\\\\\\\/expansion-document-list\\\\\\\/expansion-document-list.component.scss exceeded maximum budget. Budget 2.00 kB was not met by 11.84 kB with a total of 13.84 kB.\\\\n\\\\nWarning: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/shared\\\\\\\/components\\\\\\\/loading-bar\\\\\\\/loading-bar.component.scss exceeded maximum budget. Budget 2.00 kB was not met by 11.25 kB with a total of 13.25 kB.\\\\n\\\\nWarning: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/shared\\\\\\\/components\\\\\\\/markdown\\\\\\\/document-header\\\\\\\/document-header.component.scss exceeded maximum budget. Budget 2.00 kB was not met by 11.37 kB with a total of 13.37 kB.\\\\n\\\\nWarning: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/shared\\\\\\\/components\\\\\\\/markdown\\\\\\\/document-toc\\\\\\\/document-toc.component.scss exceeded maximum budget. Budget 2.00 kB was not met by 11.68 kB with a total of 13.68 kB.\\\\n\\\\nWarning: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/shared\\\\\\\/components\\\\\\\/markdown\\\\\\\/document\\\\\\\/document.component.scss exceeded maximum budget. Budget 2.00 kB was not met by 13.33 kB with a total of 15.33 kB.\\\\n\\\\nWarning: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/shared\\\\\\\/components\\\\\\\/tags\\\\\\\/tag-list\\\\\\\/tag-list.component.scss exceeded maximum budget. Budget 2.00 kB was not met by 11.11 kB with a total of 13.11 kB.\\\\n\\\\nWarning: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/shared\\\\\\\/components\\\\\\\/tags\\\\\\\/tag\\\\\\\/tag.component.scss exceeded maximum budget. Budget 2.00 kB was not met by 11.28 kB with a total of 13.28 kB.\\\\n\\\\n\\\\n\\\\n.\\\\\\\/src\\\\\\\/main.ts - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\src\\\\\\\\main.ts: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/src\\\\\\\/polyfills.ts - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\src\\\\\\\\polyfills.ts: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/api.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\api.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/api.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\api.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/api.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\api.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/api.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\api.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/api.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\api.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/api.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\api.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/api.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\api.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/api.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\api.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/api.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\api.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/api.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\api.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/api.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\api.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/api.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\api.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/api.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\api.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/api.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\api.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/api.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\api.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/api.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\api.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/api.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\api.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/noSourceMaps.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/noSourceMaps.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/noSourceMaps.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/noSourceMaps.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/noSourceMaps.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/noSourceMaps.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/noSourceMaps.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/noSourceMaps.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/noSourceMaps.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/noSourceMaps.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/noSourceMaps.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/noSourceMaps.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/noSourceMaps.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/noSourceMaps.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/noSourceMaps.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/noSourceMaps.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/node_modules\\\\\\\/css-loader\\\\\\\/dist\\\\\\\/runtime\\\\\\\/noSourceMaps.js - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/src\\\\\\\/prism-vsc-dark-plus.css?ngGlobalStyle - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/mini-css-extract-plugin\\\\\\\/dist\\\\\\\/loader.js):\\\\nHookWebpackError: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/src\\\\\\\/_variables.scss?ngGlobalStyle - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/mini-css-extract-plugin\\\\\\\/dist\\\\\\\/loader.js):\\\\nHookWebpackError: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\n.\\\\\\\/src\\\\\\\/styles.scss?ngGlobalStyle - Error: Module build failed (from .\\\\\\\/node_modules\\\\\\\/mini-css-extract-plugin\\\\\\\/dist\\\\\\\/loader.js):\\\\nHookWebpackError: Module build failed (from .\\\\\\\/node_modules\\\\\\\/@angular-devkit\\\\\\\/build-angular\\\\\\\/src\\\\\\\/babel\\\\\\\/webpack-loader.js):\\\\nBrowserslistError: [BABEL] C:\\\\\\\\Repos\\\\\\\\tech-log\\\\\\\\TechLogAngularStandalone\\\\\\\\node_modules\\\\\\\\css-loader\\\\\\\\dist\\\\\\\\runtime\\\\\\\\noSourceMaps.js: Unknown version 108 of chrome (While processing: \\\\\\\"base$0$0\\\\\\\")\\\\n\\\\nError: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/app.component.scss exceeded maximum budget. Budget 4.00 kB was not met by 8.97 kB with a total of 12.97 kB.\\\\n\\\\nError: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/color-check\\\\\\\/color-check.component.scss exceeded maximum budget. Budget 4.00 kB was not met by 9.62 kB with a total of 13.62 kB.\\\\n\\\\nError: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/home\\\\\\\/home.component.scss exceeded maximum budget. Budget 4.00 kB was not met by 10.37 kB with a total of 14.37 kB.\\\\n\\\\nError: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/markdown-document\\\\\\\/display\\\\\\\/display.component.scss exceeded maximum budget. Budget 4.00 kB was not met by 9.59 kB with a total of 13.59 kB.\\\\n\\\\nError: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/markdown-document\\\\\\\/search\\\\\\\/search.component.scss exceeded maximum budget. Budget 4.00 kB was not met by 11.38 kB with a total of 15.38 kB.\\\\n\\\\nError: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/nav\\\\\\\/nav.component.scss exceeded maximum budget. Budget 4.00 kB was not met by 9.84 kB with a total of 13.84 kB.\\\\n\\\\nError: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/net-core-api\\\\\\\/net-core-api.component.scss exceeded maximum budget. Budget 4.00 kB was not met by 9.04 kB with a total of 13.04 kB.\\\\n\\\\nError: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/shared\\\\\\\/components\\\\\\\/lists\\\\\\\/document-list-item\\\\\\\/document-list-item.component.scss exceeded maximum budget. Budget 4.00 kB was not met by 9.57 kB with a total of 13.57 kB.\\\\n\\\\nError: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/shared\\\\\\\/components\\\\\\\/lists\\\\\\\/document-list\\\\\\\/document-list.component.scss exceeded maximum budget. Budget 4.00 kB was not met by 9.14 kB with a total of 13.14 kB.\\\\n\\\\nError: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/shared\\\\\\\/components\\\\\\\/lists\\\\\\\/expansion-document-list\\\\\\\/expansion-document-list.component.scss exceeded maximum budget. Budget 4.00 kB was not met by 9.84 kB with a total of 13.84 kB.\\\\n\\\\nError: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/shared\\\\\\\/components\\\\\\\/loading-bar\\\\\\\/loading-bar.component.scss exceeded maximum budget. Budget 4.00 kB was not met by 9.25 kB with a total of 13.25 kB.\\\\n\\\\nError: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/shared\\\\\\\/components\\\\\\\/markdown\\\\\\\/document-header\\\\\\\/document-header.component.scss exceeded maximum budget. Budget 4.00 kB was not met by 9.37 kB with a total of 13.37 kB.\\\\n\\\\nError: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/shared\\\\\\\/components\\\\\\\/markdown\\\\\\\/document-toc\\\\\\\/document-toc.component.scss exceeded maximum budget. Budget 4.00 kB was not met by 9.68 kB with a total of 13.68 kB.\\\\n\\\\nError: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/shared\\\\\\\/components\\\\\\\/markdown\\\\\\\/document\\\\\\\/document.component.scss exceeded maximum budget. Budget 4.00 kB was not met by 11.33 kB with a total of 15.33 kB.\\\\n\\\\nError: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/shared\\\\\\\/components\\\\\\\/tags\\\\\\\/tag-list\\\\\\\/tag-list.component.scss exceeded maximum budget. Budget 4.00 kB was not met by 9.11 kB with a total of 13.11 kB.\\\\n\\\\nError: C:\\\\\\\/Repos\\\\\\\/tech-log\\\\\\\/TechLogAngularStandalone\\\\\\\/src\\\\\\\/app\\\\\\\/shared\\\\\\\/components\\\\\\\/tags\\\\\\\/tag\\\\\\\/tag.component.scss exceeded maximum budget. Budget 4.00 kB was not met by 9.28 kB with a total of 13.28 kB.\\\\n\\\\n\\\\nerror Command failed with exit code 1.\\\\ninfo Visit https:\\\\\\\/\\\\\\\/yarnpkg.com\\\\\\\/en\\\\\\\/docs\\\\\\\/cli\\\\\\\/run for documentation about this command.\\\\n```\\\\n\\\\n大量のエラーが出ていますが、よく読んでみると2種類のエラーが出ていることがわかります。\\\\n\\\\n- `Unknown version 108 of chrome`\\\\n- `exceeded maximum budget`\\\\n\\\\n簡単な方の`exceeded maximum budget`に関しては、cssファイルのサイズが許容量を超えているエラーが出ているので`anyComponentStyle`の条件をWarning:20kb、Error:40kbに緩和。\\\\n\\\\n``` powershell\\\\n\\\\\\\"budgets\\\\\\\": [\\\\n  {\\\\n    \\\\\\\"type\\\\\\\": \\\\\\\"initial\\\\\\\",\\\\n    \\\\\\\"maximumWarning\\\\\\\": \\\\\\\"500kb\\\\\\\",\\\\n    \\\\\\\"maximumError\\\\\\\": \\\\\\\"3mb\\\\\\\"\\\\n  },\\\\n  {\\\\n    \\\\\\\"type\\\\\\\": \\\\\\\"anyComponentStyle\\\\\\\",\\\\n    \\\\\\\"maximumWarning\\\\\\\": \\\\\\\"20kb\\\\\\\",\\\\n    \\\\\\\"maximumError\\\\\\\": \\\\\\\"40kb\\\\\\\"\\\\n  }\\\\n],\\\\n```\\\\n\\\\n`Unknown version 108 of chrome`のエラーに関しては、[Unknown version 87 of chrome when compiling an Angular library project](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/angular\\\\\\\/angular\\\\\\\/issues\\\\\\\/40535)によると、内部で利用しているbrowserslistのバージョンが低いと発生する模様。多くの記事で`npx browserslist --update-db`の実行で解決するとあったのですが、yarnを使っている場合はうまくいかないようです。\\\\n\\\\nnpxだと更新されるのが`package-lock.json`になるのですが、yarnを使用している場合はこのファイルが存在せず、代わりにyarn.lockが作られます。こちらを更新しないといけないのですが、yarnでうまく実行する方法がなさそうです。browserslistの関連issueがopenの状態でした。\\\\n\\\\n結局node_modulesに以前ダウンロードしたpackageが古いのが問題なわけで、node_modulesフォルダを削除して全packageを取得しなおすことで解決しました。\\\\n\\\\n## full standalone component化対応\\\\n\\\\n以下の二つの記事を参考にして、angular appからNgModuleを無くすfull standalone component化を行いました。\\\\n\\\\n- [Angular Standalone Components: Welcome to a World Without NgModule](https:\\\\\\\/\\\\\\\/netbasal.com\\\\\\\/angular-standalone-components-welcome-to-a-world-without-ngmodule-abd3963e89c5)\\\\n- [Angular Standalone Componentsを試してみよう](https:\\\\\\\/\\\\\\\/blog.jbs.co.jp\\\\\\\/entry\\\\\\\/2022\\\\\\\/09\\\\\\\/22\\\\\\\/085400)\\\\n\\\\n試行錯誤しつつ、手順としては以下のようになりました。\\\\n\\\\n- パーツとなる子・孫componentを一つづつstandalone component化する\\\\n  - standalone componentを利用している親componentがビルドエラーになるので、ビルドが通るようにfeature moduleやapp moduleのimportに一時的に参照を追加する\\\\n- 親componentを一つづつstandalone component化する\\\\n  - 都度ビルドチェックを行い、エラーが発生したらmoduleの参照調整を行う\\\\n  - shared moduleなどでまとめて参照していたcomponent群を、component毎に個別に必要な分だけimportする必要がある\\\\n- app.component以外のすべてのcomponentをstandalone component化したら、最後にapp.componentをstandalone component化し、`main.ts`でのbootstrap処理を変更する\\\\n  - `platformBrowserDynamic().bootstrapModule(AppModule)`というmodule呼び出しの形式から、`bootstrapApplication(AppComponent)`というcomponent呼び出しの形式への変更。これによりapp.moduleが不要になる\\\\n  - 3rd partyのmoduleやroutingの設定など、どうしても必要になるmoduleは`bootstrapApplication`の第二引数（provider配列）の中で指定する\\\\n- 不要となったすべてのmoduleを削除する\\\\n\\\\nstandalone componentの利点として「Angular の学ぶべき項目が減り、またアプリケーションをよりシンプルに開発できるようになります。」というのが挙げられていますが、そこまでシンプルになる感じはしませんでした。各componentがより疎になり、個々のcomponentで完結・再利用しやすくなるのは良い点だと感じました。\\\\n\\\\n新規appをこれから開発する場合、最初からすべてstandalone componentで組むなら積極的に採用したいです。移行作業はかなり面倒なので、わざわざfull standalone component化する利点は現時点では特に無さそうです。将来的に「zoneless化によるパフォーマンス向上」とfull standalone component化が絡んでくるようであれば、検討の価値が増すような気がします。\\\\n\\\\n## 関連項目\\\\n\\\\n- [Cannot --update-db with Yarn on Windows](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/browserslist\\\\\\\/browserslist\\\\\\\/issues\\\\\\\/531)\\\\n- [Migrating to MDC-based Angular Material Components](https:\\\\\\\/\\\\\\\/material.angular.io\\\\\\\/guide\\\\\\\/mdc-migration)\\\\n- [Using NgRx Packages with Standalone Angular Features](https:\\\\\\\/\\\\\\\/dev.to\\\\\\\/ngrx\\\\\\\/using-ngrx-packages-with-standalone-angular-features-53d8)\\\\n- [Angular Material - Material Design Icons](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/Templarian\\\\\\\/MaterialDesign-Angular-Material)\\\\n\\\"}\"}","{\"docRef\":\"angular\\\/create-blog-engine-with-net6-angular-frontend\",\"content\":\"{\\\"title\\\":\\\".NET6とAngular v13でSPAサイトを作る（フロントエンド）\\\",\\\"date\\\":\\\"2022-10-10\\\",\\\"category\\\":\\\"csharp\\\",\\\"tag\\\":[\\\"net6\\\",\\\"angular\\\",\\\"unified\\\",\\\"remark\\\",\\\"rehype\\\"],\\\"body\\\":\\\"本サイトは自作のwebサイト生成エンジンで生成されています。自作エンジンは2019年に.NET Core 2.1とAngular v7で開発しました。\\\\n\\\\nそれから時は流れ、2021年末時点でバックエンド側は.NET6に、フロントエンド側はAngular v13にそれぞれバージョンアップされています。\\\\n\\\\n進化の波に取り残されないように、最新バージョンのモジュールを使ってwebサイト生成エンジンを再開発してみようと思います。\\\\n\\\\nこの記事では、フロントエンド編ということでAngularのSPAサイトをを実装していきます。\\\\n\\\\n## 開発準備\\\\n\\\\nVSプロジェクト作成時、最新のAngular v13ではエラーが発生したので、一時的にAngular v12を利用していました。本格的にサイト実装を始める前に、まずはv13へバージョンアップします。\\\\n\\\\nangularのバージョンアップといえば`ng update`を使うべきだと思うのですが、VSが作成したテンプレートが非常に質素で通常のサイトとは異なっていました。変更点を探るため、v13のcliで`ng new`した内容と比較してみます。\\\\n\\\\n``` powershell\\\\n> npm uninstall -g @angular\\\\\\\/cli\\\\n> npm install -g @angular\\\\\\\/cli\\\\n> ng version\\\\nadded 183 packages, and audited 184 packages in 33s\\\\n\\\\n22 packages are looking for funding\\\\n  run `npm fund` for details\\\\n\\\\nfound 0 vulnerabilities\\\\nPS C:\\\\\\\\WINDOWS\\\\\\\\system32> ng version\\\\n\\\\n     _                      _                 ____ _     ___\\\\n    \\\\\\\/ \\\\\\\\   _ __   __ _ _   _| | __ _ _ __     \\\\\\\/ ___| |   |_ _|\\\\n   \\\\\\\/ △ \\\\\\\\ | '_ \\\\\\\\ \\\\\\\/ _` | | | | |\\\\\\\/ _` | '__|   | |   | |    | |\\\\n  \\\\\\\/ ___ \\\\\\\\| | | | (_| | |_| | | (_| | |      | |___| |___ | |\\\\n \\\\\\\/_\\\\\\\/   \\\\\\\\_\\\\\\\\_| |_|\\\\\\\\__, |\\\\\\\\__,_|_|\\\\\\\\__,_|_|       \\\\\\\\____|_____|___|\\\\n                |___\\\\\\\/\\\\n\\\\n\\\\nAngular CLI: 13.1.2\\\\nNode: 16.13.1\\\\nPackage Manager: yarn 1.22.15\\\\nOS: win32 x64\\\\n\\\\nAngular:\\\\n...\\\\n\\\\nPackage                      Version\\\\n------------------------------------------------------\\\\n@angular-devkit\\\\\\\/architect    0.1301.2 (cli-only)\\\\n@angular-devkit\\\\\\\/core         13.1.2 (cli-only)\\\\n@angular-devkit\\\\\\\/schematics   13.1.2 (cli-only)\\\\n@schematics\\\\\\\/angular          13.1.2 (cli-only)\\\\n```\\\\n\\\\n``` powershell\\\\n> ng new net6-markdown-web-engine\\\\n? Would you like to add Angular routing? Yes\\\\n? Which stylesheet format would you like to use? SCSS   [ https:\\\\\\\/\\\\\\\/sass-lang.com\\\\\\\/documentation\\\\\\\/syntax#scss\\\\n ]\\\\nCREATE net6-markdown-web-engine\\\\\\\/angular.json (3315 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/package.json (1088 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/README.md (1067 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/tsconfig.json (863 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/.editorconfig (274 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/.gitignore (620 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/.browserslistrc (600 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/karma.conf.js (1441 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/tsconfig.app.json (287 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/tsconfig.spec.json (333 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/.vscode\\\\\\\/extensions.json (130 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/.vscode\\\\\\\/launch.json (474 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/.vscode\\\\\\\/tasks.json (938 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/src\\\\\\\/favicon.ico (948 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/src\\\\\\\/index.html (307 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/src\\\\\\\/main.ts (372 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/src\\\\\\\/polyfills.ts (2338 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/src\\\\\\\/styles.sass (80 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/src\\\\\\\/test.ts (745 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/src\\\\\\\/assets\\\\\\\/.gitkeep (0 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/src\\\\\\\/environments\\\\\\\/environment.prod.ts (51 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/src\\\\\\\/environments\\\\\\\/environment.ts (658 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/src\\\\\\\/app\\\\\\\/app-routing.module.ts (245 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/src\\\\\\\/app\\\\\\\/app.module.ts (393 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/src\\\\\\\/app\\\\\\\/app.component.html (23364 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/src\\\\\\\/app\\\\\\\/app.component.spec.ts (1127 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/src\\\\\\\/app\\\\\\\/app.component.ts (229 bytes)\\\\nCREATE net6-markdown-web-engine\\\\\\\/src\\\\\\\/app\\\\\\\/app.component.sass (0 bytes)\\\\n\\\\\\\/ Installing packages (yarn)...\\\\n√ Packages installed successfully.\\\\n```\\\\n\\\\n比較したところ、apiのproxy(VSテンプレート独自の変更点)以外の際はほとんどありませんでした。IE11が正式にサポート対象から外れたようで、polifills.ts等からIE11の記述が消えているくらいで、angular.jsonもほぼほぼ同じ。移行はとても簡単そうです。せっかくなので、サーバサイドapiを使うページは名前を変えて残した状態でv12とv13のソースをマージしました。\\\\n\\\\n## linterのセットアップ\\\\n\\\\nTSlintからESLintへのマイグレーションは[AngularのRoadmapでCompleted Q4 2020](https:\\\\\\\/\\\\\\\/angular.io\\\\\\\/guide\\\\\\\/roadmap#migrate-to-eslint)となっており、`ng new`したコード中からlintの設定がなくなったようです。\\\\n\\\\nググったところ[angular-eslint](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/angular-eslint\\\\\\\/angular-eslint)を利用する記事が多く目についたので、今回はこれを試してみます。1コマンドで作業は完了です。\\\\n\\\\n``` powershell\\\\n> ng add @angular-eslint\\\\\\\/schematics\\\\nℹ Using package manager: yarn\\\\n✔ Found compatible package version: @angular-eslint\\\\\\\/schematics@13.0.1.\\\\n✔ Package information loaded.\\\\n\\\\nThe package @angular-eslint\\\\\\\/schematics@13.0.1 will be installed and executed.\\\\nWould you like to proceed? Yes\\\\n✔ Package successfully installed.\\\\n\\\\n    All @angular-eslint dependencies have been successfully installed 🎉\\\\n\\\\n    Please see https:\\\\\\\/\\\\\\\/github.com\\\\\\\/angular-eslint\\\\\\\/angular-eslint for how to add ESLint configuration to your project.\\\\n\\\\n\\\\n    We detected that you have a single project in your workspace and no existing linter wired up, so we are configuring ESLint for you automatically.\\\\n\\\\n    Please see https:\\\\\\\/\\\\\\\/github.com\\\\\\\/angular-eslint\\\\\\\/angular-eslint for more information.\\\\n\\\\nCREATE .eslintrc.json (984 bytes)\\\\nUPDATE package.json (1662 bytes)\\\\nUPDATE angular.json (3692 bytes)\\\\n✔ Packages installed successfully.\\\\n```\\\\n\\\\n## Angular Materialの設定\\\\n\\\\nデザインシステムにAngular Materialを設定します。当初はFluent UI web componentsを試そうと思ったのですが、Angular Materialを前回利用したときに、やり残していた課題があったので今回再チャレンジします。\\\\n\\\\n``` powershell\\\\n> ng add @angular\\\\\\\/material\\\\nℹ Using package manager: yarn\\\\n✔ Found compatible package version: @angular\\\\\\\/material@13.1.3.\\\\n✔ Package information loaded.\\\\n\\\\nThe package @angular\\\\\\\/material@13.1.3 will be installed and executed.\\\\nWould you like to proceed? Yes\\\\n✔ Package successfully installed.\\\\n? Choose a prebuilt theme name, or \\\\\\\"custom\\\\\\\" for a custom theme: Indigo\\\\\\\/Pink        [ Preview: https:\\\\\\\/\\\\\\\/material.angular.io?theme=indigo-pink ]\\\\n? Set up global Angular Material typography styles? No\\\\n? Set up browser animations for Angular Material? Yes\\\\nUPDATE package.json (1727 bytes)\\\\n✔ Packages installed successfully.\\\\nUPDATE src\\\\\\\/app\\\\\\\/app.module.ts (737 bytes)\\\\nUPDATE angular.json (3982 bytes)\\\\nUPDATE src\\\\\\\/index.html (613 bytes)\\\\nUPDATE src\\\\\\\/styles.scss (182 bytes)\\\\n```\\\\n\\\\n## nav componentの追加\\\\n\\\\n以前のバージョンで利用していたNav Componentをほぼそのまま移行することができました。\\\\n\\\\n以前のバージョンではAngular.ioの実装から、レイアウトのbreakpoint設定を拝借していたのですが、`handset`を利用していると画面のwidthを変えたときに変なところでサイドバーが出るので、この実装を変更することにしました。\\\\n\\\\n[AngularMaterialのレイアウト設定](https:\\\\\\\/\\\\\\\/material.angular.io\\\\\\\/cdk\\\\\\\/layout\\\\\\\/overview#predefined-breakpoints)によると、handsetのルールは`(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)`でした。orientationの関係でmax-widthが600-960の間でもisHandSetがtrueになる瞬間があるのだと思います。\\\\n\\\\n`XSmall`と`Small`のときはサイドバーを表示しないように変更したらイイ感じになりました。\\\\n\\\\n``` ts\\\\nisSmall$: Observable<boolean> = this.breakpointObserver\\\\n    .observe([Breakpoints.XSmall, Breakpoints.Small])\\\\n    .pipe(map((result) => result.matches));\\\\n```\\\\n\\\\n## loading bar componentの追加\\\\n\\\\nこちらも以前のバージョンで実装したcomponentをほぼそのまま移行できました。勉強不足でasync pipeを使わずにstateをローカル変数に持ち直して表示\\\\\\\/非表示の制御をしていた部分を、シンプルに書き直す修正だけ行いました。\\\\n\\\\n## NGRXの導入\\\\n\\\\nmarkdownからコンバートしたjsonファイルを`ngrx store`に読み込んだら、どのcomponetからでも好きに呼び出せてイイ感じにならないかな？という発想から、今回はNGRXを利用してみることにします。\\\\n\\\\n``` powershell\\\\n> ng add @ngrx\\\\\\\/store@latest\\\\nℹ Using package manager: yarn\\\\n✔ Package information loaded.\\\\n\\\\nThe package @ngrx\\\\\\\/store@latest will be installed and executed.\\\\nWould you like to proceed? Yes\\\\n✔ Package successfully installed.\\\\n\\\\n    The NgRx ESLint Plugin is installed and configured with the recommended config.\\\\n\\\\n    If you want to change the configuration, please see https:\\\\\\\/\\\\\\\/github.com\\\\\\\/timdeschryver\\\\\\\/eslint-plugin-ngrx\\\\\\\/#eslint-plugin-ngrx.\\\\n\\\\nUPDATE src\\\\\\\/app\\\\\\\/app.module.ts (1090 bytes)\\\\nUPDATE package.json (1793 bytes)\\\\nUPDATE .eslintrc.json (1098 bytes)\\\\n✔ Packages installed successfully.\\\\n✔ Packages installed successfully.\\\\n``\\\\n\\\\n公式のガイドに[ESLint NgRx Plugin](https:\\\\\\\/\\\\\\\/ngrx.io\\\\\\\/guide\\\\\\\/eslint-plugin)が載っていたので導入してみます。\\\\n``` powershell\\\\n> ng add eslint-plugin-ngrx\\\\nSkipping installation: Package already installed\\\\n? Which config would you like to use? recommended (all the recommended rules configured with the recommended severity) [https:\\\\\\\/\\\\\\\/github.com\\\\\\\/timdeschryver\\\\\\\/eslint-plugin-ngrx\\\\\\\/blob\\\\\\\/main\\\\\\\/src\\\\\\\/configs\\\\\\\/recommended.ts]\\\\n\\\\n      The NgRx ESLint Plugin is installed and configured with the 'recommended' config.\\\\n\\\\n      If you want to change the configuration, please see https:\\\\\\\/\\\\\\\/github.com\\\\\\\/timdeschryver\\\\\\\/eslint-plugin-ngrx\\\\\\\/#eslint-plugin-ngrx.\\\\n\\\\nUPDATE .eslintrc.json (1098 bytes)\\\\n```\\\\n\\\\n## markdownのhtml変換処理\\\\n\\\\n以前からmarkdown⇒htmlへの変換処理はクライアント(angular)側で行っていました。\\\\n\\\\n- バックエンド側でfrontmatter付きmarkdownをmarkdown記法のままjsonに変換\\\\n  - 変換元mdファイルと1対1対応するjsonファイル\\\\n  - すべてのjsonファイルをまとめたindex.json\\\\n- 検索画面ではindex.jsonを利用してサーチを実施\\\\n- 個々のドキュメントページはurlから対象のjsonファイルを取得\\\\n- clientはmarkdown部分をjsonから抜き出して、[unified(remark, rehype)](https:\\\\\\\/\\\\\\\/unifiedjs.com\\\\\\\/)を利用してhtmlに変換\\\\n\\\\n### jsonファイル読み込み処理の変更点\\\\n\\\\n前半のjsonファイルの読み込み部分について、index.jsonを直接importする記述に変更しました\\\\n\\\\n- ngrxのactionでindex.jsonを読み込み、個々のドキュメントも探すようにしたので個々のドキュメントファイルをfetchする必要がなくなった\\\\n- debug実行時、index.jsonに変更が発生すると自動でreloadが掛かるので、markdownの更新が画面に自動反映されるようになった。（嬉しい副産物）\\\\n\\\\n### unifiedのプラグインチェック\\\\n\\\\n後半のunifiedによる変換処理について、remarkのmarkdownパーサーエンジンが[micromark](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/micromark\\\\\\\/micromark)に置き換わるという大きな変更が起きていたようです。その影響で、以前使っていたプラグインが使えなくなるといった影響が出ていました。この機会に使用するプラグインの厳選を行いました。\\\\n\\\\n- remark-parse\\\\n  - 標準plugin。markdownをmdast(syntax tree)に変換\\\\n- [remark-attr](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/arobase-che\\\\\\\/remark-attr)\\\\n  - markdownに記述したattributeを変換後のhtmlに付与。cssクラスをセットする等の用途で使用していたが、micromarkの移行により利用不可になった。\\\\n  - <https:\\\\\\\/\\\\\\\/github.com\\\\\\\/arobase-che\\\\\\\/remark-attr\\\\\\\/issues\\\\\\\/22>\\\\n- remark-gfm\\\\n  - 標準plugin。GitHub Flavored Markdown(autolink literals, footnotes, strikethrough, tables, tasklists)を利用するために利用\\\\n- remark-rehype\\\\n  - 標準plugin。mdastをhastに変換\\\\n- rehype-raw\\\\n  - 標準plugin:。markdown内のhtmlタグをsyntax treeのnodeに含める\\\\n- rehype-slug\\\\n  - 標準plugin。Hタグにidを付与\\\\n- rehype-autolink-headings\\\\n  - 標準plugin。Hタグへのlinkを作成\\\\n- rehype-External-Links\\\\n  - 今回新たに採用。標準plugin。外部サイトへのリンクを制御。target=\\\\\\\"_blank\\\\\\\"を付与するのに使用\\\\n- rehype-attrs\\\\n  - remarkAttrの代わりに採用。markdownに記述したattributeを変換後のhtmlに付与。cssクラスをセットする等の用途で使用\\\\n- rehypeHighlight\\\\n  - 以前利用していたsyntax highlight用のplugin。標準で登録済み担っている言語でbundleサイズが膨らんでしまい、取り除くのが簡単ではなさそうだったので`rehypePrismPlus`に変更することに\\\\n- rehypePrismPlus\\\\n  - syntax highlight用のplugin。ハイライト対象の設定ファイルを柔軟に登録できるので、bundleサイズ削減が期待できる\\\\n\\\\n``` ts\\\\nconst processor = unified()\\\\n    .use(remarkParse)\\\\n    \\\\\\\/\\\\\\\/ .use(remarkAttr)\\\\n    .use(remarkGfm)\\\\n    .use(remarkRehype, { allowDangerousHtml: true })\\\\n    .use(rehypeRaw)\\\\n    .use(rehypeSlug)\\\\n    .use(rehypeAutolinkHeadings)\\\\n    .use(rehypeExternalLinks, { target: '_blank', rel: ['noopener'] })\\\\n    .use(rehypeAttrs, { properties: 'attr' })\\\\n    \\\\\\\/\\\\\\\/ .use(highlight)\\\\n    .use(rehypePrismPlus, { showLineNumbers: true })\\\\n    .use(rehypeStringify); \\\\\\\/\\\\\\\/ 標準plugin: hastをhtmlに変換\\\\n\\\\nconst html = String(processor.processSync(document.content.body));\\\\n```\\\\n\\\\n## 後で調べる\\\\n\\\\n- prettierの[bracket line](https:\\\\\\\/\\\\\\\/prettier.io\\\\\\\/docs\\\\\\\/en\\\\\\\/options.html#bracket-line)をtrueにする\\\\n- loading barのshow\\\\\\\/hideにアニメーションを付ける\\\\n\\\\n## 関連項目\\\\n\\\\n- [How to upgrade Angular CLI to the latest version](https:\\\\\\\/\\\\\\\/stackoverflow.com\\\\\\\/questions\\\\\\\/43931986\\\\\\\/how-to-upgrade-angular-cli-to-the-latest-version)\\\\n- [angular-eslint](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/angular-eslint\\\\\\\/angular-eslint)\\\\n- [Tasks in Visual Studio Code - Compound tasks](https:\\\\\\\/\\\\\\\/code.visualstudio.com\\\\\\\/docs\\\\\\\/editor\\\\\\\/tasks#_compound-tasks)\\\\n- [Getting Started with Angular Material](https:\\\\\\\/\\\\\\\/material.angular.io\\\\\\\/guide\\\\\\\/getting-started)\\\\n- [Remark plugins list](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/remarkjs\\\\\\\/remark\\\\\\\/blob\\\\\\\/main\\\\\\\/doc\\\\\\\/plugins.md)\\\\n- [Rehype plugins list](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/rehypejs\\\\\\\/rehype\\\\\\\/blob\\\\\\\/main\\\\\\\/doc\\\\\\\/plugins.md)\\\"}\"}","{\"docRef\":\"angular\\\/fluent-ui-web-components-with-angular\",\"content\":\"{\\\"title\\\":\\\"AngularプロジェクトへのFluent UI導入検討\\\",\\\"date\\\":\\\"2022-01-07\\\",\\\"category\\\":\\\"csharp\\\",\\\"tag\\\":[\\\"fluent ui\\\",\\\"angular\\\"],\\\"body\\\":\\\"これまでずっとデザインシステムに[Angular Material](https:\\\\\\\/\\\\\\\/material.angular.io\\\\\\\/)を使ってきたのですが、今回は新しいものということで、最近MS OfficeやTeamsで見かける[Fluent UIのAngularでも使えるWeb Component](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/en-us\\\\\\\/fluent-ui\\\\\\\/web-components\\\\\\\/integrations\\\\\\\/angular)の導入を検討しました。\\\\n\\\\n結論としては、まだまだ未成熟で私の力では実践投入できなそうだったので導入を断念しました。開発の進捗状況を見つつ、仕上がってきたら導入を再検討したいです。\\\\n\\\\n### 検討時に行った作業\\\\n\\\\n元々UI Fabricと呼ばれていたころはReact向けライブラリがメインだった感があり、今も一番充実しているのはFluent UI Reactのようです。[公式Github](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/microsoft\\\\\\\/fluentui)によると、Office系で使われている`Fluent UI React`、Teamsで使われている`Fluent UI React Northstar`、Edgeで使われている`Fluent UI Web Component`の3種類があるようです。このうちAngularで利用できるのは`Fluent UI Web Component`です。\\\\n\\\\n|   | React | React Northstar | Web Components |\\\\n|---| ----- | --------------- | -------------- |\\\\n| **Overview**    | Mature, refreshing with new concepts from react-northstar. | Newer, has concepts we're iterating on. | Web Component implementation of Fluent UI. |\\\\n| **Used By**     | Office| Teams | Edge |\\\\n\\\\n説明に従い、3つのモジュール(`@fluentui\\\\\\\/web-components`、`@microsoft\\\\\\\/fast-element`、`lodash-es`)をインストールします。\\\\n\\\\n``` powershell\\\\n> yarn add @fluentui\\\\\\\/web-components @microsoft\\\\\\\/fast-element lodash-es\\\\nyarn add v1.22.15\\\\n[1\\\\\\\/4] Resolving packages...\\\\n[2\\\\\\\/4] Fetching packages...\\\\n...\\\\n[3\\\\\\\/4] Linking dependencies...\\\\n[4\\\\\\\/4] Building fresh packages...\\\\nsuccess Saved lockfile.\\\\nsuccess Saved 8 new dependencies.\\\\ninfo Direct dependencies\\\\n├─ @fluentui\\\\\\\/web-components@2.2.0\\\\n├─ @microsoft\\\\\\\/fast-element@1.6.2\\\\n└─ lodash-es@4.17.21\\\\ninfo All dependencies\\\\n├─ @fluentui\\\\\\\/web-components@2.2.0\\\\n├─ @microsoft\\\\\\\/fast-colors@5.1.4\\\\n├─ @microsoft\\\\\\\/fast-element@1.6.2\\\\n├─ @microsoft\\\\\\\/fast-foundation@2.29.0\\\\n├─ @microsoft\\\\\\\/fast-web-utilities@5.0.2\\\\n├─ exenv-es6@1.0.0\\\\n├─ lodash-es@4.17.21\\\\n└─ tabbable@5.2.1\\\\nDone in 40.64s.\\\\n```\\\\n\\\\nその後も説明に従いmain.tsに以下の一行を追加したところ、build errorが発生するようになってしまいました。\\\\n`provideFluentDesignSystem().register(fluentDesignSystemProvider());`\\\\n\\\\n[FAST designのissue](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/microsoft\\\\\\\/fast\\\\\\\/issues\\\\\\\/5198)によると、typescriptのversionが4.3.5以上だとこのエラーが発生するとのこと。暫定の回避手段は`skipLibCheck: true`を`tsconfig.json`に追加することでした。\\\\n\\\\n``` diff\\\\n\\\\\\\/* To learn more about this file see: https:\\\\\\\/\\\\\\\/angular.io\\\\\\\/config\\\\\\\/tsconfig. *\\\\\\\/\\\\n{\\\\n  \\\\\\\"compileOnSave\\\\\\\": false,\\\\n  \\\\\\\"compilerOptions\\\\\\\": {\\\\n    \\\\\\\"baseUrl\\\\\\\": \\\\\\\".\\\\\\\/\\\\\\\",\\\\n    \\\\\\\"outDir\\\\\\\": \\\\\\\".\\\\\\\/dist\\\\\\\/out-tsc\\\\\\\",\\\\n    \\\\\\\"forceConsistentCasingInFileNames\\\\\\\": true,\\\\n    \\\\\\\"strict\\\\\\\": true,\\\\n    \\\\\\\"noImplicitOverride\\\\\\\": true,\\\\n    \\\\\\\"noPropertyAccessFromIndexSignature\\\\\\\": true,\\\\n    \\\\\\\"noImplicitReturns\\\\\\\": true,\\\\n    \\\\\\\"noFallthroughCasesInSwitch\\\\\\\": true,\\\\n    \\\\\\\"sourceMap\\\\\\\": true,\\\\n    \\\\\\\"declaration\\\\\\\": false,\\\\n    \\\\\\\"downlevelIteration\\\\\\\": true,\\\\n    \\\\\\\"experimentalDecorators\\\\\\\": true,\\\\n    \\\\\\\"moduleResolution\\\\\\\": \\\\\\\"node\\\\\\\",\\\\n    \\\\\\\"importHelpers\\\\\\\": true,\\\\n    \\\\\\\"target\\\\\\\": \\\\\\\"es2017\\\\\\\",\\\\n    \\\\\\\"module\\\\\\\": \\\\\\\"es2020\\\\\\\",\\\\n    \\\\\\\"lib\\\\\\\": [\\\\\\\"es2020\\\\\\\", \\\\\\\"dom\\\\\\\"],\\\\n+    \\\\\\\"skipLibCheck\\\\\\\": true\\\\n  },\\\\n  \\\\\\\"angularCompilerOptions\\\\\\\": {\\\\n    \\\\\\\"enableI18nLegacyMessageIdFormat\\\\\\\": false,\\\\n    \\\\\\\"strictInjectionParameters\\\\\\\": true,\\\\n    \\\\\\\"strictInputAccessModifiers\\\\\\\": true,\\\\n    \\\\\\\"strictTemplates\\\\\\\": true\\\\n  }\\\\n}\\\\n```\\\\n\\\\nこれでdebugが実行できるようになり、Fluent UIのスタイルが適用されるようになります。ただし背景色やテキスト色は自身で設定する必要があるようです。\\\\n\\\\n``` css\\\\nbody {\\\\n  background: var(--fill-color);\\\\n  color: var(--neutral-foreground-rest);\\\\n}\\\\n```\\\\n\\\\n## 関連項目\\\\n\\\\n- [Use Fluent UI Web Components with Angular](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/en-us\\\\\\\/fluent-ui\\\\\\\/web-components\\\\\\\/integrations\\\\\\\/angular)\\\\n- [FAST color explorer](https:\\\\\\\/\\\\\\\/color.fast.design\\\\\\\/)\\\\n- [Using FAST to Rebrand an Existing Website](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/microsoft\\\\\\\/fast\\\\\\\/tree\\\\\\\/master\\\\\\\/examples\\\\\\\/site-rebrand-tutorial)\\\"}\"}","{\"docRef\":\"blazor\\\/build-first-blazor-webassembly-app\",\"content\":\"{\\\"title\\\":\\\"Blazor WebAssemblyアプリを作成する\\\",\\\"date\\\":\\\"2020-05-05\\\",\\\"category\\\":\\\"Blazor\\\",\\\"tag\\\":[\\\"blazor\\\",\\\"webassembly\\\"],\\\"body\\\":\\\"NET5でproduction readyになる予定のBlazor WebAssemblyの情報収集と、空のアプリ作成を作成してみる。\\\\n\\\\n## 情報収集\\\\n\\\\nMS Docsにある[チュートリアル - 最初の Blazor アプリをビルドする](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/ja-jp\\\\\\\/aspnet\\\\\\\/core\\\\\\\/tutorials\\\\\\\/build-your-first-blazor-app?view=aspnetcore-3.1)を試してみる事にします。\\\\n\\\\n注意書きには\\\\\\\".NET Core 3.1ではプレビュー段階である\\\\\\\"と書いてあるので、NET5になったら手順等改めて振り返る必要がありそうです。\\\\n\\\\n```plaintext\\\\nプレビュー段階の Blazor WebAssembly\\\\n\\\\\\\" Blazor サーバー\\\\\\\" は ASP.NET Core 3.0 でサポートされています。 \\\\\\\" Blazor WebAssembly\\\\\\\" は、ASP.NET Core 3.1 のプレビュー段階です。\\\\n```\\\\n\\\\nまた[ASP.NET Core Blazor の概要](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/ja-jp\\\\\\\/aspnet\\\\\\\/core\\\\\\\/blazor\\\\\\\/get-started?view=aspnetcore-3.1&tabs=visual-studio)には、\\\\n\\\\n```plaintext\\\\nBlazor WebAssembly エクスペリエンス (Visual Studio 16.6 Preview 2 以降) については、 [Blazor WebAssembly アプリ] テンプレートを選択します。\\\\n````\\\\n\\\\nと記載されているので、Visual Studioで開発を行う場合は16.6以降が必要なようです。\\\\n\\\\n今日(2020-05-05)時点の最新は16.5.4だったので、Visual Studio 2019 Previewをインストールして開発に使用します。\\\\n\\\\nまた、以下のコマンドを実行して、テンプレートをインストールします。実行前にプロジェクトを作成してもBlazorサーバテンプレートしか表示されず、Blazor WebAssemblyプロジェクトを開始できませんでした。\\\\n\\\\n``` powershell\\\\n> dotnet new -i Microsoft.AspNetCore.Components.WebAssembly.Templates::3.2.0-preview5.20216.8\\\\n```\\\\n\\\\n実行後の利用可能なテンプレートは以下の通り。\\\\n\\\\n```plaintext\\\\nTemplates                                         Short Name               Language          Tags\\\\n----------------------------------------------------------------------------------------------------------------------------------\\\\nConsole Application                               console                  [C#], F#, VB      Common\\\\\\\/Console\\\\nClass library                                     classlib                 [C#], F#, VB      Common\\\\\\\/Library\\\\nWPF Application                                   wpf                      [C#]              Common\\\\\\\/WPF\\\\nWPF Class library                                 wpflib                   [C#]              Common\\\\\\\/WPF\\\\nWPF Custom Control Library                        wpfcustomcontrollib      [C#]              Common\\\\\\\/WPF\\\\nWPF User Control Library                          wpfusercontrollib        [C#]              Common\\\\\\\/WPF\\\\nWindows Forms (WinForms) Application              winforms                 [C#]              Common\\\\\\\/WinForms\\\\nWindows Forms (WinForms) Class library            winformslib              [C#]              Common\\\\\\\/WinForms\\\\nWorker Service                                    worker                   [C#]              Common\\\\\\\/Worker\\\\\\\/Web\\\\nUnit Test Project                                 mstest                   [C#], F#, VB      Test\\\\\\\/MSTest\\\\nNUnit 3 Test Project                              nunit                    [C#], F#, VB      Test\\\\\\\/NUnit\\\\nNUnit 3 Test Item                                 nunit-test               [C#], F#, VB      Test\\\\\\\/NUnit\\\\nxUnit Test Project                                xunit                    [C#], F#, VB      Test\\\\\\\/xUnit\\\\nRazor Component                                   razorcomponent           [C#]              Web\\\\\\\/ASP.NET\\\\nRazor Page                                        page                     [C#]              Web\\\\\\\/ASP.NET\\\\nMVC ViewImports                                   viewimports              [C#]              Web\\\\\\\/ASP.NET\\\\nMVC ViewStart                                     viewstart                [C#]              Web\\\\\\\/ASP.NET\\\\nBlazor Server App                                 blazorserver             [C#]              Web\\\\\\\/Blazor\\\\nBlazor WebAssembly App                            blazorwasm               [C#]              Web\\\\\\\/Blazor\\\\\\\/WebAssembly\\\\nASP.NET Core Empty                                web                      [C#], F#          Web\\\\\\\/Empty\\\\nASP.NET Core Web App (Model-View-Controller)      mvc                      [C#], F#          Web\\\\\\\/MVC\\\\nASP.NET Core Web App                              webapp                   [C#]              Web\\\\\\\/MVC\\\\\\\/Razor Pages\\\\nASP.NET Core with Angular                         angular                  [C#]              Web\\\\\\\/MVC\\\\\\\/SPA\\\\nASP.NET Core with React.js                        react                    [C#]              Web\\\\\\\/MVC\\\\\\\/SPA\\\\nASP.NET Core with React.js and Redux              reactredux               [C#]              Web\\\\\\\/MVC\\\\\\\/SPA\\\\nRazor Class Library                               razorclasslib            [C#]              Web\\\\\\\/Razor\\\\\\\/Library\\\\\\\/Razor Class Library\\\\nASP.NET Core Web API                              webapi                   [C#], F#          Web\\\\\\\/WebAPI\\\\nASP.NET Core gRPC Service                         grpc                     [C#]              Web\\\\\\\/gRPC\\\\ndotnet gitignore file                             gitignore                                  Config\\\\nglobal.json file                                  globaljson                                 Config\\\\nNuGet Config                                      nugetconfig                                Config\\\\nDotnet local tool manifest file                   tool-manifest                              Config\\\\nWeb Config                                        webconfig                                  Config\\\\nSolution File                                     sln                                        Solution\\\\nProtocol Buffer File                              proto                                      Web\\\\\\\/gRPC\\\\n```\\\\n\\\\n`Blazor WebAssembly App`テンプレートを選択すると、`ASP.NET Core hosted`と`Progressive Web Application`のチェックボックスが表示されました。\\\\n\\\\n`ASP.NET Core hosted`については[ASP.NET Core Blazor のホスティング モデル](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/ja-jp\\\\\\\/aspnet\\\\\\\/core\\\\\\\/blazor\\\\\\\/hosting-models?view=aspnetcore-3.1)に詳細が書かれており、チェックするとBlazorサーバと同様にサーバ側で処理が行われるようになるので、チェックしないことにしました。\\\\n\\\\n`Progressive Web Application`については[ASP.NET Core Blazor WebAssembly を使用してプログレッシブ Web アプリケーションをビルドする](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/ja-jp\\\\\\\/aspnet\\\\\\\/core\\\\\\\/blazor\\\\\\\/progressive-web-app?view=aspnetcore-3.1&tabs=visual-studio)に記載があり、チェックすることで何も損しなさそうなので、チェックをしてプロジェクトを作成しました。\\\\n\\\\nプロジェクト作成後、`F5`キーで実行すると、問題なくBlazor WebAssemblyアプリが起動しました。Chrome DevToolsでネットワークリソースを確認したところ、6.5MBと噂通り巨大なアプリサイズです（これでも少なくなったらしいですが）。\\\\n\\\\n``` powershell\\\\n68 requests, 6.5MB transferred, 18.0MB resources, Finish: 3.51s, DOMContentLoaded: 282ms, Load:291ms\\\\n```\\\\n\\\\n2度目のページ取得ではだいぶ軽くなります。\\\\n\\\\n``` powershell\\\\n11 requests, 171kB transferred 508kB resources, Finish:1.63s, DOMContentLoaded: 359ms, Load:361ms\\\\n```\\\\n\\\\nその後、todoページの作成まで一通り写経して、Blazorの基礎の基礎を理解しました。スタイルを一切変えていないので、見た目は少しヘンテコリンです。\\\\n\\\\nデフォルトテンプレートはbootstrap4のcssで装飾されています。公式のFluent Design実装はまだなく、[open issue](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/dotnet\\\\\\\/aspnetcore\\\\\\\/issues\\\\\\\/11229)で議論されているようです。\\\\n\\\\n## 関連項目\\\\n\\\\n- [Awesome Blazor](https:\\\\\\\/\\\\\\\/awesomeopensource.com\\\\\\\/project\\\\\\\/AdrienTorris\\\\\\\/awesome-blazor)\\\"}\"}","{\"docRef\":\"csharp\\\/create-blog-engine-with-net6-angular-backend\",\"content\":\"{\\\"title\\\":\\\".NET6とAngular v13でSPAサイトを作る（バックエンド）\\\",\\\"date\\\":\\\"2022-01-06\\\",\\\"category\\\":\\\"csharp\\\",\\\"tag\\\":[\\\"csharp\\\",\\\"net6\\\",\\\"angular\\\"],\\\"body\\\":\\\"\\\\n\\\\n本サイトは自作のwebサイト生成エンジンで生成されています。自作エンジンは2019年に.NET Core 2.1とAngular v7で開発しました。\\\\n\\\\nそれから時は流れ、2021年末時点でバックエンド側は.NET6に、フロントエンド側はAngular v13にそれぞれバージョンアップされています。\\\\n\\\\n進化の波に取り残されないように、最新バージョンのモジュールを使ってwebサイト生成エンジンを再開発してみようと思います。\\\\n\\\\nこの記事では、バックエンド編ということで.NET6のASP.NET Core SPAプロジェクト側のBackground Serviceと、Markdownを記事ファイルをJsonへ変換する機構を実装していきます。\\\\n\\\\n## Backend Service\\\\n\\\\n旧webサイト生成エンジンでは、[この記事](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/en-gb\\\\\\\/dotnet\\\\\\\/architecture\\\\\\\/microservices\\\\\\\/multi-container-microservice-net-applications\\\\\\\/background-tasks-with-ihostedservice)を参考に、MarkdownファイルをJsonに変換するBackgroundServiceをASP.NET Coreのプロセスに登録していました。\\\\n\\\\n[この記事](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/en-us\\\\\\\/aspnet\\\\\\\/core\\\\\\\/migration\\\\\\\/50-to-60-samples?view=aspnetcore-6.0#add-services)を見るに、ASP.NET Core アプリの新しい .NET 6 最小ホスティング モデル(minimal hosting model)でも、登録方法の書き方が変わっただけで同じようにBackground Serviceを登録できそうです。\\\\n\\\\n``` diff\\\\n\\\\\\\/\\\\\\\/ Program.cs\\\\n\\\\n @@ -1,3 +1,5 @@\\\\n+using Net6MarkdownWebEngine.Backend.Services;\\\\n+\\\\nvar builder = WebApplication.CreateBuilder(args);\\\\n\\\\n\\\\\\\/\\\\\\\/ Add services to the container.\\\\n\\\\n @@ -7,6 +9,27 @@ builder.Services.AddControllers();\\\\nbuilder.Services.AddEndpointsApiExplorer();\\\\nbuilder.Services.AddSwaggerGen();\\\\n\\\\n+\\\\\\\/\\\\\\\/ \\\\\\\/\\\\\\\/ Add md2json converter service\\\\n+\\\\\\\/\\\\\\\/builder.Services.AddSingleton<IService, MarkdownConverterService>();\\\\n+\\\\n+\\\\\\\/\\\\\\\/ Add Documents Watch Service\\\\n+var contetRootPath = builder.Environment.ContentRootPath;\\\\n+var isDevelopment = builder.Environment.IsDevelopment();\\\\n+builder.Services.Configure<DocumentsWatchServiceOptions> (options =>\\\\n+{\\\\n+    \\\\\\\/\\\\\\\/ TODO: review correct input\\\\\\\/output directory path\\\\n+    options.InputDirectry = Path.Combine(contetRootPath, \\\\\\\"..\\\\\\\/AngularStandalone\\\\\\\/src\\\\\\\/assets\\\\\\\/docs\\\\\\\");\\\\n+    if (isDevelopment)\\\\n+    {\\\\n+        options.OutputDirectry = Path.Combine(contetRootPath, \\\\\\\"..\\\\\\\/AngularStandalone\\\\\\\/src\\\\\\\/assets\\\\\\\/json\\\\\\\");\\\\n+    }\\\\n+    else\\\\n+    {\\\\n+        options.OutputDirectry = Path.Combine(contetRootPath, \\\\\\\"..\\\\\\\/AngularStandalone\\\\\\\/dist\\\\\\\/assets\\\\\\\/+json\\\\\\\");\\\\n+    }\\\\n+});\\\\n+builder.Services.AddSingleton<Microsoft.Extensions.Hosting.IHostedService, DocumentsWatchService>();\\\\n\\\\nvar app = builder.Build();\\\\n\\\\n\\\\\\\/\\\\\\\/ Configure the HTTP request pipeline.\\\\n```\\\\n\\\\n## Markdown to Json Converter\\\\n\\\\nコンソールアプリケーションのプログラムも、.NET 6からはシンプルな最上位レベルのステートメントのテンプレートで生成されていました。\\\\n\\\\nですが、シンプルな形式でのうまい記述方法が見いだせなかったので、以前と同様にクラスを宣言する書き方で実装しました。この部分は将来への宿題です。\\\\n\\\\nせっかくのリライトなので、以前の実装で気になっていた部分について書き直してみました。\\\\n\\\\n- 再帰してフォルダとファイルを探索する際、folder構成が深い場合に速度低下が発生していた。再帰を使わずに対象ファイルをリストアップするように変更。\\\\n- ファイルの読み込み\\\\\\\/書き込みは並列処理可能なので、.NET 6で追加されたParallel.ForEachAsycを利用した非同期並列処理を実装\\\\n- JSON serializer\\\\\\\/deserializerをJson.NETからDynaJsonに変更\\\\n  - [DynaJsonではJSONデータをRFCに則り厳密にparseする](https:\\\\\\\/\\\\\\\/dev.to\\\\\\\/fujieda\\\\\\\/how-to-make-json-parser-strict-4a85)とのことで、escape characterの差分が現れました。フロントエンド側での表示に影響が出る懸念あり（後で要確認）\\\\n\\\\nパフォーマンスの測定も時間ができたら試してみたいと思います。\\\\n\\\\n### Exponential backoff on StreamWriter.WriteAsync\\\\n\\\\n以前のバージョンから気になっていたことなのですが、Markdownファイルの読み込み時に以下のエラーが発生することが度々ありました。\\\\n\\\\n``` powershell\\\\nSystem.IO.IOException: The process cannot access the file 'xxxx.md' because it is being used by another process.\\\\n```\\\\n\\\\nVSCodeがファイルの保存時にPrettierのコードフォーマットでファイルを保持するためと思われます。リトライの機構を組み込まなければと思いつつ放置していたので今回対応することにしました。\\\\n\\\\n調べてみると[Polly](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/App-vNext\\\\\\\/Polly)というライブラリがすごく充実していて便利そうだったので試してみました。\\\\n\\\\n``` cs\\\\nprivate AsyncRetryPolicy GetRetryPolicy()\\\\n{\\\\n    return Policy.Handle<IOException>()\\\\n        .WaitAndRetryAsync(4,\\\\n            sleepDurationProvider: retryAttempt => TimeSpan.FromSeconds(Math.Pow(2, retryAttempt)),\\\\n            onRetry: (exception, retryCount) =>\\\\n            {\\\\n                logger.LogInformation($\\\\\\\"catch IOException, retrying... ({retryCount})\\\\\\\");\\\\n            }\\\\n        );\\\\n}\\\\n\\\\nprivate async ValueTask<string> ReadToEndFileAsync(string filePath)\\\\n{\\\\n    logger.LogTrace($\\\\\\\"read file: {filePath}\\\\\\\");\\\\n    var result = string.Empty;\\\\n\\\\n    result = await GetRetryPolicy().ExecuteAsync(async () =>\\\\n    {\\\\n        using var fileStream = new FileStream(filePath, FileMode.Open, FileAccess.Read, FileShare.Read, fileStreamBufferSize, FileOptions.Asynchronous);\\\\n        using var streamReader = new StreamReader(fileStream, Encoding.UTF8);\\\\n        return await streamReader.ReadToEndAsync();\\\\n    });\\\\n    return result;\\\\n}\\\\n\\\\nprivate async ValueTask WriteJsonFileAsync(string jsonText, string jsonFilePath)\\\\n{\\\\n    logger.LogTrace($\\\\\\\"write file: {jsonFilePath}\\\\\\\");\\\\n    var targetFolder = Path.GetDirectoryName(jsonFilePath) ?? \\\\\\\"\\\\\\\";\\\\n    if (!Directory.Exists(targetFolder)) Directory.CreateDirectory(targetFolder);\\\\n\\\\n    await GetRetryPolicy().ExecuteAsync(async () =>\\\\n    {\\\\n        using var fileStream = new FileStream(jsonFilePath, FileMode.Create, FileAccess.Write, FileShare.Write, fileStreamBufferSize, FileOptions.Asynchronous);\\\\n        using var streamWriter = new StreamWriter(fileStream);\\\\n        await streamWriter.WriteAsync(jsonText);\\\\n    });\\\\n}\\\\n```\\\\n\\\\n上記のようにPollyの`Policy`を作成し、Policy.ExecuteAsyncすることで、非同期taskに対して定義したpolicyの通りにリトライしてくれます。Retry回数は4回、待機時間はExponential Back-offのロジックにしてみました。[Polly.Contrib.WaitAndRetry](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/Polly-Contrib\\\\\\\/Polly.Contrib.WaitAndRetry)という追加ライブラリには[Backoff.ExponentialBackoff](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/Polly-Contrib\\\\\\\/Polly.Contrib.WaitAndRetry#wait-and-retry-with-exponential-back-off)が用意されていて、Enterprise Appにはこちらを使うのが良さそうでした。\\\\n\\\\n``` powershell\\\\n# 実行ログ\\\\ninfo: Net6MarkdownWebEngine.Backend.Services.DocumentsWatchService[0]\\\\n      Watch documents updated after 07\\\\\\\/31\\\\\\\/2022 18:01:58\\\\ninfo: Net6MarkdownWebEngine.Backend.Services.DocumentsWatchService[0]\\\\n      File change detected. Start md2json conversion for updated file(s).\\\\ninfo: Net6MarkdownWebEngine.Converter.MarkdownConverterService[0]\\\\n      target source directory: C:\\\\\\\\Repos\\\\\\\\net6-markdown-web-engine\\\\\\\\AspNetCoreWebApi\\\\\\\\Docs\\\\\\\/md\\\\ninfo: Net6MarkdownWebEngine.Converter.MarkdownConverterService[0]\\\\n      target destination directory: C:\\\\\\\\Repos\\\\\\\\net6-markdown-web-engine\\\\\\\\AspNetCoreWebApi\\\\\\\\Docs\\\\\\\/json\\\\ninfo: Net6MarkdownWebEngine.Converter.MarkdownConverterService[0]\\\\n      No target files found to delete\\\\ninfo: Net6MarkdownWebEngine.Converter.MarkdownConverterService[0]\\\\n      1 target files found to check updates\\\\ninfo: Net6MarkdownWebEngine.Converter.MarkdownConverterService[0]\\\\n      catch IOException, retrying... (00:00:02)\\\\ninfo: Net6MarkdownWebEngine.Converter.MarkdownConverterService[0]\\\\n      No target files found to add\\\\ninfo: Net6MarkdownWebEngine.Converter.MarkdownConverterService[0]\\\\n      generate index.json to index directory: C:\\\\\\\\Repos\\\\\\\\net6-markdown-web-engine\\\\\\\\AspNetCoreWebApi\\\\\\\\..\\\\\\\/AngularStandalone\\\\\\\/src\\\\\\\/assets\\\\ninfo: Net6MarkdownWebEngine.Backend.Services.DocumentsWatchService[0]\\\\n      Watch documents updated after 07\\\\\\\/31\\\\\\\/2022 18:02:01\\\\n```\\\\n\\\\n## 関連項目\\\\n\\\\n- [IHostedService と BackgroundService クラスを使ってマイクロサービスのバックグラウンド タスクを実装する](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/ja-jp\\\\\\\/dotnet\\\\\\\/architecture\\\\\\\/microservices\\\\\\\/multi-container-microservice-net-applications\\\\\\\/background-tasks-with-ihostedservice)\\\\n- [.NET の Worker サービス](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/ja-jp\\\\\\\/dotnet\\\\\\\/core\\\\\\\/extensions\\\\\\\/workers)\\\\n- [Parallel Foreach async in C#](https:\\\\\\\/\\\\\\\/medium.com\\\\\\\/@alex.puiu\\\\\\\/parallel-foreach-async-in-c-36756f8ebe62)\\\\n- [Parallel.ForEachAsync in .NET 6](https:\\\\\\\/\\\\\\\/www.hanselman.com\\\\\\\/blog\\\\\\\/parallelforeachasync-in-net-6)\\\\n- [C#でParallelの処理速度比較(for, foreach, AsParallel(), AsParallel().ForAll(), Parallel.ForEach())](https:\\\\\\\/\\\\\\\/dasuma20.hatenablog.com\\\\\\\/entry\\\\\\\/cs\\\\\\\/parallel-of-speed)\\\\n- [Retry: Exponential backoff - Polly](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/App-vNext\\\\\\\/Polly\\\\\\\/wiki\\\\\\\/Retry#exponential-backoff)\\\\n\\\"}\"}","{\"docRef\":\"csharp\\\/create-blog-engine-with-net6-angular-net6-project\",\"content\":\"{\\\"title\\\":\\\".NET6とAngular v13でSPAサイトを作る（VSプロジェクト作成）\\\",\\\"date\\\":\\\"2021-12-26\\\",\\\"category\\\":\\\"csharp\\\",\\\"tag\\\":[\\\"csharp\\\",\\\"net6\\\",\\\"angular\\\"],\\\"body\\\":\\\"\\\\n\\\\n本サイトは自作のwebサイト生成エンジンで生成されています。自作エンジンは2019年に.NET Core 2.1とAngular v7で開発しました。\\\\n\\\\nそれから時は流れ、2021年末時点でバックエンド側は.NET6に、フロントエンド側はAngular v13にそれぞれバージョンアップされています。\\\\n\\\\n進化の波に取り残されないように、最新バージョンのモジュールを使ってwebサイト生成エンジンを再開発してみようと思います。\\\\n\\\\nこの記事では、VSプロジェクト作成編ということで.NET6のASP.NET Core SPAプロジェクトと、Angularプロジェクトをそれぞれ作成していきます。Microsoft Docsに[チュートリアル記事](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/en-gb\\\\\\\/visualstudio\\\\\\\/javascript\\\\\\\/tutorial-asp-net-core-with-angular?view=vs-2022)を見つけたので、それを参考にしつつ作業を進めていきます。\\\\n\\\\n## 開発準備\\\\n\\\\nまずは.NET 6を利用するために、Visual Studio2022をinstallします。フロントエンド側は、nodejsも含めて個別に必要なpackageを手動インストールするつもりだったので、ワークロードは`ASP.NETとWeb開発`のみを選択しました。\\\\n\\\\n新規プロジェクトを新しいAngular Templateから作成時に、globalにinstallしているAngular CLIがv9.1.12では古すぎるのかエラーが発生しました。\\\\n\\\\nなのでnodejsとAngular CLIをアップグレードしました。\\\\n\\\\n- nodejs: nodejs-lts: 14.16.1 -> 16.13.1\\\\n  - scoopで管理しているので`scoop update *`コマンドにて更新\\\\n- Angular CLI: 9.1.12 -> 12.2.14\\\\n  - 最新はv13.1.2ですが、このバージョンだと[プロジェクト作成時にエラーが発生](https:\\\\\\\/\\\\\\\/developercommunity.visualstudio.com\\\\\\\/t\\\\\\\/standalone-typescript-angular-merge-confilct\\\\\\\/1611006)したため、まずはv12を使用\\\\n\\\\n## 新規ソリューションとフロントエンドプロジェクトの作成\\\\n\\\\nVS2022で`新しいプロジェクト`を選択し、`Standalone Angular Template`を使用してプロジェクトを作成しました。\\\\n\\\\n`追加情報`ウィンドウが表示されたので、`Add integration for Empty ASP.NET Web API Project`にチェックを入れました。\\\\n\\\\nプロジェクト生成処理が正常に終了すると、slnファイルとフロントエンドのAngularプロジェクトが生成されていました。見慣れない`{プロジェクト名}.esproj`というのが気になって調べたところ、VS2022から利用可能になった[新しいJavaScript\\\\\\\/TypeScript Projectのファイル](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/en-gb\\\\\\\/visualstudio\\\\\\\/javascript\\\\\\\/javascript-in-vs-2022?view=vs-2022#project-templates)ということでした。\\\\n\\\\n## バックエンドプロジェクトの作成\\\\n\\\\n先に作成したソリューションに追加する形で、ASP.NET Core Web APIプロジェクトを作成しました。\\\\n\\\\nフレームワークには`.NET 6.0`を選択、承認は不要なので`なし`にしました。\\\\n\\\\nC# 9.0の新機能 [最上位レベルのステートメント](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/ja-jp\\\\\\\/dotnet\\\\\\\/csharp\\\\\\\/whats-new\\\\\\\/csharp-9#top-level-statements)のおかげで、Program.csが驚くほどシンプル担っているのに驚きました。\\\\n\\\\nC# 10からglobal namespaceが使えるようになったとのことですが、生成されたASP.NET Core APIのコードは以前のままだったので、global namespaceに変更してみました。\\\\n\\\\nまた、esprojのnpmを使うように指示している部分をyarnを使うように変更しました。\\\\n\\\\n``` diff\\\\n @@ -3,7 +3,7 @@\\\\n    <ProjectGuid>bab8cfe4-58b1-4e20-acee-2a2596812eb4<\\\\\\\/ProjectGuid>\\\\n  <\\\\\\\/PropertyGroup>\\\\n  <PropertyGroup Condition=\\\\\\\"'$(Configuration)|$(Platform)'=='Debug|AnyCPU'\\\\\\\">\\\\n--    <StartupCommand>npm start<\\\\\\\/StartupCommand>\\\\n++    <StartupCommand>yarn start<\\\\\\\/StartupCommand>\\\\n    <JavaScriptTestFramework>Jasmine<\\\\\\\/JavaScriptTestFramework>\\\\n  <\\\\\\\/PropertyGroup>\\\\n  <ItemGroup>\\\\n @@ -17,6 +17,6 @@\\\\n    <\\\\\\\/Exec>\\\\n    <Error Condition=\\\\\\\"'$(ErrorCode)' != '0'\\\\\\\" Text=\\\\\\\"Node.js is required to build and run this project. To continue, please install Node.js from https:\\\\\\\/\\\\\\\/nodejs.org\\\\\\\/, and then restart your command prompt or IDE.\\\\\\\" \\\\\\\/>\\\\n    <Message Importance=\\\\\\\"high\\\\\\\" Text=\\\\\\\"Restoring dependencies using 'npm'. This may take several minutes...\\\\\\\" \\\\\\\/>\\\\n--    <Exec WorkingDirectory=\\\\\\\"$(SpaRoot)\\\\\\\" Command=\\\\\\\"npm install\\\\\\\" \\\\\\\/>\\\\n++    <Exec WorkingDirectory=\\\\\\\"$(SpaRoot)\\\\\\\" Command=\\\\\\\"yarn install\\\\\\\" \\\\\\\/>\\\\n  <\\\\\\\/Target>\\\\n<\\\\\\\/Project>\\\\n```\\\\n\\\\n[プロジェクトのプロパティ設定](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/en-gb\\\\\\\/visualstudio\\\\\\\/javascript\\\\\\\/tutorial-asp-net-core-with-angular?view=vs-2022#set-the-project-properties)と[スタートアップ プロジェクトの設定](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/en-gb\\\\\\\/visualstudio\\\\\\\/javascript\\\\\\\/tutorial-asp-net-core-with-angular?view=vs-2022#set-the-startup-project)は書かれている通りに実施しました。\\\\n\\\\n最初はフロントエンドプロジェクトのプロパティ設定（起動するdebuggerに`launch.json`を指定）の画面がうまく表示されず、３０分ほどハマりました。\\\\n\\\\nesprojファイルの先頭行が`<Project Sdk=\\\\\\\"Microsoft.VisualStudio.JavaScript.Sdk\\\\\\\/0.4.0-alpha\\\\\\\">`で始まっており、[nugetのサイト](https:\\\\\\\/\\\\\\\/www.nuget.org\\\\\\\/packages\\\\\\\/Microsoft.VisualStudio.JavaScript.SDK\\\\\\\/)を確認すると、最新バージョン2021-12-01頃`0.5.0-alpha`に更新されていました。VS2022 previewでは`0.4.0-alpha`を利用しており、リリースのタイミングで`0.5.0-alpha`へ更新されたのにテンプレートが生成するesprojのバージョンが古いためにうまく動かなかったようです。\\\\n\\\\nProject SDKのバージョンを以下のように`0.5.0-alpha`へ更新したところ、スクリプトファイルなどが正しくプロジェクトへincludeされた状態になり、プロパティもチュートリアルのように正しく表示されるようになりました。\\\\n\\\\n``` diff\\\\n @@ -1,4 +1,4 @@\\\\n-<Project Sdk=\\\\\\\"Microsoft.VisualStudio.JavaScript.Sdk\\\\\\\/0.4.0-alpha\\\\\\\">\\\\n+<Project Sdk=\\\\\\\"Microsoft.VisualStudio.JavaScript.Sdk\\\\\\\/0.5.0-alpha\\\\\\\">\\\\n  <PropertyGroup Label=\\\\\\\"Globals\\\\\\\">\\\\n    <ProjectGuid>bab8cfe4-58b1-4e20-acee-2a2596812eb4<\\\\\\\/ProjectGuid>\\\\n  <\\\\\\\/PropertyGroup>\\\\n```\\\\n\\\\n最後にバックエンド側`launchSettings.json`で指定しているApplicationURL(https)と、フロントエンド側`proxy.conf.js`のtarget APIサーバURLがポートまで一致するように設定したら、全ての設定が完了しました。\\\\n\\\\nVisual Studio F5のデバッグ実行で、フロントエンド側とバックエンド側が両方同時に実行され、Weather Forcastのデモデータが想定通り表示されました。\\\\n\\\\nproxy.conf.jsがポイントのようで、`angular.json`の`projects.{app name}.architect.serve.options.proxyConfig`にこのファイルが指定されていました。詳細は要調査ですが、HttpClient.getする際に、contextと一致するrequestのtarget apiサーバを指定しているようです。\\\\n\\\\n``` js\\\\n\\\\\\\/\\\\\\\/ proxy.conf.js\\\\nconst PROXY_CONFIG = [\\\\n  {\\\\n    context: [\\\\n      \\\\\\\"\\\\\\\/weatherforecast\\\\\\\",\\\\n    ],\\\\n    target: \\\\\\\"https:\\\\\\\/\\\\\\\/localhost:7069\\\\\\\",\\\\n    secure: false\\\\n  }\\\\n]\\\\n\\\\nmodule.exports = PROXY_CONFIG;\\\\n```\\\\n\\\\n新しいAPIを実装したら、それを`proxy.conf.js`に追加すれば良さそうです。\\\\n\\\\n## 関連項目\\\\n\\\\n- [ASP.NET Core で Angular プロジェクト テンプレートを使用する](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/ja-jp\\\\\\\/aspnet\\\\\\\/core\\\\\\\/client-side\\\\\\\/spa\\\\\\\/angular?view=aspnetcore-6.0&tabs=visual-studio)\\\\n- [チュートリアル: Visual Studio での Angular を使用した ASP.NET Core アプリの作成](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/ja-jp\\\\\\\/visualstudio\\\\\\\/javascript\\\\\\\/tutorial-asp-net-core-with-angular?view=vs-2022)\\\\n- [dotnet new 用の .NET の既定のテンプレート](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/ja-jp\\\\\\\/dotnet\\\\\\\/core\\\\\\\/tools\\\\\\\/dotnet-new-sdk-templates#angular-react)\\\\n- [Visual Studio 2022 の JavaScript および TypeScript](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/ja-jp\\\\\\\/visualstudio\\\\\\\/javascript\\\\\\\/javascript-in-vs-2022?view=vs-2022)\\\\n- [最上位レベルのステートメント - Main メソッドを使用しないプログラム](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/ja-jp\\\\\\\/dotnet\\\\\\\/csharp\\\\\\\/fundamentals\\\\\\\/program-structure\\\\\\\/top-level-statements#global-namespace)\\\\n\\\"}\"}","{\"docRef\":\"csharp\\\/trust-the-aspnet-core-https-development-certificate\",\"content\":\"{\\\"title\\\":\\\"ASP.NET Core HTTPS 開発証明書を信頼する\\\",\\\"date\\\":\\\"2019-11-01\\\",\\\"category\\\":\\\"csharp\\\",\\\"tag\\\":[\\\"csharp\\\",\\\"asp.net core\\\",\\\"https\\\",\\\"dev-certs\\\"],\\\"body\\\":\\\"\\\\n\\\\nASP.NET CoreでHTTPSを利用したAppを開発し始めた際、初見のエラーが発生したエラーので対応方法を記録します。内容的にはMicrosoft learnの[Windows と macOS で ASP.NET Core HTTPS 開発証明書を信頼する](https:\\\\\\\/\\\\\\\/learn.microsoft.com\\\\\\\/ja-jp\\\\\\\/aspnet\\\\\\\/core\\\\\\\/security\\\\\\\/enforcing-ssl?view=aspnetcore-7.0&tabs=visual-studio#trust-the-aspnet-core-https-development-certificate-on-windows-and-macos)です。\\\\n\\\\n## エラーの再現方法\\\\n\\\\nASP.NET CoreのWebAppプロジェクトを作成しデバッグ起動します。\\\\n\\\\n``` powershell\\\\nPS C:\\\\\\\\\\\\\\\\Repos\\\\\\\\\\\\\\\\github\\\\\\\\\\\\\\\\tech-log\\\\\\\\\\\\\\\\Website> dotnet run\\\\n\\\\nC:\\\\\\\\\\\\\\\\Repos\\\\\\\\\\\\\\\\github\\\\\\\\\\\\\\\\tech-log\\\\\\\\\\\\\\\\Website\\\\\\\\\\\\\\\\Properties\\\\\\\\\\\\\\\\launchSettings.json からの起動設定を使用中...\\\\ninfo: Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager[0]\\\\n      User profile is available. Using 'C:\\\\\\\\\\\\\\\\Users\\\\\\\\\\\\\\\\takum\\\\\\\\\\\\\\\\AppData\\\\\\\\\\\\\\\\Local\\\\\\\\\\\\\\\\ASP.NET\\\\\\\\\\\\\\\\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.\\\\ncrit: Microsoft.AspNetCore.Server.Kestrel[0]\\\\n      Unable to start Kestrel.\\\\nSystem.InvalidOperationException: Unable to configure HTTPS endpoint. No server certificate was specified, and the default developer certificate could not be found.\\\\nTo generate a developer certificate run 'dotnet dev-certs https'. To trust the certificate (Windows and macOS only) run 'dotnet dev-certs https --trust'.\\\\nFor more information on configuring HTTPS see <https:\\\\\\\/\\\\\\\/go.microsoft.com\\\\\\\/fwlink\\\\\\\/?linkid=848054>.\\\\n   at Microsoft.AspNetCore.Hosting.ListenOptionsHttpsExtensions.UseHttps(ListenOptions listenOptions, Action`1 configureOptions)\\\\n   at Microsoft.AspNetCore.Hosting.ListenOptionsHttpsExtensions.UseHttps(ListenOptions listenOptions)\\\\n   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context)\\\\n   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, KestrelServerOptions serverOptions, ILogger logger, Func`2 createBinding)\\\\n   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext]\\\\\\\\(IHttpApplication\\\\\\\\`1 application, CancellationToken cancellationToken)\\\\n\\\\nUnhandled Exception: System.InvalidOperationException: Unable to configure HTTPS endpoint. No server certificate was specified, and the default developer certificate could not be found.\\\\nTo generate a developer certificate run 'dotnet dev-certs https'. To trust the certificate (Windows and macOS only) run 'dotnet dev-certs https --trust'.\\\\nFor more information on configuring HTTPS see <https:\\\\\\\/\\\\\\\/go.microsoft.com\\\\\\\/fwlink\\\\\\\/?linkid=848054>.\\\\n   at Microsoft.AspNetCore.Hosting.ListenOptionsHttpsExtensions.UseHttps(ListenOptions listenOptions, Action`1 configureOptions)\\\\n   at Microsoft.AspNetCore.Hosting.ListenOptionsHttpsExtensions.UseHttps(ListenOptions listenOptions)\\\\n   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context)\\\\n   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(IServerAddressesFeature addresses, Kes   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServer.StartAsync[TContext](IHttpApplication`1 application, Canc   at Microsoft.AspNetCore.Hosting.Internal.WebHost.StartAsync(CancellationToken cancellationToken)\\\\n   at Microsoft.AspNetCore.Hosting.WebHostExtensions.RunAsync(IWebHost host, CancellationToken token, String shutdownMessage)\\\\n   at Microsoft.AspNetCore.Hosting.WebHostExtensions.RunAsync(IWebHost host, CancellationToken token)\\\\n   at Microsoft.AspNetCore.Hosting.WebHostExtensions.Run(IWebHost host)\\\\n   at Karen.Web.Program.Main(String\\\\\\\\[] args) in C:\\\\\\\\\\\\\\\\Repos\\\\\\\\\\\\\\\\github\\\\\\\\\\\\\\\\tech-log\\\\\\\\\\\\\\\\Website\\\\\\\\\\\\\\\\Program.cs:line 10\\\\n```\\\\n\\\\nStartupの処理の中で`app.UseHsts()`していると発生するようです。\\\\n\\\\n## 対応方法\\\\n\\\\nエラーメッセージの中に対応方法まで記載されています。\\\\n\\\\n``` powershell\\\\nPS C:\\\\\\\\\\\\\\\\Repos\\\\\\\\\\\\\\\\github\\\\\\\\\\\\\\\\tech-log\\\\\\\\\\\\\\\\Website> dotnet dev-certs https\\\\nThe HTTPS developer certificate was generated successfully.\\\\n```\\\\n\\\\n再度デバッグ実行すると、エラーは発生しなくなりました。\\\\n\\\\n``` powershell\\\\nPS C:\\\\\\\\\\\\\\\\Repos\\\\\\\\\\\\\\\\github\\\\\\\\\\\\\\\\tech-log\\\\\\\\\\\\\\\\Website> dotnet run\\\\nC:\\\\\\\\\\\\\\\\Repos\\\\\\\\\\\\\\\\github\\\\\\\\\\\\\\\\tech-log\\\\\\\\\\\\\\\\Website\\\\\\\\\\\\\\\\Properties\\\\\\\\\\\\\\\\launchSettings.json からの起動設定を使用中...\\\\ninfo: Microsoft.AspNetCore.DataProtection.KeyManagement.XmlKeyManager[0]\\\\n      User profile is available. Using 'C:\\\\\\\\\\\\\\\\Users\\\\\\\\\\\\\\\\takum\\\\\\\\\\\\\\\\AppData\\\\\\\\\\\\\\\\Local\\\\\\\\\\\\\\\\ASP.NET\\\\\\\\\\\\\\\\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.\\\\ninfo: Karen.Web.DocWatchService[0]\\\\n      Start conversion for updated file.\\\\n```\\\\n\\\\n## 追加で確認したこと\\\\n\\\\n開発専用のSSL証明書を作成する必要があったということのようですが、`app.UseHsts`が何をしているのかよくわかっていませんでした。[HSTS - wikipedia](https:\\\\\\\/\\\\\\\/en.wikipedia.org\\\\\\\/wiki\\\\\\\/HTTP_Strict_Transport_Security)によると、初回のhttpアクセス時のレスポンスヘッダに`\\\\\\\"Strict-Transport-Security`を付与することで、次回以降httpsでの接続を強制するというルールの事でした。\\\\n\\\\nまた、今回の対応では`dotnet dev-certs https`で、証明書の作成をしていましたが、最初に挙げた記事など色々な参考文献をあたっても`dotnet dev-certs https --trust`という風にtrustオプションをつけていました。開発時証明書を（無ければ作成し）信頼する事になるのでしょう。\\\\n\\\\n作業マシンで一度このコマンドを実行すればよいものなので、なかなか発生せず忘れてしまいそうです。`dotnet dev-certs`という文言を見かけたら、この記事を思い出すことにしようと思います。\\\\n\\\\n## 関連項目\\\\n\\\\n- [ASP.NET Core の概要 | Microsoft Learn](https:\\\\\\\/\\\\\\\/learn.microsoft.com\\\\\\\/ja-jp\\\\\\\/aspnet\\\\\\\/core\\\\\\\/getting-started\\\\\\\/?view=aspnetcore-7.0&tabs=windows)\\\\n- [.NET CLI を使用して自己署名証明書を生成する | Microsoft Learn](https:\\\\\\\/\\\\\\\/learn.microsoft.com\\\\\\\/ja-jp\\\\\\\/dotnet\\\\\\\/core\\\\\\\/additional-tools\\\\\\\/self-signed-certificates-guide)\\\\n\\\"}\"}","{\"docRef\":\"env\\\/data-backup\",\"content\":\"{\\\"title\\\":\\\"自宅環境のデータバックアップ設計\\\",\\\"date\\\":\\\"2022-10-16\\\",\\\"category\\\":\\\"環境設定\\\",\\\"tag\\\":[\\\"backup\\\",\\\"windows 10\\\",\\\"windows 11\\\",\\\"synkron\\\"],\\\"body\\\":\\\"\\\\n\\\\n必要なdataのbackupを簡単に行うため、folder構成とbackup手順を考えます。\\\\n\\\\n## folder構成\\\\n\\\\n共有dataの保存用に正と副のストレージを用意します。\\\\n\\\\n- 正： 常時稼働マシン(windows 10)のUSB3接続ストレージ。4TBを記憶域でミラーリング\\\\n- 副 #1： メイン開発マシン(windows 11)に搭載したバックアップ専用ストレージ。ミラーリング等は行わず、単一のディスク(4TB)を利用\\\\n- 副 #2： 不定期に副 #1から__iCloudDrive__のデータだけをバックアップ。単一のディスク(2TB)を利用\\\\n\\\\n正から副へ、定期的に同期処理を行うことでdataをbackupします。共有folderの構成は以下のように設定。\\\\n\\\\n- __Shared Data__ : top folder。以下のフォルダを正副同期する\\\\n  - __Backup__ : driverやtoolなどの過去データや、passwordファイルなどの重要データを保管する\\\\n  - __Documents__ : 家族共用のデータや個人データをフォルダ分けして保管する。個人フォルダ内は覗けないように権限で管理。\\\\n  - __iCloudDrive__ : iCloudドライブとの同期用フォルダ。家族の写真や動画データをiCloudにアップロードして保管している。\\\\n  - __Multimedia__ : 音楽データや動画データを保管する。\\\\n\\\\n## backup\\\\n\\\\n正から副へのbackupには[synkron](https:\\\\\\\/\\\\\\\/sourceforge.net\\\\\\\/projects\\\\\\\/synkron\\\\\\\/)を利用。Backup、Documents、iCloudDrive、Multimediaの4つのフォルダ毎にバックアップ設定を作成\\\\n\\\\n- 過去の利用状況から、すべてのフォルダに同時に変更が入ることは少なかったので4つに分割\\\\n- 変更があったフォルダだけ同期すると、一回の同期時間が短くなる\\\\n\\\"}\"}","{\"docRef\":\"env\\\/git-ssh-configuration\",\"content\":\"{\\\"title\\\":\\\"Git: githubへのssh接続をSourceTreeからwindows 10標準のssh clientに切り替える\\\",\\\"date\\\":\\\"2022-07-23\\\",\\\"category\\\":\\\"環境設定\\\",\\\"tag\\\":[\\\"git\\\",\\\"vscode\\\",\\\"openssh\\\",\\\"windows 10\\\",\\\"windows 11\\\"],\\\"body\\\":\\\"## 経緯\\\\n\\\\n- これまではSourceTreeを利用してGithub, Bitbucketのリモートリポジトリを操作していました\\\\n- 接続にはsshを利用し、SourceTreeに付属のPuttyおよびPageantで鍵の運用をしていました\\\\n- [angular-cli-ghpagesを利用する](doc\\\\\\\/angular\\\\\\\/angular-setup-ghpages)<!--rehype:class=internal-link-->の作業で、origin\\\\\\\/gh-pagesにpushする処理でエラーが発生\\\\n- VSCodeをPutty(Pageant)を連携する方法を調べたが見つからず、ssh clientの利用方法を見直す必要がありました\\\\n\\\\n## 環境\\\\n\\\\n- Windows 10 May 2019 Update(バージョン1903)\\\\n- SourceTree 3.1.3\\\\n\\\\n## 実施した手順\\\\n\\\\nまず初めに、VSCodeからssh接続でremoteにpushする方法について、google検索で情報収集しました。Puttyを利用している記事はヒットせず、openssh clientの設定を行う記事が大半でした。\\\\n\\\\n開発環境はWindows 10 May 2019 Update(バージョン1903)が適用済みで、特に設定不要でssh clientが利用可能になっていました。なのでこれを利用することにします。\\\\n\\\\n途中までSourceTreeで作業をしていたので、鍵の作成や公開鍵のgithubへの登録は完了済みでした。なのでssh clientに秘密鍵を登録して使えるようにします。\\\\n\\\\n### OpenSSH Authentication Agentサービスの設定変更\\\\n\\\\nOpenSSH Authentication Agentサービスは無効状態でした。サービスを起動し、設定を自動起動に変更しました。\\\\n\\\\n### ppkファイルからOpenSSH形式の秘密鍵を生成\\\\n\\\\nPutty(Pageant)が利用している秘密鍵(.ppk)はOpenSSHと互換性のない独自形式です。ssh clientで利用するためにはOpenSSH形式に変換してあげる必要があります。\\\\n\\\\n1. SourceTreeのメニューから`SSH キーの生成\\\\\\\/インポート`を選択\\\\\\\\\\\\n    <img src=\\\\\\\"assets\\\\\\\/images\\\\\\\/git-ssh-configuration\\\\\\\/git-ssh-configuration-1.png\\\\\\\" alt=\\\\\\\"puttygen.exe\\\\\\\" title=\\\\\\\"puttygen.exe\\\\\\\">\\\\n\\\\n2. Loadボタンを押して、githubの秘密鍵(.ppk)を読み込み、メニュの`Conversions` > `Export OpenSSH key`を選択。OpenSSh形式の秘密鍵: `id_rsa`を生成\\\\n3. 作成した`id_ras`ファイルを`c:\\\\\\\\Users\\\\\\\\<username>\\\\\\\\.ssh`フォルダに配置\\\\n\\\\n1.で実行されるツール(puttygen.exe)は、私の環境では`c:\\\\\\\\Users\\\\\\\\<username>\\\\\\\\AppData\\\\\\\\Local\\\\\\\\SourceTree\\\\\\\\app-3.1.3\\\\\\\\tools\\\\\\\\putty\\\\\\\\puttygen.exe`にありました。\\\\n\\\\n`c:\\\\\\\\Users\\\\\\\\<username>\\\\\\\\.ssh`も存在していましたが、中身は空でした。\\\\n\\\\n### ssh-agentに秘密鍵を登録\\\\n\\\\n以下のコマンドを実行します。\\\\n\\\\n``` powershell\\\\n> cd c:\\\\\\\\Users\\\\\\\\<username>\\\\\\\\.ssh\\\\n> ssh-add id_rsa\\\\n```\\\\n\\\\nパスフレーズを聞かれるので、正しく入力すると登録が完了しました。\\\\n\\\\nこれで、gitコマンドを使ってリモートリポジトリを操作できるようになりました。\\\\n\\\\n## SourceTreeの併用について\\\\n\\\\nこれまで通りSourceTreeも併用していきたいので、鍵の管理フォルダを`c:\\\\\\\\Users\\\\\\\\<username>\\\\\\\\.ssh`に変更しました。\\\\n\\\\nそして、これまで鍵長2048でキーを作成していることに気が付いたので、鍵長4096のキーにすべて置き換えることにしました。\\\\n\\\\nBitbucket用、Github用に別々のキーを作成して管理していましたが、今回はAzure DevOpsを含めた3つのgitリポジトリへのアクセスを、共通した1つの鍵で管理することにしました。\\\\n\\\\n``` powershell\\\\n.ssh> dir\\\\n\\\\nMode                LastWriteTime         Length Name\\\\n----                -------------         ------ ----\\\\n-a----       2019\\\\\\\/08\\\\\\\/15     14:11           3311 id_rsa\\\\n-a----       2019\\\\\\\/08\\\\\\\/15     14:10           2719 id_rsa.ppk\\\\n-a----       2019\\\\\\\/08\\\\\\\/15     15:13            739 id_rsa.pub\\\\n-a----       2019\\\\\\\/08\\\\\\\/15     15:49           4377 known_hosts\\\\n```\\\\n\\\\n## 環境変数の追加\\\\n\\\\n後日、Windows 11でgit for windowsをscoopを使ってインストール後にOpenSSH Agentの設定を行ったのですが、登録したはずのパスフレーズがうまく利用されない問題が発生しました。gitコマンドでremoteへアクセス時に毎回再入力ダイアログが表示されます。\\\\n\\\\n`コントロールパネル` > `ユーザアカウント` > `環境変数の変更`から、ユーザ環境変数`GIT_SSH`を追加して解決しました。\\\\n\\\\n- variable: GIT_SSH\\\\n- value: C:\\\\\\\\Windows\\\\\\\\System32\\\\\\\\OpenSSH\\\\\\\\ssh.exe\\\\n\\\\n## 作業時に参照した情報\\\\n\\\\n- [PuTTYを卒業してWindows 10標準のssh client（ベータ）に切り替えた](http:\\\\\\\/\\\\\\\/www.freia.jp\\\\\\\/taka\\\\\\\/blog\\\\\\\/windows-native-ssh-client\\\\\\\/index.html)\\\\n- [Use SSH key authentication](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/en-us\\\\\\\/azure\\\\\\\/devops\\\\\\\/repos\\\\\\\/git\\\\\\\/use-ssh-keys-to-authenticate?view=azure-devops)\\\\n- [Why git can't remember my passphrase under Windows - stackoverflow](https:\\\\\\\/\\\\\\\/stackoverflow.com\\\\\\\/questions\\\\\\\/370030\\\\\\\/why-git-cant-remember-my-passphrase-under-windows)\\\"}\"}","{\"docRef\":\"env\\\/old-machines\",\"content\":\"{\\\"title\\\":\\\"(旧)マシン構成\\\",\\\"date\\\":\\\"2022-10-15\\\",\\\"category\\\":\\\"Historical \\\\\\\/ 環境設定\\\",\\\"tag\\\":[\\\"dm1-3000\\\",\\\"ml110G6\\\",\\\"ts-239 pro\\\",\\\"mac mini\\\"],\\\"body\\\":\\\"過去に利用していたマシン情報の整理\\\\n\\\\n## HP Pavilion dm1-3000\\\\n\\\\n以前mainで使用していたlaptop pc。ACアダプタを繋げっぱなしにしていたせいで、バッテリー充電できなくなってしまいました。。。\\\\n\\\\n## HP ML110G6 (1台目)\\\\n\\\\n公式サイト: <https:\\\\\\\/\\\\\\\/support.hpe.com\\\\\\\/hpesc\\\\\\\/public\\\\\\\/docDisplay?docId=emr_na-c01926955>\\\\n\\\\n仮想化ホスト用サーバ。ほぼ24時間稼働だが、夏場は熱暴走が心配なので停止させていました。\\\\n\\\\nVMWare ESXi -> Hyper-V Server 2010 -> Windows 8.1 pro + Client Hyper-V -> Windows 10 pro + Client Hyper-Vという変遷を経て、2021年に稼働停止。\\\\n\\\\n| Parts | Spec |\\\\n| --- | --- |\\\\n| CPU | Xeon L3426 1.86GHz |\\\\n| Memory1 | UMAX Cetus DCDDR3-16GB-1333 [DDR3 PC3-10600 8GB] |\\\\n| Memory2 | KVR1333D3E9SK2\\\\\\\/8G [DDR3 PC3-10600 ECC unbuffered 4GB] |\\\\n| Memory3 | UMAX Cetus DCDDR3-16GB-1333 [DDR3 PC3-10600 8GB] |\\\\n| Memory4 | KVR1333D3E9SK2\\\\\\\/8G [DDR3 PC3-10600 ECC unbuffered 4GB] |\\\\n| HDD1 | crucial RealSSD C300 128GB |\\\\n| HDD2 | HGST HDS722020ALA330 2TB |\\\\n| HDD3 | HGST HDS722020ALA330 2TB |\\\\n| HDD4 | Seagate ST2000DL003 2TB |\\\\n| HDD5 | Seagate ST2000DL003 2TB |\\\\n| LAN1 | Onboard(Broadcom Gigabit LAN adapter) |\\\\n| LAN2 | PCI VIA Velocity VT6122 Gigabit Ethernet controller |\\\\n\\\\n## HP ML110G6 (2台目)\\\\n\\\\nFreeNASをインストールしてiSCSIストレージサーバにしていたが電気代高騰により予備機になった。2018年にハードオフで売却。\\\\n\\\\n| Parts | Spec |\\\\n| --- | --- |\\\\n| CPU | Celeron G1101 2.26GHz |\\\\n| Memory1 | HYNIX [PC3-10600 DDR3-1333 CL9 ECC 2GB]: 1台目のdefault memory |\\\\n| Memory2 | |\\\\n| Memory3 | HYNIX [PC3-10600 DDR3-1333 CL9 ECC 2GB]: 2台目のdefault memory |\\\\n| Memory4 | |\\\\n| HDD1 | HGST HDP725050GLA360 500GB |\\\\n| HDD2 | HGST HDP725050GLA360 500GB |\\\\n| LAN1 | Onboard(Broadcom Gigabit LAN adapter) |\\\\n\\\\n## QNAP TS-239 Pro\\\\n\\\\n公式サイト: <https:\\\\\\\/\\\\\\\/www.qnap.com\\\\\\\/en-me\\\\\\\/product\\\\\\\/ts-239%20pro>\\\\n\\\\ndata backup用storageとして購入。3TB storage x2をmirroring(Raid1)し、ext4でformatして使用。ほぼ24時間稼働。OSをDebian Wheezyに入れ替え、samba4のdomain controllerにしていました。\\\\n\\\\n電源プラグの接触が怪しくなり、2018年にハードオフで売却。\\\\n\\\\n| Parts | Spec |\\\\n| --- | --- |\\\\n| CPU | Intel Atom N270 1.6GHz |\\\\n| Memory | 1GB |\\\\n| HDD1 | HGST HDS723030ALA640 3TB |\\\\n| HDD2 | HGST HDS723030ALA640 3TB |\\\\n\\\\n## Mac mini(Late 2009)\\\\n\\\\n公式サイト: <https:\\\\\\\/\\\\\\\/support.apple.com\\\\\\\/kb\\\\\\\/SP577?locale=ja_JP>\\\\n\\\\n一時期、main pcをMacに移行しようとして購入。結局Windowsに戻ったため、現在はiTunesでiPhoneとの同期専用マシンになっていました。2018年にメルカリで売却。\\\"}\"}","{\"docRef\":\"env\\\/setup-new-dev-workstation\",\"content\":\"{\\\"title\\\":\\\"新開発マシンへの移行手順を標準化する\\\",\\\"date\\\":\\\"2023-12-10\\\",\\\"category\\\":\\\"環境設定\\\",\\\"tag\\\":[\\\"windows 11\\\",\\\"setup\\\",\\\"scoop\\\"],\\\"body\\\":\\\"STORMのBTOパソコンを購入しました。メインマシンとしてセットアップした際の手順をまとめます。\\\\n\\\\n> 2023\\\\\\\/12にブルースクリーン発生->OS起動できなくなり、Windows11を初期セットアップしました。本記事を見ながら作業を実施し、手順の入れ替えや改善点を更新しました\\\\n\\\\n## 新PCのスペック確認\\\\n\\\\nSTORMのBTOパソコンを注文しました。\\\\n| Parts | Spec |\\\\n| --- | --- |\\\\n|商品名| [ST-12C](https:\\\\\\\/\\\\\\\/www.stormst.com\\\\\\\/products\\\\\\\/detail\\\\\\\/1643) |\\\\n|CPU | Core i7-12700 |\\\\n|MEM | Crucial CT8G4DFS632A.M4FB 8GB x2 |\\\\n|m.2 ssd | Crucial P5 Plus 500GB PCIe M.2 2280SS SSD |\\\\n|MB | MSI B660M-P DDR4 |\\\\n|BOX | Fractal Design Define 7 Compact |\\\\n|Graphic | Radeon RX460 2GB(旧マシンからの流用) |\\\\n\\\\n## データ移行が必要なもの\\\\n\\\\n### browser bookmark\\\\n\\\\n- Edgeに生活用のbookmarkをまとめてexport\\\\\\\/import\\\\n- その他はbraveで同期する\\\\n\\\\n### その他\\\\n\\\\n- synkron portable\\\\n- Hyper-Vの設定\\\\n\\\\n## セットアップログ\\\\n\\\\n### Windows 11のインストール\\\\n\\\\n- [x] Windows11のインストールメディア（USB）を作成する\\\\n- [x] USBメディアを使用してOSをインストール\\\\n- [x] インターネットに接続し、Microsoftアカウントにサインイン\\\\n- [x] ライセンス認証をアクティブ化\\\\n  - 廃棄予定のデバイスに使用していた「Microsoftアカウントにリンクされたデジタルライセンス」を移行して解決\\\\n\\\\n### ネットワークドライブの割り当て\\\\n\\\\n最初は特別なツールを入れずとも内容が確認できるように、txt形式でファイルを作成\\\\n- IPアドレス\\\\n- DNS\\\\n- ネットワークドライブのパスとログインユーザ情報\\\\n\\\\n\\\\n### デバイスドライバの更新\\\\n\\\\n- まずはEdgeのお気に入りをインポート\\\\n- MSIのページ(Edgeのお気に入りにリンクがある)から、マザーボードの各種ドライバを更新する\\\\n  - 2023\\\\\\\/12に発生したブルースクリーンの原因はネットワークカードのドライバだった。不定期にネットワークが切れる現象が起きていたので、事前に更新していれば。。。\\\\n- [x] ~~[MSI Center](https:\\\\\\\/\\\\\\\/www.msi.com\\\\\\\/Landing\\\\\\\/MSI-Center)を利用してドライバの更新~~\\\\n  - 不安定さを感じたので導入しないことにしました\\\\n- [x] Radeon graphic driver Adrenalin edition\\\\n  - Windows11が自動で導入するドライバでも問題なかったので、後回しでもok\\\\n\\\\n### scoopによるappインストール\\\\n\\\\n[scoopを用いた環境セットアップスクリプト](doc\\\\\\\/env\\\\\\\/use-scoop#scoopを用いた環境セットアップスクリプト)<!--rehype:class=internal-link-->にインストールやセットアップをまとめたPowerShellスクリプトを作成しているので参照する。\\\\n\\\\n### scoopでインストールできないapp(インストーラー利用)\\\\n\\\\nインストーラーを利用して以下のappをインストール\\\\n\\\\n- [x] Brave\\\\n  - Brave Syncでお気に入りを同期\\\\n- [x] Visual Studio Code\\\\n- [x] ~~OneDrive~~\\\\n  - Windows11に含まれるようになったので個別インストール不要\\\\n- [x] spacedesk\\\\n- [x] LibreOffice\\\\n- [x] NUX Audio Driver\\\\n- [x] ~~ProSAFE Plus Utility(L3スイッチ設定ツール)~~\\\\n  - [サポート終了](https:\\\\\\\/\\\\\\\/www.jp.netgear.com\\\\\\\/support\\\\\\\/product\\\\\\\/prosafe%20plus%20utility)になっていました。現行機種は、ツールを導入せずともWebから設定更新になっている模様\\\\n- [x] ~~Mouse without Borders~~\\\\n  - PowerToysに含まれるので個別インストール不要\\\\n- [ ] ~~K-Lite Codec Pack~~\\\\n  - コーデック周りはWindows11の標準でも問題なさそうな雰囲気なので、導入せず様子を見る。必要になったら実施する\\\\n\\\\n### scoopでインストールできないapp(ポータブルapp)\\\\n\\\\nインストーラーの不要なポータブルappは、NASにモジュールを事前にまとめておき`C:\\\\\\\\Apps\\\\\\\\local`にまとめてコピー\\\\n\\\\n- [x] MagicFinder\\\\n- [x] ProcessExplorer\\\\n- [x] SynkronPortable\\\\n  - 同期設定もそのまま移行できていました\\\\n- [x] WDIDLE3 for Windows\\\\n- [x] 各種メディアプレーヤー\\\\n\\\\n### windows store appのインストール\\\\n\\\\n- [x] HEVCビデオ拡張機能\\\\n  - heicファイルをMSPaintで開くとインストールに誘導される。それをインストールしたら動画も画像も表示できるようになっていました。\\\\n- Amazon Prime\\\\n- Disney Plus\\\\n- PowerToys\\\\n- [ ] iTunes\\\\n  - すぐには不要だったのでスキップ。必要になったら実施する。\\\\n- [ ] ~~（必要なら）デバイス製造元からのHEVCビデオ拡張機能~~\\\\n- [ ] ~~（必要なら）HEIF 画像拡張機能~~\\\\n  - 不要になったのでスキップ\\\\n\\\\n### 　Hyper-Vの設定\\\\n\\\\n`設定` > `アプリ` > `オプション機能` > `Windowsのその他の機能`からHyper-Vをインストールし、再起動。\\\\n\\\\n再起動後、旧マシンでエクスポートした設定をインポートするだけで問題なく環境復元できました。\\\\n\\\\n## プログラミング環境のセットアップ\\\\n\\\\n### 開発用ツール一覧\\\\n\\\\n- [x] Visual Studio Code\\\\n  - 初期セットアップ時にインストール済み\\\\n- [x] git\\\\n  - 初期セットアップ時にインストール済み\\\\n- [x] Node\\\\n  - [NVM for Windows](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/coreybutler\\\\\\\/nvm-windows)を使ってセットアップ\\\\n\\\\n    ``` powershell\\\\n    > nvm install lts\\\\n    Downloading node.js version 16.15.0 (64-bit)...\\\\n    Extracting...\\\\n    Complete\\\\n\\\\n\\\\n    Installation complete. If you want to use this version, type\\\\n\\\\n    nvm use 16.15.0\\\\n\\\\n    # 管理者コンソールで実行すること\\\\n    > nvm use 16.15.0\\\\n    Now using node v16.15.0 (64-bit)\\\\n    ```\\\\n\\\\n- [x] Visual Studio 2022\\\\n\\\\n### 旧開発マシンからの移行作業\\\\n\\\\n1. メインで使用しているラップトップPCのすべての変更をcommit&push\\\\n1. 新デスクトップで順次クローン\\\\n\\\\nGit Forkを使用するにあたり、githubのssh秘密鍵の登録作業が必要でした。以前Windows10で実施した[Git: githubへのssh接続をSourceTreeからwindows 10標準のssh clientに切り替える](doc\\\\\\\/env\\\\\\\/git-ssh-configuration)<!--rehype:class=internal-link-->の手順がWindows 11でも問題ないか確認していきました。\\\\n\\\\n#### OpenSSH Authentication Agentサービスの起動\\\\n\\\\n`無効`になっていたので`自動`に変更。\\\\n\\\\n#### 秘密鍵の作成と配置\\\\n\\\\n以前作成したgithubのOpenSSH形式 秘密鍵(id_ras)ファイルがあるので、それをc:\\\\\\\\Users\\\\\\\\<username>\\\\\\\\.sshフォルダに配置\\\\n\\\\n#### ssh-agentに秘密鍵を登録\\\\n\\\\n登録のコマンドを実行\\\\n\\\\n``` powershell\\\\n> cd c:\\\\\\\\Users\\\\\\\\<username>\\\\\\\\.ssh\\\\n> ssh-add id_rsa\\\\nEnter passphrase for id_rsa:\\\\nIdentity added: id_rsa (id_rsa)\\\\n```\\\\n\\\\n#### 環境変数の設定\\\\n\\\\n再起動後、git fecth実行時にpassphraseを聞かれるようになってしまいました。[Why git can't remember my passphrase under Windows - stackoverflow](https:\\\\\\\/\\\\\\\/stackoverflow.com\\\\\\\/questions\\\\\\\/370030\\\\\\\/why-git-cant-remember-my-passphrase-under-windows)の記事を参考に、環境変数を追加して解決しました。\\\\n\\\\n`コントロールパネル` > `ユーザアカウント` > `環境変数の変更`から、ユーザ環境変数`GIT_SSH`を追加しました。\\\\n\\\\n- variable: GIT_SSH\\\\n- value: C:\\\\\\\\Windows\\\\\\\\System32\\\\\\\\OpenSSH\\\\\\\\ssh.exe\\\\n\\\\n以前のWindows 10環境で不要だったのは、Git for Windowsをscoopではなくインストーラから導入した際に自動でこの環境変数を作成してくれていたのかもしれません。\\\\n\\\\n## 関連項目\\\\n\\\\n- [scoopでWindowsアプリを管理する](doc\\\\\\\/env\\\\\\\/use-scoop)<!--rehype:class=internal-link-->\\\\n- [Windowsで利用しているツール](doc\\\\\\\/env\\\\\\\/tool-list)<!--rehype:class=internal-link-->\\\"}\"}","{\"docRef\":\"env\\\/tool-list\",\"content\":\"{\\\"title\\\":\\\"Windowsで利用しているツール\\\",\\\"date\\\":\\\"2022-12-11\\\",\\\"category\\\":\\\"環境設定\\\",\\\"tag\\\":[\\\"setup\\\",\\\"tool\\\",\\\"install\\\"],\\\"body\\\":\\\"\\\\n\\\\nScoopやインストーラー、ポータブルパッケージ等を用いてセットアップし、利用しているアプリを整理します。\\\\n\\\\n## scoopを利用してインストールするApp\\\\n\\\\n### git\\\\n\\\\n開発でも使用するが、bucketの追加に利用しているためscoopを利用するなら必須。\\\\n\\\\n### 7zip\\\\n\\\\n圧縮・解凍ソフト。Scoopを利用してインストールできます。完了後に、`scoop\\\\\\\\apps\\\\\\\\7zip\\\\\\\\current\\\\\\\\7zFM.exe`のメニュ > `ツール` > `オプション` > `7-Zip` から `シェルコンテキストメニュに7zipを登録`のチェックを入れて、右クリックメニュから7zipを使えるようにします。\\\\n\\\\n### keepass\\\\n\\\\nパスワード管理ツール。\\\\n\\\\n### appbuster\\\\n\\\\nWindows 10\\\\\\\/11にインストールされた不要なappを削除できる。<https:\\\\\\\/\\\\\\\/www.oo-software.com\\\\\\\/en\\\\\\\/ooappbuster>\\\\n\\\\n### avidemux\\\\n\\\\n動画編集ツール。<https:\\\\\\\/\\\\\\\/avidemux.sourceforge.net\\\\\\\/>\\\\n\\\\n### crystaldiskinfo\\\\n\\\\nディスクの健康状態をチェック\\\\n\\\\n### crystaldiskmark\\\\n\\\\nディスクのパフォーマンをチェック\\\\n\\\\n### geekuninstaller\\\\n\\\\nレジストリを含めてappを丁寧にアンインストールする\\\\n\\\\n## scoopを利用してインストールするApp (開発用)\\\\n\\\\n### nvm\\\\n\\\\n複数バージョンのnodeをインストール、切り替える事ができる。<https:\\\\\\\/\\\\\\\/github.com\\\\\\\/coreybutler\\\\\\\/nvm-windows>\\\\n\\\\n### git-fork\\\\n\\\\nグラフィカルgitクライアント。一緒に仕事をしている人が超絶お勧めしているので試してみる予定。Scoopを利用してインストールできるか検討中。\\\\n\\\\n### curl\\\\n\\\\nURLシンタックスを用いてファイル送受信を行うコマンドラインツール\\\\n\\\\n### WinMerge\\\\n\\\\n差分比較、マージツール。Scoopを利用してインストールできます。\\\\n\\\\n### fiddler\\\\n\\\\nHTTPトラフィック監視ツール。Scoopを利用してインストールできるか検討中。\\\\n\\\\n## インストーラーを利用してインストールするApp\\\\n\\\\n### Brave\\\\n\\\\nブラウザ。iPhoneとブックマークを同期するのに利用\\\\n\\\\n### Visual Studio Code\\\\n\\\\n軽量コードエディター。\\\\n\\\\n### Visual Studio\\\\n\\\\n開発環境\\\\n\\\\n### .NET Core\\\\n\\\\n開発環境用ライブラリ\\\\n\\\\n### OneDrive\\\\n\\\\nクラウドファイル共有のクライアント\\\\n\\\\n### spacedesk\\\\n\\\\nラップトップやiPad、Fire HD 10などのタブレットをサブディスプレイにできる\\\\n\\\\n## ポータブル版を利用するApp\\\\n\\\\n### Synkron\\\\n\\\\nフォルダ同期ツール\\\\n\\\\n### MagicFinder\\\\n\\\\nIOデータのWIFIルータ接続ツール\\\\n\\\\n### ProcessExplorer\\\\n\\\\n機能強化したタスクマネージャー。<https:\\\\\\\/\\\\\\\/learn.microsoft.com\\\\\\\/en-us\\\\\\\/sysinternals\\\\\\\/downloads\\\\\\\/process-explorer>\\\\n\\\\n### WDIDLE3 for Windows\\\\n\\\\n Western Digital製HDDの省電力機能`IntelliPark`を無効にする。<http:\\\\\\\/\\\\\\\/liliumrubellum.blog10.fc2.com\\\\\\\/blog-entry-307.html>\\\\n\\\\n## 以前使用していたツール\\\\n\\\\n### Simple VHD Manager\\\\n\\\\nVHD（仮想ハードディスク）ファイルの管理ツール。\\\\n\\\\n### chrome\\\\n\\\\nブラウザ。Edgeとエンジンが同じためEdgeに移行した\\\\n\\\\n## 関連項目\\\\n\\\\n- [Example Setup Scripts](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/lukesampson\\\\\\\/scoop\\\\\\\/wiki\\\\\\\/Example-Setup-Scripts)\\\\n- [Chrome.json](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/Ash258\\\\\\\/scoop-Ash258\\\\\\\/blob\\\\\\\/master\\\\\\\/bucket\\\\\\\/Chrome.json)\\\\n- [SimpleVHDManager.json](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/Ash258\\\\\\\/scoop-Ash258\\\\\\\/blob\\\\\\\/master\\\\\\\/bucket\\\\\\\/SimpleVHDManager.json)\\\\n\\\"}\"}","{\"docRef\":\"env\\\/update-markdown-from-ios\",\"content\":\"{\\\"title\\\":\\\"Githubで管理しているmarkdownをiPhoneから更新する\\\",\\\"date\\\":\\\"2020-02-12\\\",\\\"category\\\":\\\"環境設定\\\",\\\"tag\\\":[\\\"環境設定\\\",\\\"markdown\\\",\\\"ios\\\"],\\\"body\\\":\\\"\\\\n\\\\n帰宅中はやる気があるのに、自宅に帰るとまったりしてしまい、お勉強が捗らない今日この頃。まだやる気の残っている通勤中に記事を更新するのが時間効率的にもベストだろう。ということで、iPhoneからGithubのリポジトリを操作して、markdownの記事を更新する方法を模索します。\\\\n\\\\nGithubの操作にはWorking Copyを、markdownエディタにはTypeをそれぞれ選びました。\\\\n\\\\n## Working Copy\\\\n\\\\nApp Storeからダウンロードして開くと、`Repositories`の画面が表示されます。左上の歯車iconは設定、右上の`+`がリポジトリ操作のメニュでした。設定のいくつかはappの購入(2440円)が必要なようです。remoteへのpushが優良らしいので最終的には購入必須ですが、10日間のtrialがあるのでまずはそれから試す予定です。\\\\n\\\\nリポジトリ操作メニュの`Clone repository` > `Github`を選ぶとGithubへのログオンが要求されます。ログオンが完了するとssh keyが自動で作成、登録されました。改めてクローンしたいレポジトリを選択したら、何事もなくファイルがiPhoneにクローンされました。\\\\n\\\\nクローンしたファイルは、iOS標準のファイルアプリから参照することができました。クローン完了後にファイルアプリを開き、右上`・・・` > `編集`を選ぶと、`場所`欄にiCloud DriveやOneDriveと並んでWorking Copyが表示されます。デフォルトでは表示がオフになっているので、これをオンにするとクローンしたファイルが見えるようになりました。\\\\n\\\\n## Type\\\\n\\\\n利用は無料、独自クラウドへのデータ同期が有料なmarkdownエディタ。シンプルで使いやすそうなインタフェースだったので選びました。\\\\n\\\\nファイルアプリへのアクセスが可能で、Working Copyがクローンしたファイルにアクセス出来ることを確認しました。Typeのapp購入は不要そうです。\\\\n\\\\n## 気になったこと\\\\n\\\\nこの二つのappを使って、通勤中の作業をしばらく試してみようと思います。試しにmarkdownファイルをTypeで見ていたところ、改行コードの違いがdiffに出ていることに気が付きました。VSCodeでの改行コードをCRLFからLFにした方が良いかもしれません。色々試しながら調整していこうと思います。\\\\n\\\"}\"}","{\"docRef\":\"env\\\/use-scoop\",\"content\":\"{\\\"title\\\":\\\"scoopでWindowsアプリを管理する\\\",\\\"date\\\":\\\"2022-12-11\\\",\\\"category\\\":\\\"環境設定\\\",\\\"tag\\\":[\\\"tool\\\",\\\"scoop\\\",\\\"install\\\"],\\\"body\\\":\\\"\\\\n\\\\nscoopを利用して、開発環境の自動セットアップ、および最新版への定期的なアップデートなどの管理を上手に行えるのか試してみます。\\\\n\\\\n## インストール\\\\n\\\\nまず初めに[公式サイト](https:\\\\\\\/\\\\\\\/scoop.sh\\\\\\\/)と[GitHub リポジトリ](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/lukesampson\\\\\\\/scoop)を確認しました。インストールはPowerShellスクリプトで行うと書いてあるので、その通りに実行しました。\\\\n\\\\n``` powershell\\\\n> Invoke-Expression (New-Object System.Net.WebClient).DownloadString('https:\\\\\\\/\\\\\\\/get.scoop.sh')\\\\nInitializing...\\\\nDownloading scoop...\\\\nExtracting...\\\\nCreating shim...\\\\nDownloading main bucket...\\\\nExtracting...\\\\nAdding ~\\\\\\\\scoop\\\\\\\\shims to your path.\\\\n'lastupdate' has been set to '2019-11-01T17:22:42.8161465+09:00'\\\\nScoop was installed successfully!\\\\nType 'scoop help' for instructions.\\\\n```\\\\n\\\\nログインしているアカウントのユーザフォルダ以下に`scoop`フォルダが作成されました。scoopで管理されるAppはこのフォルダ以下に配置されるようです。\\\\n\\\\n## Bucket の設定\\\\n\\\\nデフォルトではmain backetが利用可能です。`bucket add`コマンドにより、bucketを追加することができます。追加可能な bucketは`scoop\\\\\\\\apps\\\\\\\\scoop\\\\\\\\current\\\\\\\\buckets.json`で設定されており、`bucket known`コマンドで見る事もできます。\\\\n\\\\n``` powershell\\\\n> scoop bucket known\\\\nmain\\\\nextras\\\\nnightlies\\\\nnirsoft\\\\nphp\\\\nnerd-fonts\\\\nnonportable\\\\njava\\\\ngames\\\\njetbrains\\\\n```\\\\n\\\\n以前から利用しているAppがextrasにありそうだったので、追加しました。\\\\n\\\\n``` powershell\\\\n> scoop bucket add extras\\\\nChecking repo... ok\\\\nThe extras bucket was added successfully.\\\\n```\\\\n\\\\ngitがインストールされていないとbucketの追加に失敗します。その場合はgitを先にインストールします。\\\\n\\\\n``` powershell\\\\nscoop install git\\\\n```\\\\n\\\\n## よく使うであろうコマンド\\\\n\\\\n### scoop search\\\\n\\\\n指定したAppがBucket(collections of apps)にあるか検索する。\\\\n\\\\n``` powershell\\\\n> scoop search nodejs\\\\n'main' bucket:\\\\n    nodejs-lts (12.13.0)\\\\n    nodejs (13.1.0)\\\\n\\\\n> scoop search keepass\\\\n'extras' bucket:\\\\n    keepass-plugin-keeagent (0.10.1)\\\\n    keepass-plugin-keeanywhere (1.5.1)\\\\n    keepass-plugin-keepassnatmsg (2.0.6)\\\\n    keepass-plugin-keepassrpc (1.9.0)\\\\n    keepass-plugin-keetraytotp (0.99-Beta)\\\\n    keepass-plugin-sequencer (0.1.1)\\\\n    keepass-plugin-yafd (1.2.2.0)\\\\n    keepass (2.43)\\\\n    keepassxc (2.5.0)\\\\n```\\\\n\\\\n### scoop install\\\\n\\\\n指定したAppをインストールする。\\\\n\\\\n``` powershell\\\\n> scoop install 7zip\\\\nUpdating Scoop...\\\\nUpdating 'main' bucket...\\\\nChecking repo... ok\\\\nThe main bucket was added successfully.\\\\nScoop was updated successfully!\\\\nInstalling '7zip' (19.00) [64bit]\\\\n7z1900-x64.msi (1.7 MB) [===============================================================================================] 100%\\\\nChecking hash of 7z1900-x64.msi ... ok.\\\\nExtracting 7z1900-x64.msi ... done.\\\\nLinking ~\\\\\\\\scoop\\\\\\\\apps\\\\\\\\7zip\\\\\\\\current => ~\\\\\\\\scoop\\\\\\\\apps\\\\\\\\7zip\\\\\\\\19.00\\\\nCreating shim for '7z'.\\\\nCreating shortcut for 7-Zip (7zFM.exe)\\\\n'7zip' (19.00) was installed successfully!\\\\n```\\\\n\\\\n## scoop update\\\\n\\\\n`scoop udpate`コマンドでscoop自体とインストール可能なAppの情報（app manifest）を更新できます。セミコロンで続けて`scoop update *`とすることで、インストール済みのすべてのAppに対して、バージョンアップのチェックおよびAppの更新ができます。\\\\n\\\\n``` powershell\\\\n> scoop update; scoop update *\\\\nUpdating Scoop...\\\\nUpdating 'extras' bucket...\\\\n * 4366eadd vscodium: Update to version 1.40.0                           2 hours ago\\\\n * 3ade6589 vscodium-portable: Update to version 1.40.0                  2 hours ago\\\\n * 88e85c64 vivaldi: Update to version 2.9.1705.41                       2 hours ago\\\\nUpdating 'main' bucket...\\\\n * 124c0c6a ffmpeg-nightly: Update to version 20191108-e700038           2 hours ago\\\\n * 20998cde annie: Update to version 0.9.6                               2 hours ago\\\\n * 41fcafae terraform-provider-ibm: Update to version 0.19.0             3 hours ago\\\\n * 94629c47 jx: Update to version 2.0.971                                3 hours ago\\\\n * b017d181 faas-cli: Update to version 0.10.3                           3 hours ago\\\\nScoop was updated successfully!\\\\nLatest versions for all apps are installed! For more information try 'scoop status'\\\\n```\\\\n\\\\n## アンインストール\\\\n\\\\n追加でインストールするAp は`C:\\\\\\\\Apps`以下にまとめるルールにしていたので、scoopをインストールし直すことにします。\\\\n\\\\n``` powershell\\\\n> scoop uninstall scoop\\\\nWARN  This will uninstall Scoop and all the programs that have been installed with Scoop!\\\\nAre you sure? (yN): y\\\\nUninstalling '7zip'\\\\nRemoving shim for '7z'.\\\\nWARN  Couldn't remove ~\\\\\\\\scoop\\\\\\\\apps\\\\\\\\7zip: 項目 C:\\\\\\\\Users\\\\\\\\takum\\\\\\\\scoop\\\\\\\\apps\\\\\\\\7zip\\\\\\\\19.00\\\\\\\\7-zip.dll を削除できません: パス '7-zip.dll' へのアクセスが拒否されました。.Exception\\\\nUninstalling 'winmerge'\\\\nRemoving shim for 'WinMergeU'.\\\\nCouldn't remove ~\\\\\\\\scoop\\\\\\\\apps: 項目 C:\\\\\\\\Users\\\\\\\\takum\\\\\\\\scoop\\\\\\\\apps\\\\\\\\7zip\\\\\\\\19.00\\\\\\\\7-zip.dll を削除できません: パス '7-zip.dll'\\\\nへのアクセスが拒否されました。\\\\n```\\\\n\\\\n7zipインストール後にエクスプローラ統合の設定をしたために`7-zip.dll`が削除できなくなっていました。設定を解除して再起動後、アンインストールをやり直します。\\\\n\\\\n``` powershell\\\\nscoop uninstall scoop\\\\nWARN  This will uninstall Scoop and all the programs that have been installed with Scoop!\\\\nAre you sure? (yN): y\\\\nUninstalling '7zip'\\\\nWARN  Shim for '7z' is missing. Skipping.\\\\nRemoving ~\\\\\\\\scoop\\\\\\\\shims from your path.\\\\nScoop has been uninstalled.\\\\n```\\\\n\\\\n今度は正常にアンインストール処理が完走しました。\\\\n\\\\n## カスタムディレクトリに scoop をインストール\\\\n\\\\n公式wikiの[Installing Scoop to Custom Directory](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/lukesampson\\\\\\\/scoop\\\\\\\/wiki\\\\\\\/Quick-Start#installing-scoop-to-custom-directory)を参考にして、`C:\\\\\\\\Apps\\\\\\\\scoop`以下にscoopをインストールします。\\\\n\\\\n``` powershell\\\\n$env:SCOOP='C:\\\\\\\\Apps\\\\\\\\scoop'\\\\n[environment]::setEnvironmentVariable('SCOOP',$env:SCOOP,'User')\\\\nInvoke-Expression (New-Object System.Net.WebClient).DownloadString('https:\\\\\\\/\\\\\\\/get.scoop.sh')\\\\n```\\\\n\\\\n## App Manifest について\\\\n\\\\n公式が提供していないApp Manifestは自分で作ることも可能です。詳細な方法は[Creating an app manifest](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/lukesampson\\\\\\\/scoop\\\\\\\/wiki\\\\\\\/Creating-an-app-manifest)に書かれています。\\\\n\\\\n## scoopを用いた環境セットアップスクリプト\\\\n\\\\n<div class=\\\\\\\"gist\\\\\\\">\\\\n  <script src=\\\\\\\"https:\\\\\\\/\\\\\\\/gist.github.com\\\\\\\/takumura\\\\\\\/f897ab722e0d55523243dcfe7a51d4c1.js?file=install-scoop.ps1\\\\\\\"><\\\\\\\/script>\\\\n<\\\\\\\/div>\\\\n\\\\n<div class=\\\\\\\"gist\\\\\\\">\\\\n  <script src=\\\\\\\"https:\\\\\\\/\\\\\\\/gist.github.com\\\\\\\/takumura\\\\\\\/f897ab722e0d55523243dcfe7a51d4c1.js?file=env-setup-common.ps1\\\\\\\"><\\\\\\\/script>\\\\n<\\\\\\\/div>\\\\n\\\\n<div class=\\\\\\\"gist\\\\\\\">\\\\n  <script src=\\\\\\\"https:\\\\\\\/\\\\\\\/gist.github.com\\\\\\\/takumura\\\\\\\/f897ab722e0d55523243dcfe7a51d4c1.js?file=env-setup-dev.ps1\\\\\\\"><\\\\\\\/script>\\\\n<\\\\\\\/div>\\\\n\\\\n## 作業時に参照した情報\\\\n\\\\n[scoop wiki - GitHub](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/lukesampson\\\\\\\/scoop\\\\\\\/wiki)\\\\n\\\"}\"}","{\"docRef\":\"env\\\/vscode-settings-sync\",\"content\":\"{\\\"title\\\":\\\"VSCode: Settings Syncで環境設定を共有する\\\",\\\"date\\\":\\\"2019-11-01\\\",\\\"category\\\":\\\"環境設定\\\",\\\"tag\\\":[\\\"環境設定\\\",\\\"vscode\\\",\\\"git\\\",\\\"settings.json\\\"],\\\"body\\\":\\\"\\\\n\\\\n拡張機能: `Settings Sync`を導入することで、VSCodeの設定、スニペット、テーマ、ファイルアイコン、キーバインディング、ワークスペース、拡張機能を複数のマシンで同期できます。\\\\n\\\\nデータはgistで共有されることになるので、設定のバックアップにもなりそうです。\\\\n\\\\n## 手順\\\\n\\\\nまずはSettings Syncの拡張機能画面で、設定方法の解説を確認。\\\\n\\\\n```plaintext\\\\nShortcuts\\\\n    1. Upload Key : Shift + Alt + U\\\\n    2. Download Key : Shift + Alt + D\\\\n\\\\nConfigure Settings Sync\\\\n    Settings Sync Configuration page will be opened automatically on code start and requires two things to setup:\\\\n\\\\n    1. GitHub Token\\\\n    2. GitHub Gist Id\\\\n\\\\n    GitHub Token needs to be retrived by your GitHub account while Settings Sync creates GIST if you are first time user.\\\\n\\\\n    Following are the steps you need to perform to configure.\\\\n\\\\n    - Click on Login with GitHub .\\\\n    - Login GitHub on Browser and close the browser tab once you get Success message.\\\\n    - If you are using Settings Sync first time GIST will be created automatically when you upload your settings.\\\\n    - If you already have GitHub Gist, new window will be opened to allow you to select the GitHub Gist or Skip to create new Gist.\\\\n```\\\\n\\\\n  \\\\\\\\\\\\n特に気になる記述や疑問がなかったので、拡張機能: `Settings Sync`をインストール。完了すると`Welcome to Settings Sync`のタブが表示されたので、`LOGIN WITH GITHUB`を選択。\\\\n\\\\n<img src=\\\\\\\"assets\\\\\\\/images\\\\\\\/vscode-settings-sync\\\\\\\/vscode-settings-sync-1.png\\\\\\\" alt=\\\\\\\"Welcome to Settings Sync\\\\\\\" title=\\\\\\\"Welcome to Settings Sync\\\\\\\">\\\\n\\\\n`Authorize Settings Sync`のページがブラウザで表示されたので、`Authorize shanalikhan`する。\\\\n<img src=\\\\\\\"assets\\\\\\\/images\\\\\\\/vscode-settings-sync\\\\\\\/vscode-settings-sync-2.png\\\\\\\" alt=\\\\\\\"Github OAuth Authorization\\\\\\\" title=\\\\\\\"Github OAuth Authorization\\\\\\\">\\\\n\\\\n設定完了の表示に切り替わり、準備が完了しました。\\\\n\\\\n`Shift + Alt + U` もしくは、コマンドパレットから`Sync: アップデート・アップロードの設定`を選択すると、環境設定情報がGistにアップロードされました。\\\\n\\\\nアップロード後、変更なしにもう一度アップロードしようとしたところ、確認ダイアログが表示されました。親切ですね。\\\\n<img src=\\\\\\\"assets\\\\\\\/images\\\\\\\/vscode-settings-sync\\\\\\\/vscode-settings-sync-3.png\\\\\\\" alt=\\\\\\\"Dialog\\\\\\\" title=\\\\\\\"Dialog\\\\\\\">\\\\n\\\\n## 自動作成されたgist\\\\n\\\\nSettings Syncは`couldSettings`という名前のシークレットgistを自動的に作成していました。手動設定を行えば、自分で作成したgistに環境設定情報をアップロードさせることもできるようです。\\\\n\\\\ngistには、以下の5つのファイルが登録されていました。\\\\n\\\\n- cloudSettings\\\\n- extensions.json\\\\n- keybindings.json\\\\n- keybindingsMac.json\\\\n- settings.json\\\\n\\\\n<div class=\\\\\\\"gist\\\\\\\">\\\\n    <script src=\\\\\\\"https:\\\\\\\/\\\\\\\/gist.github.com\\\\\\\/takumura\\\\\\\/bbff68078afb2d0846773965d1678c7c.js\\\\\\\"><\\\\\\\/script>\\\\n<\\\\\\\/div>\\\\n\\\"}\"}","{\"docRef\":\"env\\\/win11_dev_drive\",\"content\":\"{\\\"title\\\":\\\"Windows11の開発ドライブを利用する\\\",\\\"date\\\":\\\"2023-11-10\\\",\\\"category\\\":\\\"環境設定\\\",\\\"tag\\\":[\\\"環境設定\\\",\\\"Windows\\\",\\\"DevDrive\\\",\\\"npm cache\\\",\\\"nuget cache\\\"],\\\"body\\\":\\\"\\\\n\\\\nWindows11のvesrionを22H2に更新後、開発ドライブという機能が利用できるようになっていることを知りました。ドライブの作成と、利用に際しての設定を記録しておきます。\\\\n\\\\n## 開発ドライブの作成\\\\n\\\\nMicrosoft Learnの[Windows 11でDev Driveを設定する](https:\\\\\\\/\\\\\\\/learn.microsoft.com\\\\\\\/ja-jp\\\\\\\/windows\\\\\\\/dev-drive\\\\\\\/)を読みながら進めました。作成方法が数パターンあるようなのですが、`%userprofile%\\\\\\\\DevDrives`に仮想ディスクを作成する方法を選びました。\\\\n\\\\ninstructionに従って`設定`からボタンをポチポチするだけで完了します。わかりやすいようにドライブレターはDevelopmentの`D`にしました\\\\n\\\\n## データの移動\\\\n\\\\n開発ドライブ向けのデータはソースコード リポジトリやプロジェクト ファイル、パッケージキャッシュなどで、IDEやSDK、ビルドツールの格納は推奨されていないと記載されています。\\\\n\\\\nGithub repositoryは特に気にすることはなく、フォルダの移動だけで問題なさそうです。\\\\n\\\\nパッケージキャッシュについては移動時に、それぞれのツールが参照しているキャッシュフォルダを変更する必要があります。私が主に利用しているのはnuget、npm、yarnです。\\\\n\\\\n### nuget cache\\\\n\\\\nnugetの現在のcacheフォルダは以下のコマンドから確認できました。\\\\n\\\\n``` powershell\\\\n> dotnet nuget locals all --list\\\\nhttp-cache: %userprofile%\\\\\\\\AppData\\\\\\\\Local\\\\\\\\NuGet\\\\\\\\v3-cache\\\\nglobal-packages: %userprofile%\\\\\\\\.nuget\\\\\\\\packages\\\\\\\\\\\\ntemp: %userprofile%\\\\\\\\AppData\\\\\\\\Local\\\\\\\\Temp\\\\\\\\NuGetScratch\\\\nplugins-cache: %userprofile%\\\\\\\\AppData\\\\\\\\Local\\\\\\\\NuGet\\\\\\\\plugins-cache\\\\n```\\\\n\\\\nコマンドを利用しての変更に手間取り、最終的にglobalのconfigファイル(`%appdata%\\\\\\\\NuGet\\\\\\\\NuGet.Config`)を直接修正しました\\\\n\\\\n``` xml\\\\n<?xml version=\\\\\\\"1.0\\\\\\\" encoding=\\\\\\\"utf-8\\\\\\\"?>\\\\n<configuration>\\\\n  <!-- 以下のconfig要素を追記 -->\\\\n  <config>\\\\n    <add key=\\\\\\\"globalPackagesFolder\\\\\\\" value=\\\\\\\"D:\\\\\\\\nuget-cache\\\\\\\" \\\\\\\/>\\\\n  <\\\\\\\/config>\\\\n  ...\\\\n<\\\\\\\/configuration>\\\\n```\\\\n\\\\n### npm cache\\\\n\\\\nnpmの現在のcacheフォルダは以下のコマンドから確認できました。結果は`%userprofile%\\\\\\\\AppData\\\\\\\\Local\\\\\\\\npm-cache`でした。\\\\n\\\\n``` powershell\\\\n> npm config list -l\\\\n```\\\\n\\\\n以下のコマンドを利用して、cacheフォルダを開発ドライブに変更しました。\\\\n\\\\n``` powershell\\\\n> npm config set cache D:\\\\\\\\npm-cache --global\\\\n```\\\\n\\\\n### yarn cache\\\\n\\\\nnpmの現在のcacheフォルダは以下のコマンドから確認できました。結果は`%userprofile%\\\\\\\\AppData\\\\\\\\Local\\\\\\\\Yarn\\\\\\\\Cache\\\\\\\\v6`でした。\\\\n\\\\n``` powershell\\\\n> yarn cache dir\\\\n```\\\\n\\\\n以下のコマンドを利用して、cacheフォルダを開発ドライブに変更しました。\\\\n\\\\n``` powershell\\\\n> yarn config set cache-folder D:\\\\\\\\yarn-cache\\\\n```\\\\n\\\\n## 関連項目\\\\n\\\\n- [(yarn) yarn cache](https:\\\\\\\/\\\\\\\/classic.yarnpkg.com\\\\\\\/lang\\\\\\\/en\\\\\\\/docs\\\\\\\/cli\\\\\\\/cache\\\\\\\/)\\\\n- [(Nuget) グローバル パッケージ、キャッシュ、および一時フォルダーを管理する](https:\\\\\\\/\\\\\\\/learn.microsoft.com\\\\\\\/ja-jp\\\\\\\/nuget\\\\\\\/consume-packages\\\\\\\/managing-the-global-packages-and-cache-folders)\\\\n\\\"}\"}","{\"docRef\":\"nodejs\\\/update-node-modules\",\"content\":\"{\\\"title\\\":\\\"node_modulesを更新する\\\",\\\"date\\\":\\\"2020-02-09\\\",\\\"category\\\":\\\"Nodejs\\\",\\\"tag\\\":[\\\"nodejs\\\",\\\"npm\\\",\\\"dependabot\\\"],\\\"body\\\":\\\"\\\\n\\\\nGithubで管理している Node.jsアプリケーションで、依存packageのバージョンにセキュリティリスクがある場合に、Dependabotが警告してくれました。この警告を解消する手順を確認します。\\\\n\\\\n## 警告の内容を確認\\\\n\\\\ntech-logのリポジトリで、2020-02-09 時点で9件のSecurity Alertsがレポートされていました。\\\\n\\\\n<img src=\\\\\\\"assets\\\\\\\/images\\\\\\\/update-node-modules\\\\\\\/update-node-modules-1.png\\\\\\\" alt=\\\\\\\"security alerts\\\\\\\" title=\\\\\\\"security alerts\\\\\\\">\\\\n\\\\nいずれもpackage.lock.jsonに対しての変更が提案されており、間接的に依存している参照の更新が必要です。\\\\n\\\\n## npm auditを確認\\\\n\\\\nnpmにも監査のコマンドがあったことを思い出し、状況を確認してみました。\\\\n\\\\n``` powershell\\\\n> npm audit\\\\n...\\\\nfound 625 vulnerabilities (2 low, 7 moderate, 615 high, 1 critical) in 42979 scanned packages\\\\n  run `npm audit fix` to fix 624 of them.\\\\n  1 vulnerability requires semver-major dependency updates.\\\\n```\\\\n\\\\n625件。。。今後の課題にしようと思います。\\\\n\\\\n## 個々のPRをnpm ciして確認\\\\n\\\\n`npm ci`コマンドにより、pacakge.lock.json を元にnode_modulesを再構築してくれるようでした。なので「個々のPRに対してローカルリポジトリ上で`npm ci`し、appの挙動に問題がなければmasterへmergeする」という方法を試しました。\\\\n\\\\n``` powershell\\\\n> npm ci\\\\nnpm WARN prepare removing existing node_modules\\\\\\\/ before installation\\\\n...\\\\nadded 1199 packages in 135.974s\\\\n```\\\\n\\\\n作業開始時にnode_modulesは削除されると公式サイトに書いてありましたが、実行時にも警告が表示されました。\\\\n\\\\nvulnerabilitiesも着実に減少しました。\\\\n\\\\n``` powershell\\\\ntar 適用時 = found 623 vulnerabilities (2 low, 7 moderate, 613 high, 1 critical) in 42979 scanned packages\\\\nfstream 適用時 = found 622 vulnerabilities (2 low, 7 moderate, 612 high, 1 critical) in 42979 scanned packages\\\\njs-yaml 適用時 = found 617 vulnerabilities (2 low, 4 moderate, 610 high, 1 critical) in 42979 scanned packages\\\\nhandlebars 適用時 = found 616 vulnerabilities (2 low, 6 moderate, 608 high) in 42978 scanned packages\\\\nlodash 適用時 = found 588 vulnerabilities (2 low, 7 moderate, 578 high, 1 critical) in 42979 scanned packages\\\\nlodash.mergewith 適用時 = found 574 vulnerabilities (2 low, 3 moderate, 569 high) in 42978 scanned packages\\\\nmixin-deep 適用時 = found 387 vulnerabilities (2 low, 3 moderate, 382 high) in 42978 scanned packages\\\\n```\\\\n\\\\nまだまだ多くの更新が残っていますが、以前気軽に`npm update`したら意図せずangularのバージョンが上がって酷い目にあったので、残りはAngularのアップグレード後に確認しようと思います。。\\\\n\\\\n## 作業時に参照した情報\\\\n\\\\n- [Configuring automated security updates](https:\\\\\\\/\\\\\\\/help.github.com\\\\\\\/ja\\\\\\\/github\\\\\\\/managing-security-vulnerabilities\\\\\\\/configuring-automated-security-updates)\\\\n- [npm-ci](https:\\\\\\\/\\\\\\\/docs.npmjs.com\\\\\\\/cli\\\\\\\/ci.html)\\\\n\\\"}\"}","{\"docRef\":\"todo\",\"content\":\"{\\\"title\\\":\\\"Todo リスト\\\",\\\"date\\\":\\\"2023-01-09\\\",\\\"category\\\":\\\"none\\\",\\\"toc\\\":\\\"none\\\",\\\"body\\\":\\\"\\\\n\\\\n## 記事ストック\\\\n\\\\n### 2023年\\\\n\\\\n- [ ] Angular v14からv15へのアップデート\\\\n  - [x] standalone component\\\\n  - [x] router adjustmentの確認(tree-shakable?)\\\\n  - [x] new MDC-based Angular Material\\\\n  - [ ] new image directive\\\\n- [ ] dynamic markdown componentの調査\\\\n- [ ] YAMLシリアライザのVYamlへの移行\\\\n- [ ] C# List処理のパフォーマンス改善（spanの積極的利用）\\\\n- [ ] 過去記事の移行\\\\n- [ ] gistの管理について\\\\n- [ ] Visual Studio Code の設定\\\\n- [ ] Visual Studio の設定\\\\n- [ ] VSCode の git アクセス設定\\\\n- [ ] コード規約について調べる\\\\n  - [ ] C#\\\\n  - [ ] Typescript\\\\n  - [ ] Angular\\\\n\\\\n### 2022年\\\\n\\\\n- [x] [angular-cli-ghpages](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/angular-schule\\\\\\\/angular-cli-ghpages)のセットアップ\\\\n  - [x] Angular v13以降の設定の仕方について追記する\\\\n- [x] 開発マシンの構成を標準化\\\\n- [x] Windows 11のセットアップ\\\\n- [x] .NET 6 + Angular v14でTech Logを書き換えて得た知識をまとめる\\\\n\\\"}\"}","{\"docRef\":\"vue\\\/vue_electron_get_started\",\"content\":\"{\\\"title\\\":\\\"NuxtJS + Electronのアプリ開発環境を構築する\\\",\\\"date\\\":\\\"2021-05-07\\\",\\\"category\\\":\\\"Vue\\\",\\\"tag\\\":[\\\"vue\\\",\\\"nuxtjs\\\",\\\"electron\\\"],\\\"body\\\":\\\"NuxtJS + Electron を使って、デスクトップで動くオレオレ Todo アプリを作ってみたくなりました。Vueに少し慣れてきたので、次にElectronとVueの組み合わせについて学んでいきます。\\\\n\\\\n## 環境確認\\\\n\\\\n- エディタ: VSCode\\\\n- nodejs: v12.16.0\\\\n- yarn: 1.22.4\\\\n\\\\n## ワークログ\\\\n\\\\nボイラープレート的なプロジェクトで、[electron-nuxt](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/michalzaq12\\\\\\\/electron-nuxt)と[nuxtron](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/saltyshiomix\\\\\\\/nuxtron)というのを見つけましたが、今回は勉強も兼ねて一から構築してみることにしました。\\\\n\\\\n### NuxtJS プロジェクトの新規作成\\\\n\\\\n前回同様、`yarn create nuxt-app`コマンドにてプロジェクトを生成します。ただし今回はLinting tools全部盛りで試してみます。\\\\n\\\\n``` powershell\\\\n> yarn create nuxt-app nuxt-electron-example\\\\nyarn create v1.22.4\\\\n[2\\\\\\\/4] Fetching packages...\\\\n[3\\\\\\\/4] Linking dependencies...\\\\n[4\\\\\\\/4] Building fresh packages...\\\\n\\\\nwarning Your current version of Yarn is out of date. The latest version is \\\\\\\"1.22.5\\\\\\\", while you're on \\\\\\\"1.22.4\\\\\\\".\\\\nsuccess Installed \\\\\\\"create-nuxt-app@3.4.0\\\\\\\" with binaries:\\\\n      - create-nuxt-app\\\\n\\\\ncreate-nuxt-app v3.4.0\\\\n✨  Generating Nuxt.js project in nuxt-electron-example\\\\n? Project name: nuxt-electron-example\\\\n? Programming language: TypeScript\\\\n? Package manager: Yarn\\\\n? UI framework: Vuetify.js\\\\n? Nuxt.js modules: (Press <space> to select, <a> to toggle all, <i> to invert selection)\\\\n? Linting tools: ESLint, Prettier, Lint staged files, StyleLint, Commitlint\\\\n? Testing framework: Jest\\\\n? Rendering mode: Single Page App\\\\n? Deployment target: Static (Static\\\\\\\/JAMStack hosting)\\\\n? Development tools: (Press <space> to select, <a> to toggle all, <i> to invert selection)\\\\n? Continuous integration: None\\\\n? Version control system: Git\\\\n\\\\nyarn install v1.22.4\\\\ninfo No lockfile found.\\\\n\\\\nyarn run v1.22.4\\\\n$ eslint --ext .js,.vue --ignore-path .gitignore . --fix\\\\nDone in 28.71s.\\\\n\\\\nyarn run v1.22.4\\\\n$ stylelint **\\\\\\\/*.{vue,css} --ignore-path .gitignore --fix\\\\nDone in 8.22s.\\\\n\\\\n�🎉  Successfully created project nuxt-electron-example\\\\n\\\\n  To get started:\\\\n\\\\n        cd nuxt-electron-example\\\\n        yarn dev\\\\n\\\\n  To build & start for production:\\\\n\\\\n        cd nuxt-electron-example\\\\n        yarn build\\\\n        yarn start\\\\n\\\\n  To test:\\\\n\\\\n        cd nuxt-electron-example\\\\n        yarn test\\\\n\\\\n\\\\n  For TypeScript users.\\\\n\\\\n  See : https:\\\\\\\/\\\\\\\/typescript.nuxtjs.org\\\\\\\/cookbook\\\\\\\/components\\\\\\\/\\\\nDone in 8116.40s.\\\\n```\\\\n\\\\nビルド完了後に`yarn dev`で動作確認をしたところ問題なく実行できました。\\\\n\\\\n### NuxtJSのソースをsrc\\\\\\\\renderer以下に移動\\\\n\\\\n[この記事](https:\\\\\\\/\\\\\\\/qiita.com\\\\\\\/282Haniwa\\\\\\\/items\\\\\\\/a3b0a7d3c622ad82ac8d#%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E6%A7%8B%E6%88%90%E3%82%92%E5%A4%89%E6%9B%B4%E3%81%99%E3%82%8B)を参考に、フォルダ構成を変更しました。\\\\n\\\\nNuxtJSに必要なconfigファイルは`.babelrc`、`nuxt.config.js`、`tsconfig.json`の3つで、それ以外はトップフォルダのまま移動不要でした。ただしファイル場所が変わったためpackage.jsonのscripts記述は更新が必要でした。\\\\n\\\\n``` json\\\\n\\\\\\\/\\\\\\\/ package.json 抜粋\\\\n{\\\\n  \\\\\\\"name\\\\\\\": \\\\\\\"nuxt-electron-example\\\\\\\",\\\\n  \\\\\\\"version\\\\\\\": \\\\\\\"1.0.0\\\\\\\",\\\\n  \\\\\\\"private\\\\\\\": true,\\\\n  \\\\\\\"scripts\\\\\\\": {\\\\n    \\\\\\\"dev:renderer\\\\\\\": \\\\\\\"nuxt-ts src\\\\\\\/renderer\\\\\\\",\\\\n    \\\\\\\"build:renderer\\\\\\\": \\\\\\\"nuxt-ts build src\\\\\\\/renderer\\\\\\\",\\\\n    \\\\\\\"generate:renderer\\\\\\\": \\\\\\\"nuxt-ts generate src\\\\\\\/renderer\\\\\\\"\\\\n  },\\\\n  ...\\\\n}\\\\n```\\\\n\\\\n### Electronの導入\\\\n\\\\n必要なモジュールをyarnコマンドで追加しました。\\\\n\\\\n``` powershell\\\\n> yarn add --dev electron electron-builder electron-devtools-installer\\\\n> yarn add --dev cross-env\\\\n```\\\\n\\\\n- [electron](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/electron\\\\\\\/electron#readme) = Electron本体\\\\n- [electron-builder](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/electron-userland\\\\\\\/electron-builder#readme) = Electronのpackage & buildツール\\\\n- [electron-devtools-installer](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/MarshallOfSound\\\\\\\/electron-devtools-installer) = Electron用のDevTool拡張機能インストーラー\\\\n- [cross-env](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/kentcdodds\\\\\\\/cross-env#readme) = node script実行時の環境変数を設定するツール\\\\n\\\\n次にElectronのメイン処理を行う`index.ts`を`src\\\\\\\/main`以下に作成しました。\\\\n\\\\n後でわかったことなのですが、`process.env.NODE_ENV === 'development'`の場合、electron実行時に`nuxt.ready()`で非同期処理の完了を待たないと、vuexのstoreが使用できない（webpack処理が完了していないのかstoreのjsが一切見当たらない状態でした）問題がありました。また`process.env.NODE_ENV === 'development'`の場合、`nuxt.ready()`で非同期処理の完了を待ってしまうといつまでもwindowが表示されませんでした。\\\\n\\\\n試行錯誤した結果、以下のような実装になりました\\\\n\\\\n``` ts\\\\n\\\\\\\/\\\\\\\/ index.ts\\\\nimport nuxtConfig from '..\\\\\\\/renderer\\\\\\\/nuxt.config'\\\\nconst http = require('http')\\\\nconst path = require('path')\\\\nconst { Nuxt, Builder } = require('nuxt')\\\\nconst electron = require('electron')\\\\n\\\\n\\\\\\\/\\\\\\\/ @ts-ignore\\\\nnuxtConfig.rootDir = path.resolve('src\\\\\\\/renderer')\\\\n\\\\\\\/\\\\\\\/ @ts-ignore\\\\nconst isDev = nuxtConfig.dev\\\\nlet _NUXT_URL_ = ''\\\\n\\\\nconst nuxt = new Nuxt(nuxtConfig)\\\\nif (isDev) {\\\\n  nuxt.ready().then((n: { render: any }) => {\\\\n    const builder = new Builder(n)\\\\n    const server = http.createServer(n.render)\\\\n\\\\n    builder.build().catch((err: any) => {\\\\n      console.error(err)\\\\n      process.exit(1)\\\\n    })\\\\n    server.listen()\\\\n    _NUXT_URL_ = `http:\\\\\\\/\\\\\\\/localhost:${server.address().port}`\\\\n    console.log(`Nuxt working on ${_NUXT_URL_}`)\\\\n\\\\n    createElectronApp()\\\\n  })\\\\n} else {\\\\n  _NUXT_URL_ = 'file:\\\\\\\/\\\\\\\/' + path.resolve(__dirname, '..\\\\\\\/..\\\\\\\/dist\\\\\\\/nuxt-build\\\\\\\/index.html')\\\\n  createElectronApp()\\\\n}\\\\n\\\\nfunction createElectronApp() {\\\\n  let win: any = null\\\\n  const app = electron.app\\\\n  const newWin = () => {\\\\n    win = new electron.BrowserWindow({\\\\n      width: 1400,\\\\n      height: 1000,\\\\n      webPreferences: {\\\\n        nodeIntegration: false,\\\\n        contextIsolation: false,\\\\n        preload: path.resolve(path.join(__dirname, 'preload.js')),\\\\n        webSecurity: false,\\\\n      },\\\\n    })\\\\n\\\\n    win.on('closed', () => (win = null))\\\\n\\\\n    if (isDev) {\\\\n      const { default: installExtension, VUEJS_DEVTOOLS } = require('electron-devtools-installer')\\\\n\\\\n      installExtension(VUEJS_DEVTOOLS.id)\\\\n        .then((name: any) => {\\\\n          console.log(`Added Extension:  ${name}`)\\\\n          win.webContents.openDevTools()\\\\n        })\\\\n        .catch((err: any) => console.log('An error occurred: ', err))\\\\n\\\\n      const pollServer = () => {\\\\n        http\\\\n          .get(_NUXT_URL_, (res: any) => {\\\\n            if (res.statusCode === 200) {\\\\n              win.loadURL(_NUXT_URL_)\\\\n            } else {\\\\n              console.log('restart poolServer')\\\\n              setTimeout(pollServer, 300)\\\\n            }\\\\n          })\\\\n          .on('error', pollServer)\\\\n      }\\\\n\\\\n      pollServer()\\\\n    } else {\\\\n      return win.loadURL(_NUXT_URL_)\\\\n    }\\\\n  }\\\\n\\\\n  app.on('ready', newWin)\\\\n  app.on('window-all-closed', () => app.quit())\\\\n  app.on('activate', () => win === null && newWin())\\\\n}\\\\n```\\\\n\\\\n記述中いくつかのエラーが発生したため、`.eslintrc.js`を修正しました。\\\\n\\\\n1. windows環境特有の改行に関するエラー: [このissue](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/prettier\\\\\\\/eslint-plugin-prettier\\\\\\\/issues\\\\\\\/211)を参照\\\\n1. `console`の利用不可エラー: [no-console](https:\\\\\\\/\\\\\\\/eslint.org\\\\\\\/docs\\\\\\\/rules\\\\\\\/no-console)エラーを無視するように変更\\\\n1. 一行の長さを120文字に変更。\\\\n\\\\n``` diff\\\\n\\\\\\\/\\\\\\\/ .eslintrc.js\\\\nmodule.exports = {\\\\n  root: true,\\\\n  env: {\\\\n    browser: true,\\\\n    node: true,\\\\n  },\\\\n  extends: [\\\\n    '@nuxtjs\\\\\\\/eslint-config-typescript',\\\\n    'prettier',\\\\n    'prettier\\\\\\\/vue',\\\\n    'plugin:prettier\\\\\\\/recommended',\\\\n    'plugin:nuxt\\\\\\\/recommended',\\\\n  ],\\\\n  plugins: ['prettier'],\\\\n  \\\\\\\/\\\\\\\/ add your custom rules here\\\\n-  rules: {},\\\\n+  rules: {\\\\n+    'no-console': 'off',\\\\n+    'prettier\\\\\\\/prettier': ['error', { endOfLine: 'auto', printWidth: 120 }],\\\\n+  },\\\\n}\\\\n```\\\\n\\\\nelectronのwindow起動時に`preload.ts`を指定しているので、`index.ts`と同じフォルダに空のファイル配置しました。\\\\n\\\\n``` ts\\\\n  win = new electron.BrowserWindow({\\\\n    width: 1400,\\\\n    height: 1000,\\\\n    webPreferences: {\\\\n      nodeIntegration: false,\\\\n      contextIsolation: false,\\\\n      preload: path.resolve(path.join(__dirname, 'preload.js')),\\\\n      webSecurity: false,\\\\n    },\\\\n  })\\\\n```\\\\n\\\\n`nuxt.config.js`も併せて修正が必要でした。\\\\n\\\\n``` diff\\\\nimport colors from 'vuetify\\\\\\\/es5\\\\\\\/util\\\\\\\/colors'\\\\n\\\\n+ const isProduction = process.env.NODE_ENV === 'production'\\\\n+ const isDev = process.env.NODE_ENV === 'development'\\\\n+\\\\nexport default {\\\\n  \\\\\\\/\\\\\\\/ Disable server-side rendering (https:\\\\\\\/\\\\\\\/go.nuxtjs.dev\\\\\\\/ssr-mode)\\\\n  ssr: false,\\\\n\\\\n  \\\\\\\/\\\\\\\/ Target (https:\\\\\\\/\\\\\\\/go.nuxtjs.dev\\\\\\\/config-target)\\\\n  target: 'static',\\\\n\\\\n  \\\\\\\/\\\\\\\/ Global page headers (https:\\\\\\\/\\\\\\\/go.nuxtjs.dev\\\\\\\/config-head)\\\\n  head: {\\\\n    titleTemplate: '%s - nuxt-electron-example',\\\\n    title: 'nuxt-electron-example',\\\\n    meta: [\\\\n      { charset: 'utf-8' },\\\\n      { name: 'viewport', content: 'width=device-width, initial-scale=1' },\\\\n      { hid: 'description', name: 'description', content: '' },\\\\n    ],\\\\n    link: [{ rel: 'icon', type: 'image\\\\\\\/x-icon', href: '\\\\\\\/favicon.ico' }],\\\\n  },\\\\n\\\\n  \\\\\\\/\\\\\\\/ Global CSS (https:\\\\\\\/\\\\\\\/go.nuxtjs.dev\\\\\\\/config-css)\\\\n  css: [],\\\\n\\\\n  \\\\\\\/\\\\\\\/ Plugins to run before rendering page (https:\\\\\\\/\\\\\\\/go.nuxtjs.dev\\\\\\\/config-plugins)\\\\n  plugins: [],\\\\n\\\\n  \\\\\\\/\\\\\\\/ Auto import components (https:\\\\\\\/\\\\\\\/go.nuxtjs.dev\\\\\\\/config-components)\\\\n  components: true,\\\\n\\\\n  \\\\\\\/\\\\\\\/ Modules for dev and build (recommended) (https:\\\\\\\/\\\\\\\/go.nuxtjs.dev\\\\\\\/config-modules)\\\\n  buildModules: [\\\\n    \\\\\\\/\\\\\\\/ https:\\\\\\\/\\\\\\\/go.nuxtjs.dev\\\\\\\/typescript\\\\n    '@nuxt\\\\\\\/typescript-build',\\\\n    \\\\\\\/\\\\\\\/ https:\\\\\\\/\\\\\\\/go.nuxtjs.dev\\\\\\\/stylelint\\\\n    '@nuxtjs\\\\\\\/stylelint-module',\\\\n    \\\\\\\/\\\\\\\/ https:\\\\\\\/\\\\\\\/go.nuxtjs.dev\\\\\\\/vuetify\\\\n    '@nuxtjs\\\\\\\/vuetify',\\\\n  ],\\\\n\\\\n  \\\\\\\/\\\\\\\/ Modules (https:\\\\\\\/\\\\\\\/go.nuxtjs.dev\\\\\\\/config-modules)\\\\n  modules: [],\\\\n\\\\n  \\\\\\\/\\\\\\\/ Vuetify module configuration (https:\\\\\\\/\\\\\\\/go.nuxtjs.dev\\\\\\\/config-vuetify)\\\\n  vuetify: {\\\\n    customVariables: ['~\\\\\\\/assets\\\\\\\/variables.scss'],\\\\n    theme: {\\\\n      dark: true,\\\\n      themes: {\\\\n        dark: {\\\\n          primary: colors.blue.darken2,\\\\n          accent: colors.grey.darken3,\\\\n          secondary: colors.amber.darken3,\\\\n          info: colors.teal.lighten1,\\\\n          warning: colors.amber.base,\\\\n          error: colors.deepOrange.accent4,\\\\n          success: colors.green.accent3,\\\\n        },\\\\n      },\\\\n    },\\\\n  },\\\\n\\\\n+  dev: isDev,\\\\n+  router: {\\\\n+\\\\n+    mode: 'hash',\\\\n+  },\\\\n  \\\\\\\/\\\\\\\/ Build Configuration (https:\\\\\\\/\\\\\\\/go.nuxtjs.dev\\\\\\\/config-build)\\\\n-   build: {}\\\\n+   build: {\\\\n+     extend(config) {\\\\n+       if (!isDev) {\\\\n+         \\\\\\\/\\\\\\\/ absolute path to files on production (default value: '\\\\\\\/_nuxt\\\\\\\/')\\\\n+         config.output.publicPath = '_nuxt\\\\\\\/'\\\\n+       }\\\\n+       config.node = {\\\\n+         __dirname: !isProduction,\\\\n+         __filename: !isProduction,\\\\n+       }\\\\n+     },\\\\n+   },\\\\n+   buildDir: '..\\\\\\\/..\\\\\\\/dist\\\\\\\/nuxt-build',\\\\n+   generate: {\\\\n+     dir: '..\\\\\\\/..\\\\\\\/dist\\\\\\\/nuxt-build',\\\\n+   },\\\\n+   telemetry: false,\\\\n}\\\\n```\\\\n\\\\n最後に`package.json`のscriptを整理しました。スクリプトの同時実行に利用する`npm-run-all`を併せて導入しました。\\\\n\\\\n``` powershell\\\\n> yarn add --dev npm-run-all\\\\n```\\\\n\\\\n``` diff\\\\n{\\\\n  \\\\\\\"name\\\\\\\": \\\\\\\"nuxt-electron-example\\\\\\\",\\\\n  \\\\\\\"version\\\\\\\": \\\\\\\"1.0.0\\\\\\\",\\\\n  \\\\\\\"private\\\\\\\": true,\\\\n+  \\\\\\\"main\\\\\\\": \\\\\\\"dist\\\\\\\/main\\\\\\\/index.js\\\\\\\",\\\\n  \\\\\\\"scripts\\\\\\\": {\\\\n-    \\\\\\\"dev:renderer\\\\\\\": \\\\\\\"nuxt-ts src\\\\\\\/renderer\\\\\\\",\\\\n-    \\\\\\\"build:renderer\\\\\\\": \\\\\\\"nuxt-ts build src\\\\\\\/renderer\\\\\\\",\\\\n-    \\\\\\\"generate:renderer\\\\\\\": \\\\\\\"nuxt-ts generate src\\\\\\\/renderer\\\\\\\"\\\\n+    \\\\\\\"dev:main\\\\\\\": \\\\\\\"cross-env NODE_ENV=development tsc -p src\\\\\\\/main\\\\\\\/tsconfig.json\\\\\\\",\\\\n+    \\\\\\\"dev:renderer\\\\\\\": \\\\\\\"cross-env NODE_ENV=development nuxt-ts src\\\\\\\/renderer\\\\\\\",\\\\n+    \\\\\\\"dev:electron\\\\\\\": \\\\\\\"cross-env NODE_ENV=development electron .\\\\\\\",\\\\n+    \\\\\\\"build:main\\\\\\\": \\\\\\\"cross-env NODE_ENV=production tsc -p src\\\\\\\/main\\\\\\\/tsconfig.json\\\\\\\",\\\\n+    \\\\\\\"build:renderer\\\\\\\": \\\\\\\"cross-env NODE_ENV=production nuxt-ts generate src\\\\\\\/renderer\\\\\\\",\\\\n+    \\\\\\\"build:electron\\\\\\\": \\\\\\\"cross-env NODE_ENV=production electron-builder\\\\\\\",\\\\n+    \\\\\\\"build:electron:win\\\\\\\": \\\\\\\"cross-env NODE_ENV=production electron-builder --win\\\\\\\",\\\\n+    \\\\\\\"build:electron:mac\\\\\\\": \\\\\\\"cross-env NODE_ENV=production electron-builder --mac\\\\\\\",\\\\n+    \\\\\\\"build:electron:linux\\\\\\\": \\\\\\\"cross-env NODE_ENV=production electron-builder --linux\\\\\\\",\\\\n+    \\\\\\\"build:win\\\\\\\": \\\\\\\"npm-run-all build:main build:renderer build:electron:win\\\\\\\",\\\\n+    \\\\\\\"build:mac\\\\\\\": \\\\\\\"npm-run-all build:main build:renderer build:electron:mac\\\\\\\",\\\\n+    \\\\\\\"build:linux\\\\\\\": \\\\\\\"npm-run-all build:main build:renderer build:electron:linux\\\\\\\"\\\\n  },\\\\n  ...\\\\n}\\\\n```\\\\n\\\\n### 動作確認\\\\n\\\\nこの状態で`yarn dev:main`を実行したところ、tsconfig.jsonが見つからないエラーが発生しました。\\\\n\\\\n``` powershell\\\\n> yarn dev:main\\\\nyarn run v1.22.4\\\\n$ cross-env NODE_ENV=development tsc -p src\\\\\\\/main\\\\\\\/tsconfig.json\\\\n\\\\nerror TS5058: The specified path does not exist: 'src\\\\\\\/main\\\\\\\/tsconfig.json'.\\\\nerror Command failed with exit code 1.\\\\ninfo Visit https:\\\\\\\/\\\\\\\/yarnpkg.com\\\\\\\/en\\\\\\\/docs\\\\\\\/cli\\\\\\\/run for documentation about this command.\\\\nERROR: \\\\\\\"dev:main\\\\\\\" exited with 1.\\\\n```\\\\n\\\\ntsconfig.jsonを`src\\\\\\\/main`以下に配置して再実行します。\\\\n\\\\n``` js\\\\n\\\\\\\/\\\\\\\/ tsconfig.json\\\\n{\\\\n  \\\\\\\"compilerOptions\\\\\\\": {\\\\n    \\\\\\\/* Visit https:\\\\\\\/\\\\\\\/aka.ms\\\\\\\/tsconfig.json to read more about this file *\\\\\\\/\\\\n\\\\n    \\\\\\\/* Basic Options *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"incremental\\\\\\\": true,                   \\\\\\\/* Enable incremental compilation *\\\\\\\/\\\\n    \\\\\\\"target\\\\\\\": \\\\\\\"es5\\\\\\\",                          \\\\\\\/* Specify ECMAScript target version: 'ES3' (default), 'ES5', 'ES2015', 'ES2016', 'ES2017', 'ES2018', 'ES2019', 'ES2020', or 'ESNEXT'. *\\\\\\\/\\\\n    \\\\\\\"module\\\\\\\": \\\\\\\"commonjs\\\\\\\",                     \\\\\\\/* Specify module code generation: 'none', 'commonjs', 'amd', 'system', 'umd', 'es2015', 'es2020', or 'ESNext'. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"lib\\\\\\\": [],                             \\\\\\\/* Specify library files to be included in the compilation. *\\\\\\\/\\\\n    \\\\\\\"allowJs\\\\\\\": true,                       \\\\\\\/* Allow javascript files to be compiled. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"checkJs\\\\\\\": true,                       \\\\\\\/* Report errors in .js files. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"jsx\\\\\\\": \\\\\\\"preserve\\\\\\\",                     \\\\\\\/* Specify JSX code generation: 'preserve', 'react-native', or 'react'. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"declaration\\\\\\\": true,                   \\\\\\\/* Generates corresponding '.d.ts' file. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"declarationMap\\\\\\\": true,                \\\\\\\/* Generates a sourcemap for each corresponding '.d.ts' file. *\\\\\\\/\\\\n    \\\\\\\"sourceMap\\\\\\\": true,                     \\\\\\\/* Generates corresponding '.map' file. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"outFile\\\\\\\": \\\\\\\".\\\\\\\/\\\\\\\",                       \\\\\\\/* Concatenate and emit output to single file. *\\\\\\\/\\\\n    \\\\\\\"outDir\\\\\\\": \\\\\\\"..\\\\\\\/..\\\\\\\/dist\\\\\\\",                        \\\\\\\/* Redirect output structure to the directory. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"rootDir\\\\\\\": \\\\\\\".\\\\\\\/\\\\\\\",                       \\\\\\\/* Specify the root directory of input files. Use to control the output directory structure with --outDir. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"composite\\\\\\\": true,                     \\\\\\\/* Enable project compilation *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"tsBuildInfoFile\\\\\\\": \\\\\\\".\\\\\\\/\\\\\\\",               \\\\\\\/* Specify file to store incremental compilation information *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"removeComments\\\\\\\": true,                \\\\\\\/* Do not emit comments to output. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"noEmit\\\\\\\": true,                        \\\\\\\/* Do not emit outputs. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"importHelpers\\\\\\\": true,                 \\\\\\\/* Import emit helpers from 'tslib'. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"downlevelIteration\\\\\\\": true,            \\\\\\\/* Provide full support for iterables in 'for-of', spread, and destructuring when targeting 'ES5' or 'ES3'. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"isolatedModules\\\\\\\": true,               \\\\\\\/* Transpile each file as a separate module (similar to 'ts.transpileModule'). *\\\\\\\/\\\\n\\\\n    \\\\\\\/* Strict Type-Checking Options *\\\\\\\/\\\\n    \\\\\\\"strict\\\\\\\": true,                           \\\\\\\/* Enable all strict type-checking options. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"noImplicitAny\\\\\\\": true,                 \\\\\\\/* Raise error on expressions and declarations with an implied 'any' type. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"strictNullChecks\\\\\\\": true,              \\\\\\\/* Enable strict null checks. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"strictFunctionTypes\\\\\\\": true,           \\\\\\\/* Enable strict checking of function types. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"strictBindCallApply\\\\\\\": true,           \\\\\\\/* Enable strict 'bind', 'call', and 'apply' methods on functions. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"strictPropertyInitialization\\\\\\\": true,  \\\\\\\/* Enable strict checking of property initialization in classes. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"noImplicitThis\\\\\\\": true,                \\\\\\\/* Raise error on 'this' expressions with an implied 'any' type. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"alwaysStrict\\\\\\\": true,                  \\\\\\\/* Parse in strict mode and emit \\\\\\\"use strict\\\\\\\" for each source file. *\\\\\\\/\\\\n\\\\n    \\\\\\\/* Additional Checks *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"noUnusedLocals\\\\\\\": true,                \\\\\\\/* Report errors on unused locals. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"noUnusedParameters\\\\\\\": true,            \\\\\\\/* Report errors on unused parameters. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"noImplicitReturns\\\\\\\": true,             \\\\\\\/* Report error when not all code paths in function return a value. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"noFallthroughCasesInSwitch\\\\\\\": true,    \\\\\\\/* Report errors for fallthrough cases in switch statement. *\\\\\\\/\\\\n\\\\n    \\\\\\\/* Module Resolution Options *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"moduleResolution\\\\\\\": \\\\\\\"node\\\\\\\",            \\\\\\\/* Specify module resolution strategy: 'node' (Node.js) or 'classic' (TypeScript pre-1.6). *\\\\\\\/\\\\n    \\\\\\\"baseUrl\\\\\\\": \\\\\\\".\\\\\\\",\\\\n    \\\\\\\"paths\\\\\\\": {\\\\n      \\\\\\\"~\\\\\\\/*\\\\\\\": [\\\\n        \\\\\\\".\\\\\\\/*\\\\\\\"\\\\n      ],\\\\n      \\\\\\\"@\\\\\\\/*\\\\\\\": [\\\\n        \\\\\\\".\\\\\\\/*\\\\\\\"\\\\n      ]\\\\n    },\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"rootDirs\\\\\\\": [],                        \\\\\\\/* List of root folders whose combined content represents the structure of the project at runtime. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"typeRoots\\\\\\\": [],                       \\\\\\\/* List of folders to include type definitions from. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"types\\\\\\\": [],                           \\\\\\\/* Type declaration files to be included in compilation. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"allowSyntheticDefaultImports\\\\\\\": true,  \\\\\\\/* Allow default imports from modules with no default export. This does not affect code emit, just typechecking. *\\\\\\\/\\\\n    \\\\\\\"esModuleInterop\\\\\\\": true,                  \\\\\\\/* Enables emit interoperability between CommonJS and ES Modules via creation of namespace objects for all imports. Implies 'allowSyntheticDefaultImports'. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"preserveSymlinks\\\\\\\": true,              \\\\\\\/* Do not resolve the real path of symlinks. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"allowUmdGlobalAccess\\\\\\\": true,          \\\\\\\/* Allow accessing UMD globals from modules. *\\\\\\\/\\\\n\\\\n    \\\\\\\/* Source Map Options *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"sourceRoot\\\\\\\": \\\\\\\"\\\\\\\",                      \\\\\\\/* Specify the location where debugger should locate TypeScript files instead of source locations. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"mapRoot\\\\\\\": \\\\\\\"\\\\\\\",                         \\\\\\\/* Specify the location where debugger should locate map files instead of generated locations. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"inlineSourceMap\\\\\\\": true,               \\\\\\\/* Emit a single file with source maps instead of having a separate file. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"inlineSources\\\\\\\": true,                 \\\\\\\/* Emit the source alongside the sourcemaps within a single file; requires '--inlineSourceMap' or '--sourceMap' to be set. *\\\\\\\/\\\\n\\\\n    \\\\\\\/* Experimental Options *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"experimentalDecorators\\\\\\\": true,        \\\\\\\/* Enables experimental support for ES7 decorators. *\\\\\\\/\\\\n    \\\\\\\/\\\\\\\/ \\\\\\\"emitDecoratorMetadata\\\\\\\": true,         \\\\\\\/* Enables experimental support for emitting type metadata for decorators. *\\\\\\\/\\\\n\\\\n    \\\\\\\/* Advanced Options *\\\\\\\/\\\\n    \\\\\\\"skipLibCheck\\\\\\\": true,                     \\\\\\\/* Skip type checking of declaration files. *\\\\\\\/\\\\n    \\\\\\\"forceConsistentCasingInFileNames\\\\\\\": true  \\\\\\\/* Disallow inconsistently-cased references to the same file. *\\\\\\\/\\\\n  },\\\\n  \\\\\\\"includes\\\\\\\": [\\\\n    \\\\\\\".\\\\\\\/*.(js|ts)\\\\\\\"\\\\n  ]\\\\n}\\\\n```\\\\n\\\\nこれで、`yarn dev:main`が正常終了し、`yarn dev:electron`で、electron appをデバッグ実行できるようになりました。\\\\n\\\\n最後に`electron-builder.yml`をproject直下に配置し`build:win`を実行します。\\\\n\\\\n``` yml\\\\n<!-- electron-builder.yml -->\\\\nappId: com.nuxt-electron-example.app\\\\nproductName: nuxt-electron-example\\\\nasar: true\\\\n\\\\ndirectories:\\\\n  output: build\\\\\\\/\\\\n\\\\nfiles:\\\\n  - package.json\\\\n  - dist\\\\\\\/main\\\\\\\/\\\\n  - dist\\\\\\\/renderer\\\\\\\/\\\\n  - dist\\\\\\\/nuxt-build\\\\\\\/\\\\n\\\\ndmg:\\\\n  contents:\\\\n    - type: link\\\\n      path: \\\\\\\/Applications\\\\n      x: 410\\\\n      y: 150\\\\n    - type: file\\\\n      x: 130\\\\n      y: 150\\\\n\\\\nmac:\\\\n  target: dmg\\\\n  category: public.app-category.developer-tools\\\\n\\\\nwin:\\\\n  target: portable\\\\n\\\\nlinux:\\\\n  target:\\\\n    - deb\\\\n    - AppImage\\\\n```\\\\n\\\\n``` powershell\\\\n> yarn build:win\\\\nyarn run v1.22.4\\\\n$ npm-run-all build:main build:renderer build:electron:win\\\\n$ cross-env NODE_ENV=production tsc -p src\\\\\\\/main\\\\\\\/tsconfig.json\\\\n$ cross-env NODE_ENV=production nuxt-ts generate src\\\\\\\/renderer\\\\ni Doing webpack rebuild because pages\\\\\\\\index.vue modified\\\\ni Production build\\\\ni Bundling only for client side\\\\ni Target: static\\\\n√ Builder initialized\\\\n√ Nuxt files generated\\\\n√ Client\\\\n  Compiled successfully in 44.10s\\\\n\\\\nHash: 93e7999117d5727b31d3\\\\nVersion: webpack 4.44.2\\\\nTime: 44106ms\\\\nBuilt at: 2021-01-11 23:30:39\\\\n                         Asset       Size  Chunks                                Chunk Names\\\\n..\\\\\\\/server\\\\\\\/client.manifest.json   14.7 KiB          [emitted]\\\\n                    1643269.js   24.7 KiB       6  [emitted] [immutable]         vendors\\\\\\\/pages\\\\\\\/index\\\\n                    380d0fb.js   3.83 KiB       0  [emitted] [immutable]         app\\\\n                    45a7178.js    521 KiB       5  [emitted] [immutable]  [big]  vendors\\\\\\\/app\\\\n                    95ff23c.js   2.32 KiB       4  [emitted] [immutable]         runtime\\\\n                      LICENSES  389 bytes          [emitted]\\\\n                    bbcb20a.js    199 KiB       1  [emitted] [immutable]         commons\\\\\\\/app\\\\n                    eaca075.js    5.4 KiB       2  [emitted] [immutable]         pages\\\\\\\/index\\\\n                    fb55579.js   8.67 KiB       3  [emitted] [immutable]         pages\\\\\\\/inspire\\\\n + 1 hidden asset\\\\nEntrypoint app = 95ff23c.js bbcb20a.js 45a7178.js 380d0fb.js\\\\n\\\\nWARNING in asset size limit: The following asset(s) exceed the recommended size limit (244 KiB).\\\\nThis can impact web performance.\\\\nAssets:\\\\n  45a7178.js (521 KiB)\\\\ni Generating output directory: nuxt-build\\\\\\\/\\\\ni Generating pages\\\\n√ Generated route \\\\\\\"\\\\\\\/\\\\\\\"\\\\n√ Client-side fallback created: 200.html\\\\n$ cross-env NODE_ENV=production electron-builder --win\\\\n  • electron-builder  version=22.9.1 os=10.0.19041\\\\n  • loaded configuration  file=C:\\\\\\\\Repos\\\\\\\\github\\\\\\\\nuxt-electron-example\\\\\\\\electron-builder.yml\\\\n  • description is missed in the package.json  appPackageFile=C:\\\\\\\\Repos\\\\\\\\github\\\\\\\\nuxt-electron-example\\\\\\\\package.json\\\\n  • author is missed in the package.json  appPackageFile=C:\\\\\\\\Repos\\\\\\\\github\\\\\\\\nuxt-electron-example\\\\\\\\package.json\\\\n  • writing effective config  file=build\\\\\\\\builder-effective-config.yaml\\\\n  • packaging       platform=win32 arch=x64 electron=11.1.1 appOutDir=build\\\\\\\\win-unpacked\\\\n  • default Electron icon is used  reason=application icon is not set\\\\n  • building        target=portable file=build\\\\\\\\nuxt-electron-example 1.0.0.exe archs=x64\\\\nDone in 337.16s.\\\\n```\\\\n\\\\n約5分でbuildが完了しました。distフォルダに`build:main`、`build:renderer`で生成されたビルドモジュールが配置され、それらを使って`build:electron`が各環境用の実行ファイルを生成する、という流れのようです。\\\\n\\\\n今回はwindowsのビルド設定を`target: portable`にしているので、単独実行可能な`nuxt-electron-example 1.0.0.exe`(約60MB)が生成されました。\\\\n\\\\n``` powershell\\\\nMode                 LastWriteTime         Length Name\\\\n----                 -------------         ------ ----\\\\nd-----        2021\\\\\\\/01\\\\\\\/11     23:32                win-unpacked\\\\n-a----        2021\\\\\\\/01\\\\\\\/11     23:30            534 builder-effective-config.yaml\\\\n-a----        2021\\\\\\\/01\\\\\\\/11     23:34       61868355 nuxt-electron-example 1.0.0.exe\\\\n```\\\\n\\\\nこれで完璧！と思ったのですが、実行時に`nuxt.config.js`の`import colors from 'vuetify\\\\\\\/es5\\\\\\\/util\\\\\\\/colors'`を解決できないエラーが発生してしまいました。詳細を調査できていないのですが、`yarn add vuetify`でdependeciesにvuetifyを追加することで解決するところまで確認できました。\\\\n\\\\n## 残課題\\\\n\\\\n- renderer\\\\\\\/static フォルダに配置している画像等のリソースがelectronで利用できなくなっていました。electron用の設定が必要そうなので引き続き調査が必要です。\\\\n\\\\n## 関連項目\\\\n\\\\n- [Electron + Nuxt.js + TypeScriptの環境構築 - Qiita](https:\\\\\\\/\\\\\\\/qiita.com\\\\\\\/282Haniwa\\\\\\\/items\\\\\\\/a3b0a7d3c622ad82ac8d)\\\\n- [Electronでデスクトップアプリを作ろうとしたメモ](https:\\\\\\\/\\\\\\\/tenderfeel.xsrv.jp\\\\\\\/javascript\\\\\\\/4471\\\\\\\/)\\\\n- [Nuxt.js+Electronを試してみるv2 - Qiita](https:\\\\\\\/\\\\\\\/qiita.com\\\\\\\/tamfoi\\\\\\\/items\\\\\\\/aa5b795d4559fa06f0e3)\\\\n- [electron-nuxtを使ってデスクトップアプリケーションを作ってみる - Qiita](https:\\\\\\\/\\\\\\\/qiita.com\\\\\\\/yakiniku0220\\\\\\\/items\\\\\\\/c78ee5c61bd245e80d7a)\\\"}\"}","{\"docRef\":\"vue\\\/vue_electron_secure_app\",\"content\":\"{\\\"title\\\":\\\"NuxtJS + Electronアプリで、セキュアなプロセス間通信を構成する\\\",\\\"date\\\":\\\"2021-05-10\\\",\\\"category\\\":\\\"Vue\\\",\\\"tag\\\":[\\\"vue\\\",\\\"nuxtjs\\\",\\\"electron\\\",\\\"electron-store\\\"],\\\"body\\\":\\\"\\\\n\\\\nelectronアプリでは脆弱性対応のため、ローカルファイルシステムやOSの処理をNuxtJS側（レンダラープロセス）では行わず、メインプロセス側で実行することが推奨されています。\\\\n\\\\nメインプロセスとレンダラープロセス間の通信方法はelectronのバージョンアップと共に頻繁に変更されているようなので、現時点(electron v11)での安全な方法について調べ、実装していきます。\\\\n\\\\n## 環境確認\\\\n\\\\n- エディタ: VSCode\\\\n- nodejs: v12.16.0\\\\n- yarn: 1.22.4\\\\n- electron: 11.1.1\\\\n\\\\n## 情報収集\\\\n\\\\n色々なやり方があるようで、書きつつ試しつつかなり試行錯誤しました。\\\\n\\\\nまず初めにこの記事を読みました。\\\\n\\\\n- [Electron（v.12.0.0 現在）の IPC 通信入門 - よりセキュアな方法への変遷](https:\\\\\\\/\\\\\\\/qiita.com\\\\\\\/hibara\\\\\\\/items\\\\\\\/c59fb6924610fc22a9db)\\\\n- [Electronのセキュリティについて大きく誤認していたこと](https:\\\\\\\/\\\\\\\/qiita.com\\\\\\\/sprout2000\\\\\\\/items\\\\\\\/2b65f7d02e825549804b)\\\\n\\\\nどうやら「renderer側でnodejsのコードを走らせない」「main側ではpreload.tsの中でrenderer側から呼び出せる処理をexposeする」のが大事なようです。\\\\n\\\\n当初は[vuex-electron-persisted-state](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/chenjietao\\\\\\\/vuex-electron-persisted-state)を使えばいいのかなと思ったのですが、mainとrendererの処理が分離できない感じだったので、このモジュールの中で使用している[electron-store](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/sindresorhus\\\\\\\/electron-store)を使って自分で実装することにしました。\\\\n\\\\n## electron-storeを使った実装トライアル\\\\n\\\\nまずはインストールします。\\\\n\\\\n``` powershell\\\\n> yarn add electron-store\\\\n```\\\\n\\\\nそしてmain.tsから更新していきます。\\\\n\\\\n``` diff\\\\n\\\\\\\/\\\\\\\/ main.ts\\\\nimport nuxtConfig from '..\\\\\\\/renderer\\\\\\\/nuxt.config'\\\\nconst http = require('http')\\\\nconst path = require('path')\\\\nconst { Nuxt, Builder } = require('nuxt')\\\\n- const electron = require('electron')\\\\n+ const { app, BrowserWindow, ipcMain } = require('electron')\\\\n\\\\n\\\\\\\/\\\\\\\/ @ts-ignore\\\\nnuxtConfig.rootDir = path.resolve('src\\\\\\\/renderer')\\\\n\\\\\\\/\\\\\\\/ @ts-ignore\\\\nconst isDev = nuxtConfig.dev\\\\nlet _NUXT_URL_ = ''\\\\n\\\\nconst nuxt = new Nuxt(nuxtConfig)\\\\n+ const storeFilePathString = path.join(app.getPath('documents'), '.\\\\\\\/electron-app')\\\\n+\\\\nif (isDev) {\\\\n  nuxt.ready().then((n: { render: any }) => {\\\\n    const builder = new Builder(n)\\\\n    const server = http.createServer(n.render)\\\\n    builder.build().catch((err: any) => {\\\\n      console.error(err)\\\\n      process.exit(1)\\\\n    })\\\\n    server.listen()\\\\n    _NUXT_URL_ = `http:\\\\\\\/\\\\\\\/localhost:${server.address().port}`\\\\n    console.log(`Nuxt working on ${_NUXT_URL_}`)\\\\n-\\\\n-     createElectronApp()\\\\n  })\\\\n} else {\\\\n  _NUXT_URL_ = 'file:\\\\\\\/\\\\\\\/' + path.resolve(__dirname, '..\\\\\\\/..\\\\\\\/dist\\\\\\\/nuxt-build\\\\\\\/index.html')\\\\n-   createElectronApp()\\\\n}\\\\n\\\\n+ createElectronApp()\\\\n+\\\\nfunction createElectronApp() {\\\\n+  \\\\\\\/\\\\\\\/ Keep a global reference of the window object, if you don't, the window will\\\\n+  \\\\\\\/\\\\\\\/ be closed automatically when the JavaScript object is garbage collected.\\\\n  let win: any = null\\\\n-  const app = electron.app\\\\n+\\\\n  const newWin = () => {\\\\n-     win = new electron.BrowserWindow({\\\\n+     win = new BrowserWindow({\\\\n      width: 1400,\\\\n      height: 1000,\\\\n      webPreferences: {\\\\n-        nodeIntegration: false,\\\\n-        contextIsolation: false,\\\\n+        contextIsolation: true,\\\\n        preload: path.resolve(path.join(__dirname, 'preload.js')),\\\\n-        webSecurity: false,\\\\n      },\\\\n    })\\\\n\\\\n    win.on('closed', () => (win = null))\\\\n    if (isDev) {\\\\n      const { default: installExtension, VUEJS_DEVTOOLS } = require('electron-devtools-installer')\\\\n      installExtension(VUEJS_DEVTOOLS.id)\\\\n        .then((name: any) => {\\\\n          console.log(`Added Extension:  ${name}`)\\\\n          win.webContents.openDevTools()\\\\n        })\\\\n        .catch((err: any) => console.log('An error occurred: ', err))\\\\n      const pollServer = () => {\\\\n        http\\\\n          .get(_NUXT_URL_, (res: any) => {\\\\n            if (res.statusCode === 200) {\\\\n              win.loadURL(_NUXT_URL_)\\\\n            } else {\\\\n              console.log('restart poolServer')\\\\n              setTimeout(pollServer, 300)\\\\n            }\\\\n          })\\\\n          .on('error', pollServer)\\\\n      }\\\\n      pollServer()\\\\n    } else {\\\\n      return win.loadURL(_NUXT_URL_)\\\\n    }\\\\n  }\\\\n\\\\n+  \\\\\\\/\\\\\\\/ setup electron-store for persisted state\\\\n+  const Store = require('electron-store')\\\\n+  const store = new Store({ cwd: storeFilePathString })\\\\n+  ipcMain.handle('GET_STORE_VALUE', (_: any, key: any) => {\\\\n+    const result = store.get(key)\\\\n+    return result\\\\n+  })\\\\n+  ipcMain.on('SYNC_STORE', (_: any, args: any) => {\\\\n+    store.set('data', args)\\\\n+  })\\\\n+\\\\n+  \\\\\\\/\\\\\\\/ This method will be called when Electron has finished\\\\n+  \\\\\\\/\\\\\\\/ initialization and is ready to create browser windows.\\\\n+  \\\\\\\/\\\\\\\/ Some APIs can only be used after this event occurs.\\\\n  app.on('ready', newWin)\\\\n-  app.on('window-all-closed', () => app.quit())\\\\n+\\\\n+  app.on('window-all-closed', () => {\\\\n+    \\\\\\\/\\\\\\\/ On macOS it is common for applications and their menu bar\\\\n+    \\\\\\\/\\\\\\\/ to stay active until the user quits explicitly with Cmd + Q\\\\n+    if (process.platform !== 'darwin') {\\\\n+      app.quit()\\\\n+    }\\\\n+  })\\\\n+\\\\n  app.on('activate', () => win === null && newWin())\\\\n}\\\\n```\\\\n\\\\nポイントはこの部分。\\\\n\\\\n- ipcMain.handle('GET_STORE_VALUE', ...)は、renderer側から初期stateを取得する際に呼ばれ、store全体を返します。keyには`data`が入ります。\\\\n- ipcMain.on('SYNC_STORE', ...)は、rendererのstoreを`store.set()`でファイルに書き出しています。argsには最新の状態のstore全体が入ります。\\\\n\\\\n``` ts\\\\n  \\\\\\\/\\\\\\\/ setup electron-store for persisted state\\\\n  const Store = require('electron-store')\\\\n  const store = new Store({ cwd: storeFilePathString })\\\\n  ipcMain.handle('GET_STORE_VALUE', (_: any, key: any) => {\\\\n    const result = store.get(key)\\\\n    return result\\\\n  })\\\\n  ipcMain.on('SYNC_STORE', (_: any, args: any) => {\\\\n    store.set('data', args)\\\\n  })\\\\n```\\\\n\\\\nrenderer側から処理が呼び出せるようにpreload.tsに処理を追加します。\\\\n\\\\n``` ts\\\\n\\\\\\\/\\\\\\\/ preload.ts\\\\nconst { contextBridge, ipcRenderer } = require('electron')\\\\n\\\\n\\\\\\\/\\\\\\\/ Expose protected methods that allow the renderer process to use\\\\n\\\\\\\/\\\\\\\/ the ipcRenderer without exposing the entire object\\\\ncontextBridge.exposeInMainWorld('api', {\\\\n  getInitialState: () => ipcRenderer.invoke('GET_STORE_VALUE', 'data'),\\\\n  syncStore: (state: string) => ipcRenderer.send('SYNC_STORE', state),\\\\n})\\\\n```\\\\n\\\\nrenderer側では`fecth()`と`mounted()`のライフサイクルフックを追加して、main側とstateデータのやり取りを行います。\\\\n\\\\n``` diff\\\\n\\\\\\\/\\\\\\\/ TodoList.vue\\\\n<template>\\\\n  <v-container>\\\\n    <v-list>\\\\n      <v-list-item v-for=\\\\\\\"todoData in getTodoList\\\\\\\" :key=\\\\\\\"todoData.name\\\\\\\">\\\\n        <v-list-item-content class=\\\\\\\"px-2\\\\\\\">\\\\n          <todo-data :todo=\\\\\\\"todoData\\\\\\\" \\\\\\\/>\\\\n        <\\\\\\\/v-list-item-content>\\\\n      <\\\\\\\/v-list-item>\\\\n    <\\\\\\\/v-list>\\\\n  <\\\\\\\/v-container>\\\\n<\\\\\\\/template>\\\\n<script lang=\\\\\\\"ts\\\\\\\">\\\\nimport Vue from 'vue'\\\\nimport TodoData from '.\\\\\\\/TodoData.vue'\\\\n+ import { accessorType } from '~\\\\\\\/store'\\\\nexport default Vue.extend({\\\\n  components: {\\\\n    TodoData,\\\\n  },\\\\n+  async fetch() {\\\\n+    if (window.api) {\\\\n+      const state: typeof accessorType = await window.api.getInitialState()\\\\n+      if (state) {\\\\n+        this.$store.replaceState(state)\\\\n+      }\\\\n+    }\\\\n+  },\\\\n+  data() {\\\\n+    return {\\\\n+      unsubscribe() {},\\\\n+    }\\\\n+  },\\\\n  computed: {\\\\n    getTodoList() {\\\\n      return this.$accessor.todos.getTodoList\\\\n    },\\\\n  },\\\\n+  mounted() {\\\\n+    this.unsubscribe = this.$store.subscribe((mutation, state) => {\\\\n+      if (mutation.type === 'todos\\\\\\\/add' || mutation.type === 'todos\\\\\\\/remove') {\\\\n+        if (window.api) window.api.syncStore(state)\\\\n+      }\\\\n+    })\\\\n+  },\\\\n+  beforeDestroy() {\\\\n+    this.unsubscribe()\\\\n+  },\\\\n})\\\\n<\\\\\\\/script>\\\\n```\\\\n\\\\nthis.$store.subscribeで作成したsubscriptionをunsubscribeするための記述が色々トリッキーでした。インテリセンスに頼って書いたため、正直完璧には理解できませんでした。\\\\n\\\\nさらに、contextBridgeでexposeした`getInitialState`と`syncStore`は`window.api`以下に注入されるのですが、このままでは型がanyのため存在しないと怒られてしまいます。\\\\n\\\\nエラーを抑制するために、型定義ファイルを追加しました。\\\\n\\\\n``` ts\\\\n\\\\\\\/\\\\\\\/ types\\\\\\\/global.d.ts\\\\nimport { accessorType } from '~\\\\\\\/store'\\\\n\\\\ndeclare global {\\\\n  interface Window {\\\\n    api: Sandbox\\\\n  }\\\\n}\\\\n\\\\nexport interface Sandbox {\\\\n  getInitialState: () => Promise<typeof accessorType>\\\\n  syncStore: (state: string) => void\\\\n}\\\\n```\\\\n\\\\nこれで実装は完了です。`todos\\\\\\\/add`または`todos\\\\\\\/remove`のmutationが行われるとconfig.jsonファイルが`[ユーザのドキュメントフォルダ]\\\\\\\\electron-app`以下に作成されました（削除を実装してなかったのでaddしか試していませんが。。。）\\\\n\\\\nそしてTodo画面を再度開いた時には、前回作成したタスクが読み込まれてタスク一覧に表示されます。\\\\n\\\\n## electronのdebug実行\\\\n\\\\nなかなか実装がうまくいかず試行錯誤する中で、electron appをdebugする方法を少し学びました。今のところmain側とrenderer側を同時にdebugすることができず、それぞれ別の方法でdebug実行しました。\\\\n\\\\n### renderer側のdebug\\\\n\\\\nrenderer側のdebugに関して特に難しいことはありません。electron appをdevelopment modeで実行し、vue.js devtoolsを使ってchromeと同じ感覚でjavascriptのdebugができます。\\\\n\\\\n### main側のdebug\\\\n\\\\n.vscode\\\\\\\\launch.jsonを用意することで、vscodeからdebug実行が可能です。注意点として、renderer側はbuild済みのモジュールが使われるようなので、事前に`nuxt-ts generate`しておく必要があります。そうしないとrenderer側が古い状態で尚且つrenderer側のコードがdebugできないため、状況が全く掴めずハマります。（ハマりました）\\\\n\\\\n``` json\\\\n{\\\\n  \\\\\\\"version\\\\\\\": \\\\\\\"0.2.0\\\\\\\",\\\\n  \\\\\\\"configurations\\\\\\\": [\\\\n    {\\\\n      \\\\\\\"name\\\\\\\": \\\\\\\"Debug Main Process\\\\\\\",\\\\n      \\\\\\\"type\\\\\\\": \\\\\\\"node\\\\\\\",\\\\n      \\\\\\\"request\\\\\\\": \\\\\\\"launch\\\\\\\",\\\\n      \\\\\\\"cwd\\\\\\\": \\\\\\\"${workspaceFolder}\\\\\\\",\\\\n      \\\\\\\"runtimeExecutable\\\\\\\": \\\\\\\"${workspaceFolder}\\\\\\\/node_modules\\\\\\\/.bin\\\\\\\/electron\\\\\\\",\\\\n      \\\\\\\"windows\\\\\\\": {\\\\n        \\\\\\\"runtimeExecutable\\\\\\\": \\\\\\\"${workspaceFolder}\\\\\\\/node_modules\\\\\\\/.bin\\\\\\\/electron.cmd\\\\\\\"\\\\n      },\\\\n      \\\\\\\"args\\\\\\\": [\\\\\\\".\\\\\\\"],\\\\n      \\\\\\\"outputCapture\\\\\\\": \\\\\\\"std\\\\\\\"\\\\n    }\\\\n  ]\\\\n}\\\\n```\\\\n\\\\n## 関連項目\\\\n\\\\n- [Nuxt × TypeScript × Electron × SQLiteを動かしてみた2](https:\\\\\\\/\\\\\\\/blog.mamansoft.net\\\\\\\/2019\\\\\\\/12\\\\\\\/29\\\\\\\/nuxt-typescript-electron-sqlite-project2\\\\\\\/)\\\\n- [secure-electron-store - Github](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/reZach\\\\\\\/secure-electron-store)\\\\n\\\"}\"}","{\"docRef\":\"vue\\\/vue_storybook_get_started\",\"content\":\"{\\\"title\\\":\\\"NuxtJSにStorybookを導入する\\\",\\\"date\\\":\\\"2021-01-04\\\",\\\"category\\\":\\\"Vue\\\",\\\"tag\\\":[\\\"vue\\\",\\\"nuxtjs\\\",\\\"storybook\\\"],\\\"body\\\":\\\"\\\\n\\\\nNuxtJS + Electron を使って、デスクトップで動くオレオレ Todo アプリを作ってみたくなりました。まずは NuxtJS(Vue.js)に慣れるためのサンプル Todo アプリを作ります。Storybook を導入して、コンポーネントカタログも併せて作ってみます。\\\\n\\\\n## 環境確認\\\\n\\\\n- エディタ: VSCode\\\\n- nodejs: v12.16.0\\\\n- yarn: 1.22.4\\\\n\\\\n## ワークログ\\\\n\\\\n### yarn のアップグレード\\\\n\\\\n``` powershell\\\\n> yarn -v\\\\n1.22.0\\\\n\\\\n> yarn policies set-version\\\\nResolving latest to a url...\\\\nDownloading https:\\\\\\\/\\\\\\\/github.com\\\\\\\/yarnpkg\\\\\\\/yarn\\\\\\\/releases\\\\\\\/download\\\\\\\/v1.22.4\\\\\\\/yarn-1.22.4.js...\\\\nSaving it into C:\\\\\\\\Users\\\\\\\\takum\\\\\\\\.yarn\\\\\\\\releases\\\\\\\\yarn-1.22.4.js...\\\\nUpdating C:\\\\\\\\Users\\\\\\\\takum\\\\\\\/.yarnrc...\\\\nDone!\\\\n\\\\n> yarn -v\\\\n1.22.4\\\\n```\\\\n\\\\n### NuxtJS プロジェクトの新規作成\\\\n\\\\n`yarn create nuxt-app nuxt-components-storybook`により`create-nuxt-app`モジュールが global に install され、プロジェクト生成が行われました。\\\\n\\\\nデフォルトの設定でlinting toolなどお好みで選択できます。何度かプロジェクトを作って試してみた結果、以下の設定に落ち着きました。\\\\n\\\\n``` powershell\\\\n> yarn create nuxt-app nuxt-components-storybook\\\\n\\\\n> yarn create nuxt-app nuxt-components-storybook\\\\nyarn create v1.22.4\\\\n[1\\\\\\\/4] Resolving packages...\\\\n[2\\\\\\\/4] Fetching packages...\\\\n[3\\\\\\\/4] Linking dependencies...\\\\n[4\\\\\\\/4] Building fresh packages...\\\\n\\\\nsuccess Installed \\\\\\\"create-nuxt-app@3.2.0\\\\\\\" with binaries:\\\\n      - create-nuxt-app\\\\n\\\\ncreate-nuxt-app v3.2.0\\\\n✨  Generating Nuxt.js project in nuxt-components-storybook\\\\n? Project name: nuxt-components-storybook\\\\n? Programming language: TypeScript\\\\n? Package manager: Yarn\\\\n? UI framework: Vuetify.js\\\\n? Nuxt.js modules: (Press <space> to select, <a> to toggle all, <i> to invert selection)\\\\n? Linting tools: Prettier\\\\n? Testing framework: Jest\\\\n? Rendering mode: Single Page App\\\\n? Deployment target: Static (Static\\\\\\\/JAMStack hosting)\\\\n? Development tools:\\\\n\\\\nyarn install v1.22.4\\\\ninfo No lockfile found.\\\\n\\\\n🎉  Successfully created project nuxt-components-storybook\\\\n\\\\n  To get started:\\\\n\\\\n        cd nuxt-components-storybook\\\\n        yarn dev\\\\n\\\\n  To build & start for production:\\\\n\\\\n        cd nuxt-components-storybook\\\\n        yarn build\\\\n        yarn start\\\\n\\\\n  To test:\\\\n\\\\n        cd nuxt-components-storybook\\\\n        yarn test\\\\n\\\\n\\\\n  For TypeScript users.\\\\n\\\\n  See : https:\\\\\\\/\\\\\\\/typescript.nuxtjs.org\\\\\\\/cookbook\\\\\\\/components\\\\\\\/\\\\nDone in 502.43s.\\\\n```\\\\n\\\\n### 最初の動作確認\\\\n\\\\ninstall 完了時メッセージに従い`yarn dev`を実行すると、localhost:3000 でサイトが起動しました。\\\\n\\\\n``` powershell\\\\n> yarn dev\\\\nyarn run v1.22.4\\\\n$ nuxt-ts\\\\n\\\\n   ╭───────────────────────────────────────╮\\\\n   │                                       │\\\\n   │   Nuxt.js @ v2.14.1                   │\\\\n   │                                       │\\\\n   │   ▸ Environment: development          │\\\\n   │   ▸ Rendering:   client-side          │\\\\n   │   ▸ Target:      static               │\\\\n   │                                       │\\\\n   │   Listening: http:\\\\\\\/\\\\\\\/localhost:3000\\\\\\\/   │\\\\n   │                                       │\\\\n   ╰───────────────────────────────────────╯\\\\n\\\\ni Preparing project for development                 12:44:00\\\\ni Initial build may take a while                    12:44:00\\\\n√ Builder initialized                               12:44:00\\\\n√ Nuxt files generated                              12:44:01\\\\n\\\\n√ Client\\\\n  Compiled successfully in 20.95s\\\\n\\\\ni Waiting for file changes                          12:44:32\\\\ni Memory usage: 258 MB (RSS: 355 MB)                12:44:32\\\\ni Listening on: http:\\\\\\\/\\\\\\\/localhost:3000\\\\\\\/              12:44:32\\\\nNo issues found.                                    12:44:32\\\\n```\\\\n\\\\n### Storybook の導入\\\\n\\\\nstorybook cliを利用することで、各フレームワーク\\\\\\\/ツール向けの初期設定ができるようです。`@storybook\\\\\\\/cli`をdevDependencies に追加、初期化コマンドを実行します。\\\\n\\\\n``` powershell\\\\nyarn add --dev @storybook\\\\\\\/cli\\\\nyarn sb init --type vue\\\\n```\\\\n\\\\nプロジェクト直下に`.storybook`フォルダと`stories`フォルダが作成され、`.storybook\\\\\\\/main.js`といくつかのサンプルストーリーも作成されました。project.json には storybook 起動用 script が追加されており、実行するとデフォルトブラウザが起動し、localhost:6006 で storybook のサイトが表示されました。\\\\n\\\\n``` powershell\\\\nyarn storybook\\\\n```\\\\n\\\\n### vuetify用の設定を追加する\\\\n\\\\n[Nuxt + Vuetify の構成で Storybook を導入する](https:\\\\\\\/\\\\\\\/almond.milk200.cc\\\\\\\/blog\\\\\\\/2020\\\\\\\/06\\\\\\\/01\\\\\\\/storybook.html)の設定を参考にして、`preview.js`と`webpack.config.js`を調整しました。\\\\n\\\\n``` ts\\\\n\\\\\\\/\\\\\\\/ .storybook\\\\\\\/webpack.config.js\\\\nconst path = require('path')\\\\nconst rootPath = path.resolve(__dirname, '..\\\\\\\/')\\\\n\\\\nmodule.exports = ({ config }) => {\\\\n  config.module.rules.push({\\\\n    test: \\\\\\\/\\\\\\\\.s(c|a)ss$\\\\\\\/,\\\\n    use: [\\\\n      'style-loader',\\\\n      'css-loader',\\\\n      {\\\\n        loader: 'sass-loader',\\\\n      },\\\\n    ],\\\\n  })\\\\n\\\\n  config.resolve.alias['~'] = rootPath\\\\n  config.resolve.alias['@'] = rootPath\\\\n\\\\n  return config\\\\n}\\\\n```\\\\n\\\\n``` ts\\\\n\\\\\\\/\\\\\\\/ .storybook\\\\\\\/preview.js\\\\nimport { addDecorator } from '@storybook\\\\\\\/vue'\\\\nimport Vue from 'vue'\\\\nimport Vuex from 'vuex'\\\\n\\\\nimport Vuetify from 'vuetify'\\\\nimport { VApp, VContent } from 'vuetify\\\\\\\/lib'\\\\nimport colors from 'vuetify\\\\\\\/es5\\\\\\\/util\\\\\\\/colors'\\\\nimport 'vuetify\\\\\\\/dist\\\\\\\/vuetify.min.css'\\\\n\\\\nVue.use(Vuex)\\\\nconst vuetifyOptions = {}\\\\n\\\\nVue.use(Vuetify, {\\\\n  iconfont: 'mdi',\\\\n  customVariables: ['~\\\\\\\/assets\\\\\\\/variables.scss'],\\\\n  theme: {\\\\n    dark: true,\\\\n    themes: {\\\\n      light: {\\\\n        primary: colors.purple,\\\\n        secondary: colors.grey.darken1,\\\\n        accent: colors.shades.black,\\\\n        error: colors.red.accent3,\\\\n      },\\\\n      dark: {\\\\n        primary: colors.blue.darken2,\\\\n        accent: colors.grey.darken3,\\\\n        secondary: colors.amber.darken3,\\\\n        info: colors.teal.lighten1,\\\\n        warning: colors.amber.base,\\\\n        error: colors.deepOrange.accent4,\\\\n        success: colors.green.accent3,\\\\n      },\\\\n    },\\\\n  },\\\\n})\\\\n\\\\naddDecorator(() => ({\\\\n  vuetify: new Vuetify(vuetifyOptions),\\\\n  components: { VApp, VContent },\\\\n  template: `<v-app><v-content><story\\\\\\\/><\\\\\\\/v-content><\\\\\\\/v-app>`,\\\\n}))\\\\n\\\\nexport const parameters = {\\\\n  actions: { argTypesRegex: '^on[A-Z].*' },\\\\n}\\\\n```\\\\n\\\\n`Logo.vue`と`WeatherCard.vue`（テスト用に[Nuxt + Vuetify の構成で Storybook を導入する](https:\\\\\\\/\\\\\\\/almond.milk200.cc\\\\\\\/blog\\\\\\\/2020\\\\\\\/06\\\\\\\/01\\\\\\\/storybook.html)のcomponentを借用）向けにストーリーを作成しました。\\\\n\\\\n``` ts\\\\n\\\\\\\/\\\\\\\/ Logo.stories.js\\\\nimport { storiesOf } from '@storybook\\\\\\\/vue'\\\\nimport Logo from '@\\\\\\\/components\\\\\\\/Logo.vue'\\\\n\\\\nstoriesOf('Components\\\\\\\/Default', module).add(\\\\n  'Logo',\\\\n  () => ({\\\\n    components: { Logo },\\\\n    template: `\\\\n    <logo \\\\\\\/>\\\\n`,\\\\n  }),\\\\n  {\\\\n    info: true,\\\\n    notes: `\\\\n        # Logo\\\\n        Nuxt.js default logo\\\\n      `,\\\\n  },\\\\n)\\\\n```\\\\n\\\\n``` ts\\\\n\\\\\\\/\\\\\\\/ WeatherCard.stories.js\\\\nimport WeatherCard from '..\\\\\\\/components\\\\\\\/WeatherCard.vue'\\\\n\\\\nexport default {\\\\n  title: 'Components\\\\\\\/Vuetify',\\\\n  component: WeatherCard,\\\\n}\\\\n\\\\nconst Template = (args, { argTypes }) => ({\\\\n  props: Object.keys(argTypes),\\\\n  components: { WeatherCard },\\\\n  template: '<weather-card :day-of-the-week-labels=\\\\\\\"dayOfTheWeekLabels\\\\\\\"\\\\\\\/>',\\\\n})\\\\n\\\\nexport const WeatherCardComponent = Template.bind({})\\\\nWeatherCardComponent.args = {\\\\n  dayOfTheWeekLabels: ['SU', 'MO', 'TU', 'WED', 'TH', 'FR', 'SA'],\\\\n}\\\\n```\\\\n\\\\n`WeatherCard.vue`で利用している[Material Design Icon](https:\\\\\\\/\\\\\\\/material.io\\\\\\\/resources\\\\\\\/icons\\\\\\\/?style=baseline)が正しく表示されなかったので、`.storybook\\\\\\\/preview-head.html`を追加。\\\\n\\\\n``` html\\\\n<!-- .storybook\\\\\\\/preview-head.html -->\\\\n<link\\\\n  href=\\\\\\\"https:\\\\\\\/\\\\\\\/fonts.googleapis.com\\\\\\\/css?family=Roboto:100,300,400,500,700,900&display=swap\\\\\\\"\\\\n  rel=\\\\\\\"stylesheet\\\\\\\"\\\\n\\\\\\\/>\\\\n<link\\\\n  href=\\\\\\\"https:\\\\\\\/\\\\\\\/cdn.jsdelivr.net\\\\\\\/npm\\\\\\\/@mdi\\\\\\\/font@3.x\\\\\\\/css\\\\\\\/materialdesignicons.min.css\\\\\\\"\\\\n  rel=\\\\\\\"stylesheet\\\\\\\"\\\\n\\\\\\\/>\\\\n```\\\\n\\\\n## 課題\\\\n\\\\n### lint\\\\\\\/formatについて\\\\n\\\\nこれまで Prettier をフォーマッター\\\\\\\/リンターとして使ってきたのですが、vue のおすすめフォーマット設定がよくわかりませんでした。eslint + prettierのようなのですが、VSCode で一番人気がある vue 用拡張機能[Vetur](https:\\\\\\\/\\\\\\\/marketplace.visualstudio.com\\\\\\\/items?itemName=octref.vetur)の標準フォーマッターはPrettier になっていて、eslintの推奨と競合するようになってしまいました。\\\\n\\\\n各configを調整して、eslintとprettierを共存させる設定について解説しているサイトを調べたりもしましたが、私自身はeslintへのこだわりが無いのでprettierにすべてお任せするようにしました。しばらくこのまま開発を進め、問題点が出てきたらそのとき考えようと思います。\\\\n\\\\n### vscodeのformatter設定について\\\\n\\\\nangularとvueのプロジェクトをVSCodeで開発するようになると、VSCodeのグローバル設定で全てをまかなうのは難しいように感じました。グローバルの設定は最低限の共通事項に留め、各種プロジェクトに必要な設定を個別に適用した方が良さそうです。\\\\n\\\\nなのでVSCodeの設定を、共通 \\\\\\\/ angular用 \\\\\\\/ vue用で分割する予定です。\\\\n\\\\n## 関連項目\\\\n\\\\n- [Vue.js official](https:\\\\\\\/\\\\\\\/vuejs.org\\\\\\\/)\\\\n- [awesome-vue - Github](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/vuejs\\\\\\\/awesome-vue)\\\\n- [Vue CLI official](https:\\\\\\\/\\\\\\\/cli.vuejs.org\\\\\\\/)\\\\n- [How to use Vue.js with Electron and Vuex](https:\\\\\\\/\\\\\\\/www.digitalocean.com\\\\\\\/community\\\\\\\/tutorials\\\\\\\/vuejs-vue-electron)\\\\n- [Nuxt.js official](https:\\\\\\\/\\\\\\\/nuxtjs.org\\\\\\\/)\\\\n- [ESLint と Prettier - NuxtJS](https:\\\\\\\/\\\\\\\/ja.nuxtjs.org\\\\\\\/guide\\\\\\\/development-tools\\\\\\\/#eslint-%E3%81%A8-prettier)\\\\n- [An (almost) comprehensive guide on using Storybook with Nuxt.js](https:\\\\\\\/\\\\\\\/medium.com\\\\\\\/js-dojo\\\\\\\/a-guide-on-using-storybook-with-nuxt-js-1e0018ec51c9)\\\\n- [Storybook for Vue](https:\\\\\\\/\\\\\\\/storybook.js.org\\\\\\\/docs\\\\\\\/guides\\\\\\\/guide-vue\\\\\\\/)\\\\n- [Nuxt + Vuetify の構成で Storybook を導入する](https:\\\\\\\/\\\\\\\/almond.milk200.cc\\\\\\\/blog\\\\\\\/2020\\\\\\\/06\\\\\\\/01\\\\\\\/storybook.html)\\\\n- [Story rendering - Storybook](https:\\\\\\\/\\\\\\\/storybook.js.org\\\\\\\/docs\\\\\\\/react\\\\\\\/configure\\\\\\\/story-rendering#adding-to-head)\\\\n\\\"}\"}","{\"docRef\":\"vue\\\/vue_storybook_vuex\",\"content\":\"{\\\"title\\\":\\\"vuexを利用したコンポーネントをStorybookで扱う\\\",\\\"date\\\":\\\"2020-10-25\\\",\\\"category\\\":\\\"Vue\\\",\\\"tag\\\":[\\\"vue\\\",\\\"nuxtjs\\\",\\\"storybook\\\",\\\"vuex\\\"],\\\"body\\\":\\\"\\\\n\\\\nNuxtJS + Electron を使って、デスクトップで動くオレオレ Todo アプリを作ってみたくなりました。component毎にstoryを作ってテストを行い、Nuxt側でそれをViewにまとめていこうと思います。\\\\n\\\\nデータはvuexのstoreからくるので、storybookとvuexの連携が必要になりました。\\\\n\\\\n## ワークログ\\\\n\\\\nstorybookの構成として、`preview.js`にvuexを利用するための設定が必要なのですが、[前回の時点](#todo)で既に含めていました。\\\\n\\\\n``` ts\\\\n...\\\\nimport Vuex from 'vuex'\\\\n...\\\\nVue.use(Vuex)\\\\n...\\\\n```\\\\n\\\\n動作確認のため、ドラフトのtask storeを作成します。getterだけの簡単なモノにしました。\\\\n\\\\n``` ts\\\\nimport { GetterTree } from 'vuex'\\\\nimport { RootState } from '~\\\\\\\/store'\\\\n\\\\nexport interface Task {\\\\n  name: string\\\\n  done: boolean\\\\n}\\\\n\\\\nexport interface TaskState {\\\\n  list: Task[]\\\\n}\\\\n\\\\nexport const state = () => ({\\\\n  list: [],\\\\n})\\\\n\\\\nexport const getters: GetterTree<TaskState, RootState> = {\\\\n  getTasks: (state: TaskState) => {\\\\n    return state.list\\\\n  },\\\\n}\\\\n```\\\\n\\\\n同様にtask componentを作成。\\\\n\\\\n``` ts\\\\n<template>\\\\n  <v-list>\\\\n    <v-list-item v-for=\\\\\\\"task in getTasks\\\\\\\" :key=\\\\\\\"task.name\\\\\\\">\\\\n      <v-list-item-content>\\\\n        <div>\\\\n          <span>{{ task.name }}<\\\\\\\/span>\\\\n          <v-btn small depressed color=\\\\\\\"primary\\\\\\\">start<\\\\\\\/v-btn>\\\\n        <\\\\\\\/div>\\\\n      <\\\\\\\/v-list-item-content>\\\\n    <\\\\\\\/v-list-item>\\\\n  <\\\\\\\/v-list>\\\\n<\\\\\\\/template>\\\\n<script>\\\\nimport { mapMutations, mapGetters, mapActions } from 'vuex'\\\\n\\\\nexport default {\\\\n  computed: {\\\\n    ...mapGetters({\\\\n      getTasks: 'tasks\\\\\\\/getTasks',\\\\n    }),\\\\n  },\\\\n}\\\\n<\\\\\\\/script>\\\\n<style><\\\\\\\/style>\\\\n```\\\\n\\\\nこのcomponentのstoryは以下のような記述で動くようになりました。テスト用のmock storeがポイントだと思います。今後mock storeが煩雑に感じてきたら、全コンポーネント共通の汎用mock storeを作ることになりそうです。\\\\n\\\\n``` ts\\\\nimport Task from '..\\\\\\\/..\\\\\\\/components\\\\\\\/Task'\\\\nimport Vuex from 'vuex'\\\\n\\\\nexport default {\\\\n  title: 'Components\\\\\\\/Task',\\\\n  component: Task,\\\\n  argTypes: {},\\\\n}\\\\n\\\\n\\\\\\\/\\\\\\\/ テスト用のmock store\\\\nconst store = new Vuex.Store({\\\\n  modules: {\\\\n    tasks: {\\\\n      namespaced: true,\\\\n      state: {\\\\n        list: [\\\\n          { name: 'task1', done: false },\\\\n          { name: 'task2', done: true },\\\\n          { name: 'task3', done: true },\\\\n        ],\\\\n      },\\\\n      getters: {\\\\n        getTasks: (state) => {\\\\n          return state.list\\\\n        },\\\\n      },\\\\n    },\\\\n  },\\\\n})\\\\n\\\\nconst Template = (args, { argTypes }) => ({\\\\n  props: Object.keys(argTypes),\\\\n  components: { Task },\\\\n  template: '<task \\\\\\\/>',\\\\n  store,\\\\n})\\\\n\\\\nexport const TaskComponent = Template.bind({})\\\\n```\\\\n\\\\n## 関連項目\\\\n\\\\n- [実践StorybookでVuexに立ち向かう](https:\\\\\\\/\\\\\\\/medium.com\\\\\\\/studist-dev\\\\\\\/storybook-with-vuex-7084bea6b509)\\\\n- [【Nuxt.js】VuexをStorybookで使う方法](https:\\\\\\\/\\\\\\\/sawami.net\\\\\\\/2019\\\\\\\/11\\\\\\\/01\\\\\\\/tech\\\\\\\/nuxt-js-vuex-and-storybook\\\\\\\/)\\\\n\\\"}\"}","{\"docRef\":\"vue\\\/vue_vuex_correctly_typed\",\"content\":\"{\\\"title\\\":\\\"NuxtJS + Typescriptで正しく型推論させる\\\",\\\"date\\\":\\\"2021-01-24\\\",\\\"category\\\":\\\"Vue\\\",\\\"tag\\\":[\\\"vue\\\",\\\"nuxtjs\\\",\\\"storybook\\\",\\\"vuex\\\",\\\"typed vuex\\\"],\\\"body\\\":\\\"\\\\n\\\\nNuxtJSを使っていて「Typescriptなのに型推論が効いてなくてイマイチだなぁ」と思っていたのですが、設定が悪いだけでした。\\\\n\\\\n## コンポーネント\\\\n\\\\n実装を急ぐあまり、基本を理解していませんでした。そもそも`.vue`はjavasriptでしか書けないのかと思っていたのですが、ちゃんと[公式サイトに説明](https:\\\\\\\/\\\\\\\/typescript.nuxtjs.org\\\\\\\/ja\\\\\\\/cookbook\\\\\\\/components)がありました。\\\\n\\\\n``` ts\\\\n<script lang=\\\\\\\"ts\\\\\\\">\\\\n  \\\\\\\/** TypeScript はここに記述します **\\\\\\\/\\\\n<\\\\\\\/script>\\\\n```\\\\n\\\\nscriptのlangを設定していたり、していないものがあったのでtypescriptに統一しました。\\\\n\\\\n### Options API\\\\n\\\\nその後、ビルドは通りstorybookではエラーなく動いていたのですが`yarn dev`でNuxtJSのアプリを動かすと大量にエラーが出ることに気が付きました。\\\\n\\\\n``` ts\\\\nTS2339: Property 'duration' does not exist on type '{ minutes(): number; seconds(): number; }'\\\\n```\\\\n\\\\n設定不十分な状態でtypescriptにした結果、型がうまく見つからずにエラーが表示されるようになった模様。これについてもちゃんと[公式サイトを読んで](https:\\\\\\\/\\\\\\\/typescript.nuxtjs.org\\\\\\\/ja\\\\\\\/cookbook\\\\\\\/components#options-api)いれば何ということはない話でした。\\\\n\\\\n``` ts\\\\nimport Vue, { PropOptions } from 'vue'\\\\n\\\\ninterface User {\\\\n  firstName: string\\\\n  lastName: string\\\\n}\\\\n\\\\nexport default Vue.extend({\\\\n  name: 'YourComponent',\\\\n\\\\n  props: {\\\\n    user: {\\\\n      type: Object,\\\\n      required: true\\\\n    } as PropOptions<User>\\\\n  },\\\\n\\\\n  data () {\\\\n    return {\\\\n      message: 'This is a message'\\\\n    }\\\\n  },\\\\n\\\\n  computed: {\\\\n    fullName (): string {\\\\n      return `${this.user.firstName} ${this.user.lastName}`\\\\n    }\\\\n  }\\\\n})\\\\n```\\\\n\\\\n対応方法はいくつかあるようですが、既存の書き方のまま`Vue.extened{()}`で囲むだけでよいOptions API方式を採用するのがお手軽で良さそうに感じました。\\\\n\\\\n## Vuex with Typed Vuex\\\\n\\\\nVuex store自体はtypescriptで書けるのですが、component等から利用するときにAction、getter、mutationの型推論やインテリセンスが効きません。書き味は悪いけどそういうものかと思っていたのですが、改善策があるようなのでトライしてみます。\\\\n\\\\nTyped VuexのNuxt用モジュールを[公式サイトの手順](https:\\\\\\\/\\\\\\\/typed-vuex.roe.dev\\\\\\\/getting-started-nuxt)に従い導入しました。\\\\n\\\\n``` powershell\\\\n> yarn add --dev nuxt-typed-vuex\\\\n```\\\\n\\\\n``` ts\\\\n\\\\\\\/\\\\\\\/ nuxt.config.js 抜粋\\\\n  \\\\\\\/*\\\\n  ** Nuxt.js dev-modules\\\\n  *\\\\\\\/\\\\n  buildModules: [\\\\n    '@nuxt\\\\\\\/typescript-build',\\\\n    '@nuxtjs\\\\\\\/vuetify',\\\\n    'nuxt-typed-vuex',\\\\n  ],\\\\n```\\\\n\\\\nそしてstoreへのアクセスに利用する`$accessor`の型定義ファイルを追加します。\\\\n\\\\n``` ts\\\\n\\\\\\\/\\\\\\\/ ~\\\\\\\/types\\\\\\\/index.d.ts\\\\nimport { accessorType } from '~\\\\\\\/store'\\\\n\\\\ndeclare module 'vue\\\\\\\/types\\\\\\\/vue' {\\\\n  interface Vue {\\\\n    $accessor: typeof accessorType\\\\n  }\\\\n}\\\\n\\\\ndeclare module '@nuxt\\\\\\\/types' {\\\\n  interface NuxtAppOptions {\\\\n    $accessor: typeof accessorType\\\\n  }\\\\n}\\\\n```\\\\n\\\\nその後は[実装サンプル](https:\\\\\\\/\\\\\\\/github.com\\\\\\\/danielroe\\\\\\\/typed-vuex\\\\\\\/blob\\\\\\\/main\\\\\\\/examples\\\\\\\/nuxt\\\\\\\/store\\\\\\\/index.ts)や[参考記事](https:\\\\\\\/\\\\\\\/qiita.com\\\\\\\/shindex\\\\\\\/items\\\\\\\/a90217b9e4c03c5b5215#vuex-%E3%81%AE-typescript-%E5%8C%96)などを見ながらstoreスクリプトをTyped Vuex仕様にしていきます。\\\\n\\\\nstore側が完了してしまえば、呼び出しているcomponent側の更新は非常に簡単です。getter\\\\\\\/mutation\\\\\\\/actionへのアクセスはthis.$accessorがイイ感じに行ってくれます。例えば`dispatch('アクション名')`としていた部分は`this.$accessor.{submodules}.アクション名()`とリテラルではなく直接呼出しになり、インテリセンスも効いています。素晴らしい！\\\\n\\\\n### Storybook with Typed Vuex\\\\n\\\\nこれでめでたしめでたし！と思いきや、StorybookでTyped Vuexの`$accessor`にアクセスしている部分の処理がエラーを出すようになってしまいました。StorybookはNuxtJSとは異なるプロジェクトとして起動するので、`nuxt-typed-vuex`によるaccessor自動インポートが効いていないからだと推測しました。\\\\n\\\\n> Nuxt Typed Vuex is made up of two packages:\\\\n>\\\\n> 1. typed-vuex - a typed store accessor with helper functions, with no Nuxt dependencies\\\\n> 1. nuxt-typed-vuex - a Nuxt module that auto-injects this accessor throughout your project\\\\n\\\\n[Vue版のTyped Vuex setup](https:\\\\\\\/\\\\\\\/typed-vuex.roe.dev\\\\\\\/getting-started-vue#setup)と[StackOverflowのこの回答](https:\\\\\\\/\\\\\\\/stackoverflow.com\\\\\\\/a\\\\\\\/62610041)を参考に`preview.js`を更新したところ、Storybookでも`$accessor`を利用できるようになりました。\\\\n\\\\n``` diff\\\\n\\\\\\\/\\\\\\\/ .storybook\\\\\\\/preview.js\\\\nimport { addDecorator } from '@storybook\\\\\\\/vue'\\\\nimport Vue from 'vue'\\\\nimport Vuex from 'vuex'\\\\n+import { useAccessor } from 'typed-vuex'\\\\n\\\\nimport Vuetify from 'vuetify'\\\\nimport { VApp, VContent } from 'vuetify\\\\\\\/lib'\\\\nimport colors from 'vuetify\\\\\\\/es5\\\\\\\/util\\\\\\\/colors'\\\\nimport 'vuetify\\\\\\\/dist\\\\\\\/vuetify.min.css'\\\\n+import * as rootStore from '~\\\\\\\/store\\\\\\\/index'\\\\n+import * as todos from '~\\\\\\\/store\\\\\\\/todos'\\\\n+import * as tasks from '~\\\\\\\/store\\\\\\\/tasks'\\\\n\\\\n+\\\\\\\/\\\\\\\/ setup Vuex with Typed Vuex\\\\nVue.use(Vuex)\\\\n+export const storePattern = {\\\\n+  state: rootStore.state,\\\\n+  getters: rootStore.getters,\\\\n+  actions: rootStore.actions,\\\\n+  mutations: rootStore.mutations,\\\\n+  modules: {\\\\n+    todos: {\\\\n+      namespaced: true,\\\\n+      state: {\\\\n+        list: [\\\\n+          { name: 'task1', done: false, running: false },\\\\n+          { name: 'task2', done: false, running: false },\\\\n+          { name: 'task3', done: false, running: true },\\\\n+          { name: 'task4', done: false, running: false },\\\\n+          { name: 'task5', done: false, running: false },\\\\n+        ],\\\\n+      },\\\\n+      getters: todos.getters,\\\\n+      actions: todos.actions,\\\\n+      mutations: todos.mutations,\\\\n+    },\\\\n+    tasks,\\\\n+  },\\\\n+}\\\\n+const store = new Vuex.Store(storePattern)\\\\n+export const accessor = useAccessor(store, storePattern)\\\\n+Vue.prototype.$accessor = accessor\\\\n+\\\\n+export default store\\\\n+\\\\n+\\\\\\\/\\\\\\\/ Setup vuetify\\\\nconst vuetifyOptions = {}\\\\n\\\\nVue.use(Vuetify, {\\\\n  iconfont: 'mdi',\\\\n  customVariables: ['~\\\\\\\/assets\\\\\\\/variables.scss'],\\\\n  theme: {\\\\n    dark: true,\\\\n    themes: {\\\\n      light: {\\\\n        primary: colors.purple,\\\\n        secondary: colors.grey.darken1,\\\\n        accent: colors.shades.black,\\\\n        error: colors.red.accent3,\\\\n      },\\\\n      dark: {\\\\n        primary: colors.blue.darken2,\\\\n        accent: colors.grey.darken3,\\\\n        secondary: colors.amber.darken3,\\\\n        info: colors.teal.lighten1,\\\\n        warning: colors.amber.base,\\\\n        error: colors.deepOrange.accent4,\\\\n        success: colors.green.accent3,\\\\n      },\\\\n    },\\\\n  },\\\\n})\\\\n\\\\naddDecorator(() => ({\\\\n  vuetify: new Vuetify(vuetifyOptions),\\\\n  components: { VApp, VContent },\\\\n  template: `<v-app><v-main><story\\\\\\\/><\\\\\\\/v-main><\\\\\\\/v-app>`,\\\\n}))\\\\n\\\\nexport const parameters = {\\\\n  actions: { argTypesRegex: '^on[A-Z].*' },\\\\n}\\\\n```\\\\n\\\\nstory側ではstoreのモックを作成する代わりに、`preview.js`でexportしたstoreをそのまま利用できることに気が付きました。とっても便利！！\\\\n\\\\n``` diff\\\\n-import Vuex from 'vuex'\\\\n+import store from '@\\\\\\\/.storybook\\\\\\\/preview'\\\\nimport TodoList from '~\\\\\\\/components\\\\\\\/TodoList'\\\\n\\\\n-const store = new Vuex.Store({\\\\n-  modules: {\\\\n-    todos: {\\\\n-      namespaced: true,\\\\n-      state: {\\\\n-        list: [\\\\n-          { name: 'task1', done: false },\\\\n-          { name: 'task2', done: true },\\\\n-          { name: 'task3', done: true },\\\\n-          { name: 'task4', done: true },\\\\n-        ],\\\\n-      },\\\\n-      getters: {\\\\n-        getTodoList: (state) => {\\\\n-          return state.list\\\\n-        },\\\\n-      },\\\\n-    },\\\\n-  },\\\\n-})\\\\n\\\\nconst Template = (args, { argTypes }) => ({\\\\n  props: Object.keys(argTypes),\\\\n  components: { TodoList },\\\\n  template: '<todo-list \\\\\\\/>',\\\\n  store,\\\\n})\\\\n\\\\nexport const todoList = Template.bind({})\\\\n```\\\\n\\\\n## 所感\\\\n\\\\n色々な試行錯誤を通してVue\\\\\\\/Nuxtに関する理解が深まってきたように感じます。\\\\n\\\\n## 関連項目\\\\n\\\\n- [Qiita - NuxtJS + Vuexでいい感じのTypescript環境をあまり頑張らないで構築する](https:\\\\\\\/\\\\\\\/qiita.com\\\\\\\/shindex\\\\\\\/items\\\\\\\/a90217b9e4c03c5b5215)\\\\n- [Nuxt Typescript](https:\\\\\\\/\\\\\\\/typescript.nuxtjs.org\\\\\\\/ja\\\\\\\/)\\\\n- [Typed Vuex](https:\\\\\\\/\\\\\\\/typed-vuex.roe.dev\\\\\\\/)\\\\n- [stack overflow - How can I make Vuex store work with Storybook?](https:\\\\\\\/\\\\\\\/stackoverflow.com\\\\\\\/questions\\\\\\\/56682493\\\\\\\/how-can-i-make-vuex-store-work-with-storybook)\\\\n\\\"}\"}","{\"docRef\":\"welcome\",\"content\":\"{\\\"title\\\":\\\"Welcome\\\",\\\"date\\\":\\\"2022-12-31\\\",\\\"category\\\":\\\"none\\\",\\\"toc\\\":\\\"none\\\",\\\"body\\\":\\\"\\\\n\\\\n# About this site\\\\n\\\\nこのサイトは、私が学習したソフトウェア開発に関する知識をまとめ、後で振り返って思い出す事を目的に作成されました。\\\\n\\\\nAngularと.NET Coreに興味があります。あまり気負わず、暇な時間に、好奇心とモチベーションの続く限りまとめていきます。\\\\n\\\\n目指せ、生涯現役ソフトウェアエンジニア！\\\\n\\\\n## About me\\\\n\\\\n  <div class=\\\\\\\"about-me\\\\\\\">\\\\n    <p>@takumura<\\\\\\\/p>\\\\n    <img class=\\\\\\\"avatar\\\\\\\" src=\\\\\\\"assets\\\\\\\/images\\\\\\\/profile_20140615.jpg\\\\\\\" \\\\\\\/>\\\\n    <p>software engineer<\\\\\\\/p>\\\\n  <\\\\\\\/div>\\\\n\\\\n## Skill Set\\\\n\\\\n### Currently using\\\\n\\\\nC# \\\\\\\/ .NET Core \\\\\\\/ ASP.NET WebForms \\\\\\\/ ASP.NET MVC \\\\\\\/ ASP.NET Core \\\\\\\/ Javascript \\\\\\\/ JQuery \\\\\\\/ Typescript \\\\\\\/ Angular \\\\\\\/ Windows Server \\\\\\\/ IIS \\\\\\\/ Microsoft SQL Server \\\\\\\/ 英語(TOEIC 845点)\\\\n\\\\n### Experienced before\\\\n\\\\nJava 1.2 - 1.4 \\\\\\\/ SAP BW 3.1C \\\\\\\/ Debian Linux \\\\\\\/ VMWare ESXi 4.1 - 5.5\\\\n\\\\n## 免責事項\\\\n\\\\n### 当サイトの情報の正確性について\\\\n\\\\n当サイトのコンテンツや情報において、可能な限り正確な情報を掲載するよう努めています。\\\\n\\\\nしかし、誤情報が入り込んだり、情報が古くなったりすることもあります。\\\\n\\\\n必ずしも正確性を保証するものではありません。また合法性や安全性なども保証しません。\\\\n\\\\n### 損害等の責任について\\\\n\\\\n当サイトに掲載された内容によって生じた損害等の一切の責任を負いかねますので、ご了承ください。\\\\n\\\\n<small>&copy; Copyright 2022 takumura<\\\\\\\/small>\\\\n\\\"}\"}","{\"docRef\":\"windows-app\\\/howto-create-windows-app\",\"content\":\"{\\\"title\\\":\\\"Windowsデスクトップ向けポータブルアプリケーション開発の現状確認\\\",\\\"date\\\":\\\"2020-02-23\\\",\\\"category\\\":\\\"windows app\\\",\\\"tag\\\":[\\\"windows app\\\",\\\"uwp\\\",\\\"msix\\\",\\\"electron\\\"],\\\"body\\\":\\\"\\\\n\\\\n作業時間や手順を管理するためのWindows10向けデスクトップアプリケーションを作りたくなりました。2020\\\\\\\/2月時点で、どんな開発方法があるのか確認しました。\\\\n\\\\n## 検索してヒットした情報\\\\n\\\\nまず最初にかずきさんのde:code 2019プレゼンテーションを確認。\\\\n\\\\n- [Windows 10 対応のデスクトップアプリを 作る技術（事前公開版）](https:\\\\\\\/\\\\\\\/www.slideshare.net\\\\\\\/okazuki0130\\\\\\\/windows-10-147881407)\\\\n\\\\n続いてMicrosoft Docs\\\\n\\\\n- [Windows PC 用のデスクトップ アプリの構築](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/ja-jp\\\\\\\/windows\\\\\\\/apps\\\\\\\/desktop\\\\\\\/)\\\\n\\\\nMSIXについて\\\\n\\\\n- [MSIX ドキュメント](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/ja-jp\\\\\\\/windows\\\\\\\/msix\\\\\\\/)\\\\n\\\\nMSIXは管理者権限不要でインストール可能とあるが、インストール作業自体は必要。インストール不要なexe形式のアプリを作ろうと思った場合は、dotnet core + wpfで[自己完結型](https:\\\\\\\/\\\\\\\/docs.microsoft.com\\\\\\\/ja-jp\\\\\\\/dotnet\\\\\\\/core\\\\\\\/deploying\\\\\\\/index#publish-self-contained)にするのが良さそうです。\\\\n\\\\n## Electronについて\\\\n\\\\n[公式サイト](https:\\\\\\\/\\\\\\\/www.electronjs.org\\\\\\\/)のキャッチコピーは`Build cross-platform desktop apps with JavaScript, HTML, and CSS`。VSCodeがElectronを利用していることを考えると、十分に機能的なappを作成できるように思えます。\\\\n\\\\n## 何から手を付けるか\\\\n\\\\nElectronに将来性を感じる。そしてMSのテクノロジーが不確定で、この先まだまだ変更があるように感じる。なのでまずはElectron + Vue.jsの勉強から始めるのが良いのでは？と思いました。\\\\n\\\\n## 関連項目\\\\n\\\\n- [.NET Core 3.0のPublish Single File概要](https:\\\\\\\/\\\\\\\/qiita.com\\\\\\\/Nuits\\\\\\\/items\\\\\\\/3136c999721e5e3fae90)\\\\n\\\"}\"}"]