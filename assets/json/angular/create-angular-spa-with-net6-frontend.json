{"title":".NET6ã¨Angular v13ã§SPAã‚µã‚¤ãƒˆã‚’ä½œã‚‹ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰","date":"2022-01-07","category":"csharp","tag":["net6","angular v13"],"body":"æœ¬ã‚µã‚¤ãƒˆã¯è‡ªä½œã®webã‚µã‚¤ãƒˆç”Ÿæˆã‚¨ãƒ³ã‚¸ãƒ³ã§ç”Ÿæˆã•ã‚Œã¦ã„ã¾ã™ã€‚è‡ªä½œã‚¨ãƒ³ã‚¸ãƒ³ã¯2019å¹´ã«.NET Core 2.1ã¨Angular v7ã§é–‹ç™ºã—ã¾ã—ãŸã€‚\r\n\r\nãã‚Œã‹ã‚‰æ™‚ã¯æµã‚Œã€2021å¹´æœ«æ™‚ç‚¹ã§ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰å´ã¯.NET6ã«ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å´ã¯Angular v13ã«ãã‚Œãã‚Œãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã•ã‚Œã¦ã„ã¾ã™ã€‚\r\n\r\né€²åŒ–ã®æ³¢ã«å–ã‚Šæ®‹ã•ã‚Œãªã„ã‚ˆã†ã«ã€æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦webã‚µã‚¤ãƒˆç”Ÿæˆã‚¨ãƒ³ã‚¸ãƒ³ã‚’å†é–‹ç™ºã—ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚\r\n\r\nã“ã®è¨˜äº‹ã§ã¯ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ç·¨ã¨ã„ã†ã“ã¨ã§Angularã®SPAã‚µã‚¤ãƒˆã‚’ã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚\r\n\r\n## é–‹ç™ºæº–å‚™\r\n\r\nVSãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆæ™‚ã€æœ€æ–°ã®Angular v13ã§ã¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã®ã§ã€ä¸€æ™‚çš„ã«Angular v12ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã—ãŸã€‚æœ¬æ ¼çš„ã«ã‚µã‚¤ãƒˆå®Ÿè£…ã‚’å§‹ã‚ã‚‹å‰ã«ã€ã¾ãšã¯v13ã¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚\r\n\r\nangularã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã¨ã„ãˆã°`ng update`ã‚’ä½¿ã†ã¹ãã ã¨æ€ã†ã®ã§ã™ãŒã€VSãŒä½œæˆã—ãŸãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒéå¸¸ã«è³ªç´ ã§é€šå¸¸ã®ã‚µã‚¤ãƒˆã¨ã¯ç•°ãªã£ã¦ã„ã¾ã—ãŸã€‚å¤‰æ›´ç‚¹ã‚’æ¢ã‚‹ãŸã‚ã€v13ã®cliã§`ng new`ã—ãŸå†…å®¹ã¨æ¯”è¼ƒã—ã¦ã¿ã¾ã™ã€‚\r\n\r\n``` ps\r\n> npm uninstall -g @angular/cli\r\n> npm install -g @angular/cli\r\n> ng version\r\nadded 183 packages, and audited 184 packages in 33s\r\n\r\n22 packages are looking for funding\r\n  run `npm fund` for details\r\n\r\nfound 0 vulnerabilities\r\nPS C:\\WINDOWS\\system32> ng version\r\n\r\n     _                      _                 ____ _     ___\r\n    / \\   _ __   __ _ _   _| | __ _ _ __     / ___| |   |_ _|\r\n   / â–³ \\ | '_ \\ / _` | | | | |/ _` | '__|   | |   | |    | |\r\n  / ___ \\| | | | (_| | |_| | | (_| | |      | |___| |___ | |\r\n /_/   \\_\\_| |_|\\__, |\\__,_|_|\\__,_|_|       \\____|_____|___|\r\n                |___/\r\n\r\n\r\nAngular CLI: 13.1.2\r\nNode: 16.13.1\r\nPackage Manager: yarn 1.22.15\r\nOS: win32 x64\r\n\r\nAngular:\r\n...\r\n\r\nPackage                      Version\r\n------------------------------------------------------\r\n@angular-devkit/architect    0.1301.2 (cli-only)\r\n@angular-devkit/core         13.1.2 (cli-only)\r\n@angular-devkit/schematics   13.1.2 (cli-only)\r\n@schematics/angular          13.1.2 (cli-only)\r\n```\r\n\r\n``` ps\r\n> ng new net6-markdown-web-engine\r\n? Would you like to add Angular routing? Yes\r\n? Which stylesheet format would you like to use? SCSS   [ https://sass-lang.com/documentation/syntax#scss\r\n ]\r\nCREATE net6-markdown-web-engine/angular.json (3315 bytes)\r\nCREATE net6-markdown-web-engine/package.json (1088 bytes)\r\nCREATE net6-markdown-web-engine/README.md (1067 bytes)\r\nCREATE net6-markdown-web-engine/tsconfig.json (863 bytes)\r\nCREATE net6-markdown-web-engine/.editorconfig (274 bytes)\r\nCREATE net6-markdown-web-engine/.gitignore (620 bytes)\r\nCREATE net6-markdown-web-engine/.browserslistrc (600 bytes)\r\nCREATE net6-markdown-web-engine/karma.conf.js (1441 bytes)\r\nCREATE net6-markdown-web-engine/tsconfig.app.json (287 bytes)\r\nCREATE net6-markdown-web-engine/tsconfig.spec.json (333 bytes)\r\nCREATE net6-markdown-web-engine/.vscode/extensions.json (130 bytes)\r\nCREATE net6-markdown-web-engine/.vscode/launch.json (474 bytes)\r\nCREATE net6-markdown-web-engine/.vscode/tasks.json (938 bytes)\r\nCREATE net6-markdown-web-engine/src/favicon.ico (948 bytes)\r\nCREATE net6-markdown-web-engine/src/index.html (307 bytes)\r\nCREATE net6-markdown-web-engine/src/main.ts (372 bytes)\r\nCREATE net6-markdown-web-engine/src/polyfills.ts (2338 bytes)\r\nCREATE net6-markdown-web-engine/src/styles.sass (80 bytes)\r\nCREATE net6-markdown-web-engine/src/test.ts (745 bytes)\r\nCREATE net6-markdown-web-engine/src/assets/.gitkeep (0 bytes)\r\nCREATE net6-markdown-web-engine/src/environments/environment.prod.ts (51 bytes)\r\nCREATE net6-markdown-web-engine/src/environments/environment.ts (658 bytes)\r\nCREATE net6-markdown-web-engine/src/app/app-routing.module.ts (245 bytes)\r\nCREATE net6-markdown-web-engine/src/app/app.module.ts (393 bytes)\r\nCREATE net6-markdown-web-engine/src/app/app.component.html (23364 bytes)\r\nCREATE net6-markdown-web-engine/src/app/app.component.spec.ts (1127 bytes)\r\nCREATE net6-markdown-web-engine/src/app/app.component.ts (229 bytes)\r\nCREATE net6-markdown-web-engine/src/app/app.component.sass (0 bytes)\r\n/ Installing packages (yarn)...\r\nâˆš Packages installed successfully.\r\n```\r\n\r\næ¯”è¼ƒã—ãŸã¨ã“ã‚ã€apiã®proxy(VSãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç‹¬è‡ªã®å¤‰æ›´ç‚¹)ä»¥å¤–ã®éš›ã¯ã»ã¨ã‚“ã©ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚IE11ãŒæ­£å¼ã«ã‚µãƒãƒ¼ãƒˆå¯¾è±¡ã‹ã‚‰å¤–ã‚ŒãŸã‚ˆã†ã§ã€polifills.tsç­‰ã‹ã‚‰IE11ã®è¨˜è¿°ãŒæ¶ˆãˆã¦ã„ã‚‹ãã‚‰ã„ã§ã€angular.jsonã‚‚ã»ã¼ã»ã¼åŒã˜ã€‚ç§»è¡Œã¯ã¨ã¦ã‚‚ç°¡å˜ãã†ã§ã™ã€‚ã›ã£ã‹ããªã®ã§ã€ã‚µãƒ¼ãƒã‚µã‚¤ãƒ‰apiã‚’ä½¿ã†ãƒšãƒ¼ã‚¸ã¯åå‰ã‚’å¤‰ãˆã¦æ®‹ã—ãŸçŠ¶æ…‹ã§v12ã¨v13ã®ã‚½ãƒ¼ã‚¹ã‚’ãƒãƒ¼ã‚¸ã—ã¾ã—ãŸã€‚\r\n\r\n## linterã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—\r\n\r\nTSlintã‹ã‚‰ESLintã¸ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯[Angularã®Roadmapã§Completed Q4 2020](https://angular.io/guide/roadmap#migrate-to-eslint)ã¨ãªã£ã¦ãŠã‚Šã€`ng new`ã—ãŸã‚³ãƒ¼ãƒ‰ä¸­ã‹ã‚‰lintã®è¨­å®šãŒãªããªã£ãŸã‚ˆã†ã§ã™ã€‚\r\n\r\nã‚°ã‚°ã£ãŸã¨ã“ã‚[angular-eslint](https://github.com/angular-eslint/angular-eslint)ã‚’åˆ©ç”¨ã™ã‚‹è¨˜äº‹ãŒå¤šãç›®ã«ã¤ã„ãŸã®ã§ã€ä»Šå›ã¯ã“ã‚Œã‚’è©¦ã—ã¦ã¿ã¾ã™ã€‚1ã‚³ãƒãƒ³ãƒ‰ã§ä½œæ¥­ã¯å®Œäº†ã§ã™ã€‚\r\n\r\n``` ps\r\n> ng add @angular-eslint/schematics\r\nâ„¹ Using package manager: yarn\r\nâœ” Found compatible package version: @angular-eslint/schematics@13.0.1.\r\nâœ” Package information loaded.\r\n\r\nThe package @angular-eslint/schematics@13.0.1 will be installed and executed.\r\nWould you like to proceed? Yes\r\nâœ” Package successfully installed.\r\n\r\n    All @angular-eslint dependencies have been successfully installed ğŸ‰\r\n\r\n    Please see https://github.com/angular-eslint/angular-eslint for how to add ESLint configuration to your project.\r\n\r\n\r\n    We detected that you have a single project in your workspace and no existing linter wired up, so we are configuring ESLint for you automatically.\r\n\r\n    Please see https://github.com/angular-eslint/angular-eslint for more information.\r\n\r\nCREATE .eslintrc.json (984 bytes)\r\nUPDATE package.json (1662 bytes)\r\nUPDATE angular.json (3692 bytes)\r\nâœ” Packages installed successfully.\r\n```\r\n\r\n## Angular Materialã®è¨­å®š\r\n\r\nãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã«Angular Materialã‚’è¨­å®šã—ã¾ã™ã€‚å½“åˆã¯Fluent UI web componentsã‚’è©¦ãã†ã¨æ€ã£ãŸã®ã§ã™ãŒã€Angular Materialã‚’å‰å›åˆ©ç”¨ã—ãŸã¨ãã«ã€ã‚„ã‚Šæ®‹ã—ã¦ã„ãŸèª²é¡ŒãŒã‚ã£ãŸã®ã§ä»Šå›å†ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã—ã¾ã™ã€‚\r\n\r\n``` ps\r\n> ng add @angular/material\r\nâ„¹ Using package manager: yarn\r\nâœ” Found compatible package version: @angular/material@13.1.3.\r\nâœ” Package information loaded.\r\n\r\nThe package @angular/material@13.1.3 will be installed and executed.\r\nWould you like to proceed? Yes\r\nâœ” Package successfully installed.\r\n? Choose a prebuilt theme name, or \"custom\" for a custom theme: Indigo/Pink        [ Preview: https://material.angular.io?theme=indigo-pink ]\r\n? Set up global Angular Material typography styles? No\r\n? Set up browser animations for Angular Material? Yes\r\nUPDATE package.json (1727 bytes)\r\nâœ” Packages installed successfully.\r\nUPDATE src/app/app.module.ts (737 bytes)\r\nUPDATE angular.json (3982 bytes)\r\nUPDATE src/index.html (613 bytes)\r\nUPDATE src/styles.scss (182 bytes)\r\n```\r\n\r\n## nav componentã®è¿½åŠ \r\n\r\nä»¥å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§åˆ©ç”¨ã—ã¦ã„ãŸNav Componentã‚’ã»ã¼ãã®ã¾ã¾ç§»è¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚\r\n\r\nä»¥å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯Angular.ioã®å®Ÿè£…ã‹ã‚‰ã€ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®breakpointè¨­å®šã‚’æ‹å€Ÿã—ã¦ã„ãŸã®ã§ã™ãŒã€`handset`ã‚’åˆ©ç”¨ã—ã¦ã„ã‚‹ã¨ç”»é¢ã®widthã‚’å¤‰ãˆãŸã¨ãã«å¤‰ãªã¨ã“ã‚ã§ã‚µã‚¤ãƒ‰ãƒãƒ¼ãŒå‡ºã‚‹ã®ã§ã€ã“ã®å®Ÿè£…ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚\r\n\r\n[AngularMaterialã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­å®š](https://material.angular.io/cdk/layout/overview#predefined-breakpoints)ã«ã‚ˆã‚‹ã¨ã€handsetã®ãƒ«ãƒ¼ãƒ«ã¯`(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)`ã§ã—ãŸã€‚orientationã®é–¢ä¿‚ã§max-widthãŒ600-960ã®é–“ã§ã‚‚isHandSetãŒtrueã«ãªã‚‹ç¬é–“ãŒã‚ã‚‹ã®ã ã¨æ€ã„ã¾ã™ã€‚\r\n\r\n`XSmall`ã¨`Small`ã®ã¨ãã¯ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚’è¡¨ç¤ºã—ãªã„ã‚ˆã†ã«å¤‰æ›´ã—ãŸã‚‰ã‚¤ã‚¤æ„Ÿã˜ã«ãªã‚Šã¾ã—ãŸã€‚\r\n\r\n``` ts\r\nisSmall$: Observable<boolean> = this.breakpointObserver\r\n    .observe([Breakpoints.XSmall, Breakpoints.Small])\r\n    .pipe(map((result) => result.matches));\r\n```\r\n\r\n## loading bar componentã®è¿½åŠ \r\n\r\nã“ã¡ã‚‰ã‚‚ä»¥å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§å®Ÿè£…ã—ãŸcomponentã‚’ã»ã¼ãã®ã¾ã¾ç§»è¡Œã§ãã¾ã—ãŸã€‚å‹‰å¼·ä¸è¶³ã§async pipeã‚’ä½¿ã‚ãšã«stateã‚’ãƒ­ãƒ¼ã‚«ãƒ«å¤‰æ•°ã«æŒã¡ç›´ã—ã¦è¡¨ç¤º/éè¡¨ç¤ºã®åˆ¶å¾¡ã‚’ã—ã¦ã„ãŸéƒ¨åˆ†ã‚’ã€ã‚·ãƒ³ãƒ—ãƒ«ã«æ›¸ãç›´ã™ä¿®æ­£ã ã‘è¡Œã„ã¾ã—ãŸã€‚\r\n\r\n## NGRXã®å°å…¥\r\n\r\nmarkdownã‹ã‚‰ã‚³ãƒ³ãƒãƒ¼ãƒˆã—ãŸjsonãƒ•ã‚¡ã‚¤ãƒ«ã‚’`ngrx store`ã«èª­ã¿è¾¼ã‚“ã ã‚‰ã€ã©ã®componetã‹ã‚‰ã§ã‚‚å¥½ãã«å‘¼ã³å‡ºã›ã¦ã‚¤ã‚¤æ„Ÿã˜ã«ãªã‚‰ãªã„ã‹ãªï¼Ÿã¨ã„ã†ç™ºæƒ³ã‹ã‚‰ã€ä»Šå›ã¯NGRXã‚’åˆ©ç”¨ã—ã¦ã¿ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚\r\n\r\n``` ps\r\n> ng add @ngrx/store@latest\r\nâ„¹ Using package manager: yarn\r\nâœ” Package information loaded.\r\n\r\nThe package @ngrx/store@latest will be installed and executed.\r\nWould you like to proceed? Yes\r\nâœ” Package successfully installed.\r\n\r\n    The NgRx ESLint Plugin is installed and configured with the recommended config.\r\n\r\n    If you want to change the configuration, please see https://github.com/timdeschryver/eslint-plugin-ngrx/#eslint-plugin-ngrx.\r\n\r\nUPDATE src/app/app.module.ts (1090 bytes)\r\nUPDATE package.json (1793 bytes)\r\nUPDATE .eslintrc.json (1098 bytes)\r\nâœ” Packages installed successfully.\r\nâœ” Packages installed successfully.\r\n``\r\n\r\nå…¬å¼ã®ã‚¬ã‚¤ãƒ‰ã«[ESLint NgRx Plugin](https://ngrx.io/guide/eslint-plugin)ãŒè¼‰ã£ã¦ã„ãŸã®ã§å°å…¥ã—ã¦ã¿ã¾ã™ã€‚\r\n``` ps\r\n> ng add eslint-plugin-ngrx\r\nSkipping installation: Package already installed\r\n? Which config would you like to use? recommended (all the recommended rules configured with the recommended severity) [https://github.com/timdeschryver/eslint-plugin-ngrx/blob/main/src/configs/recommended.ts]\r\n\r\n      The NgRx ESLint Plugin is installed and configured with the 'recommended' config.\r\n\r\n      If you want to change the configuration, please see https://github.com/timdeschryver/eslint-plugin-ngrx/#eslint-plugin-ngrx.\r\n\r\nUPDATE .eslintrc.json (1098 bytes)\r\n```\r\n\r\n## å¾Œã§èª¿ã¹ã‚‹\r\n\r\n- prettierã®[bracket line](https://prettier.io/docs/en/options.html#bracket-line)ã‚’trueã«ã™ã‚‹\r\n- loading barã®show/hideã«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚‹\r\n\r\n## é–¢é€£é …ç›®\r\n\r\n- [How to upgrade Angular CLI to the latest version](https://stackoverflow.com/questions/43931986/how-to-upgrade-angular-cli-to-the-latest-version)\r\n- [angular-eslint](https://github.com/angular-eslint/angular-eslint)\r\n- [Tasks in Visual Studio Code - Compound tasks](https://code.visualstudio.com/docs/editor/tasks#_compound-tasks)\r\n- [Getting Started with Angular Material](https://material.angular.io/guide/getting-started)"}